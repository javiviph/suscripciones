(function(z,bt){typeof exports=="object"&&typeof module<"u"?bt(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],bt):(z=typeof globalThis<"u"?globalThis:z||self,bt(z.ChartsReact={},z.React))})(this,function(z,bt){"use strict";var Eo=(e=>(e.RENDER_FINISHED="render-finished",e.RESIZE="chart-resize",e.MOUSEOVER="chart-mouseover",e.MOUSEOUT="chart-mouseout",e))(Eo||{}),Oo=(e=>(e.SHOW="show-modal",e.HIDE="hide-modal",e))(Oo||{}),So=(e=>(e.UPDATE="model-update",e))(So||{}),Bu=(e=>(e.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",e.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",e.BUTTON_CLICK="toolbar-button-click",e.SHOW_TOOLTIP="toolbar-show-tooltip",e.HIDE_TOOLTIP="toolbar-hide-tooltip",e))(Bu||{}),To=(e=>(e.UPDATE="zoom-bar-update",e.SELECTION_START="zoom-bar-selection-start",e.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",e.SELECTION_END="zoom-bar-selection-end",e))(To||{}),wo=(e=>(e.CHANGE="zoom-domain-change",e))(wo||{}),$o=(e=>(e.CANVAS_ZOOM_IN="canvas-zoom-in",e.CANVAS_ZOOM_OUT="canvas-zoom-out",e))($o||{}),Mo=(e=>(e.LABEL_MOUSEOVER="axis-label-mouseover",e.LABEL_MOUSEMOVE="axis-label-mousemove",e.LABEL_CLICK="axis-label-click",e.LABEL_MOUSEOUT="axis-label-mouseout",e.LABEL_FOCUS="axis-label-focus",e.LABEL_BLUR="axis-label-blur",e.RENDER_COMPLETE="axis-render-complete",e))(Mo||{}),Co=(e=>(e.POINT_MOUSEOVER="scatter-mouseover",e.POINT_MOUSEMOVE="scatter-mousemove",e.POINT_CLICK="scatter-click",e.POINT_MOUSEOUT="scatter-mouseout",e))(Co||{}),Ao=(e=>(e.WORD_MOUSEOVER="wordcloud-word-mouseover",e.WORD_MOUSEMOVE="wordcloud-word-mousemove",e.WORD_CLICK="wordcloud-word-click",e.WORD_MOUSEOUT="wordcloud-word-mouseout",e))(Ao||{}),Lo=(e=>(e.SLICE_MOUSEOVER="pie-slice-mouseover",e.SLICE_MOUSEMOVE="pie-slice-mousemove",e.SLICE_CLICK="pie-slice-click",e.SLICE_MOUSEOUT="pie-slice-mouseout",e))(Lo||{}),ko=(e=>(e.ARC_MOUSEOVER="gauge-arc-mouseover",e.ARC_MOUSEMOVE="gauge-arc-mousemove",e.ARC_CLICK="gauge-arc-click",e.ARC_MOUSEOUT="gauge-arc-mouseout",e))(ko||{}),Do=(e=>(e.BAR_MOUSEOVER="bar-mouseover",e.BAR_MOUSEMOVE="bar-mousemove",e.BAR_CLICK="bar-click",e.BAR_MOUSEOUT="bar-mouseout",e))(Do||{}),Ro=(e=>(e.BOX_MOUSEOVER="box-mouseover",e.BOX_MOUSEMOVE="box-mousemove",e.BOX_CLICK="box-click",e.BOX_MOUSEOUT="box-mouseout",e.OUTLIER_MOUSEOVER="outlier-mouseover",e.OUTLIER_MOUSEMOVE="outlier-mousemove",e.OUTLIER_CLICK="outlier-click",e.OUTLIER_MOUSEOUT="outlier-mouseout",e))(Ro||{}),Io=(e=>(e.SCATTER_MOUSEOVER="scatter-mouseover",e.SCATTER_MOUSEMOVE="scatter-mousemove",e.SCATTER_CLICK="scatter-click",e.SCATTER_MOUSEOUT="scatter-mouseout",e))(Io||{}),No=(e=>(e.POINT_MOUSEOVER="scatter-mouseover",e.POINT_MOUSEMOVE="scatter-mousemove",e.POINT_CLICK="scatter-click",e.POINT_MOUSEOUT="scatter-mouseout",e))(No||{}),Po=(e=>(e.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",e.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",e.X_AXIS_CLICK="radar-x-axis-click",e.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",e))(Po||{}),Uo=(e=>(e.NODE_MOUSEOVER="tree-node-mouseover",e.NODE_CLICK="tree-node-click",e.NODE_MOUSEOUT="tree-node-mouseout",e))(Uo||{}),Bo=(e=>(e.LEAF_MOUSEOVER="leaf-mouseover",e.LEAF_MOUSEMOVE="leaf-mousemove",e.LEAF_CLICK="leaf-click",e.LEAF_MOUSEOUT="leaf-mouseout",e))(Bo||{}),Er=(e=>(e.SHOW="show-tooltip",e.MOVE="move-tooltip",e.HIDE="hide-tooltip",e))(Er||{}),Ho=(e=>(e.SHOW="show-threshold",e.HIDE="hide-threshold",e))(Ho||{}),Hu=(e=>(e.ITEM_HOVER="legend-item-onhover",e.ITEM_CLICK="legend-item-onclick",e.ITEM_MOUSEOUT="legend-item-onmouseout",e.ITEMS_UPDATE="legend-items-update",e))(Hu||{}),Vu=(e=>(e.CIRCLE_MOUSEOVER="circle-leaf-mouseover",e.CIRCLE_CLICK="circle-leaf-click",e.CIRCLE_MOUSEOUT="circle-leaf-mouseout",e.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",e))(Vu||{}),Gu=(e=>(e.NODE_MOUSEOVER="alluvial-node-mouseover",e.NODE_CLICK="alluvial-node-click",e.NODE_MOUSEOUT="alluvial-node-mouseout",e.NODE_MOUSEMOVE="alluvial-node-mousemove",e.LINE_MOUSEOVER="alluvial-line-mouseover",e.LINE_CLICK="alluvial-line-click",e.LINE_MOUSEOUT="alluvial-line-mouseout",e.LINE_MOUSEMOVE="alluvial-line-mousemove",e))(Gu||{}),zu=(e=>(e.METER_MOUSEOVER="meter-mouseover",e.METER_CLICK="meter-click",e.METER_MOUSEOUT="meter-mouseout",e.METER_MOUSEMOVE="meter-mousemove",e))(zu||{}),Fu=(e=>(e.HEATMAP_MOUSEOVER="heatmap-mouseover",e.HEATMAP_CLICK="heatmap-click",e.HEATMAP_MOUSEOUT="heatmap-mouseout",e.HEATMAP_MOUSEMOVE="hetmap-mousemove",e))(Fu||{}),Or=(e=>(e.CHOROPLETH_MOUSEOVER="choropleth-mouseover",e.CHOROPLETH_CLICK="choropleth-click",e.CHOROPLETH_MOUSEOUT="choropleth-mouseout",e.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",e))(Or||{});const s1=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:Gu,Area:Co,Axis:Mo,Bar:Do,Boxplot:Ro,CanvasZoom:$o,Chart:Eo,Choropleth:Or,CirclePack:Vu,Gauge:ko,Heatmap:Fu,Legend:Hu,Line:No,Meter:zu,Modal:Oo,Model:So,Pie:Lo,Radar:Po,Scatter:Io,Threshold:Ho,Toolbar:Bu,Tooltip:Er,Tree:Uo,Treemap:Bo,WordCloud:Ao,ZoomBar:To,ZoomDomain:wo},Symbol.toStringTag,{value:"Module"})),T=s1;var it=(e=>(e.HTML="html",e.SVG="svg",e))(it||{}),Vo=(e=>(e.WHITE="white",e.G100="g100",e.G90="g90",e.G10="g10",e))(Vo||{}),st=(e=>(e.BACKGROUND="background",e.FILL="fill",e.STROKE="stroke",e.TOOLTIP="tooltip",e))(st||{}),G=(e=>(e.LEFT="left",e.RIGHT="right",e.TOP="top",e.BOTTOM="bottom",e))(G||{}),Pe=(e=>(e.GRAPH_VIEW="graph_view",e.SLIDER_VIEW="slider_view",e))(Pe||{}),we=(e=>(e.END_LINE="end_line",e.MID_LINE="mid_line",e.FRONT_LINE="front_line",e.NONE="none",e))(we||{}),zt=(e=>(e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e))(zt||{}),nt=(e=>(e.TIME="time",e.LINEAR="linear",e.LOG="log",e.LABELS="labels",e.LABELS_RATIO="labels-ratio",e))(nt||{}),Sr=(e=>(e.RIGHT="right",e.LEFT="left",e.TOP="top",e.BOTTOM="bottom",e))(Sr||{}),Ft=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))(Ft||{}),Tr=(e=>(e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e))(Tr||{}),Ms=(e=>(e.TREE="tree",e.DENDROGRAM="dendrogram",e))(Ms||{}),Mt=(e=>(e.ROW="row",e.COLUMN="column",e.ROW_REVERSE="row-reverse",e.COLUMN_REVERSE="column-reverse",e))(Mt||{}),lt=(e=>(e.FIXED="fixed",e.PREFERRED="preferred",e.STRETCH="stretch",e))(lt||{}),jn=(e=>(e.CENTER="center",e))(jn||{}),fi=(e=>(e.LEFT="left",e.RIGHT="right",e))(fi||{}),jt=(e=>(e.GRID="grid",e.VERT_OR_HORIZ="vertOrHoriz",e.PIE="pie",e.DONUT="donut",e))(jt||{}),Ke=(e=>(e.START="start",e.MIDDLE="middle",e.END="end",e))(Ke||{}),Qe=(e=>(e.BASELINE="baseline",e.MIDDLE="middle",e.HANGING="hanging",e))(Qe||{}),Wn=(e=>(e.SEMI="semi",e.FULL="full",e))(Wn||{}),Cs=(e=>(e.UP="up",e.DOWN="down",e))(Cs||{}),mi=(e=>(e.SUCCESS="success",e.WARNING="warning",e.DANGER="danger",e))(mi||{}),gi=(e=>(e.ALWAYS="always",e.AUTO="auto",e.NEVER="never",e))(gi||{}),ve=(e=>(e.SCATTER="scatter",e.LINE="line",e.SIMPLE_BAR="simple-bar",e.STACKED_BAR="stacked-bar",e.GROUPED_BAR="grouped-bar",e.AREA="area",e.STACKED_AREA="stacked-area",e))(ve||{}),xt=(e=>(e.EXPORT_CSV="Export as CSV",e.EXPORT_PNG="Export as PNG",e.EXPORT_JPG="Export as JPG",e.ZOOM_IN="Zoom in",e.ZOOM_OUT="Zoom out",e.RESET_ZOOM="Reset zoom",e.MAKE_FULLSCREEN="Make fullscreen",e.EXIT_FULLSCREEN="Exit fullscreen",e.SHOW_AS_DATATABLE="Show as data-table",e.CUSTOM="Custom",e))(xt||{}),As=(e=>(e.LEFT="left",e.RIGHT="right",e))(As||{}),Wt=(e=>(e.CHECKBOX="checkbox",e.RADIUS="radius",e.AREA="area",e.SIZE="size",e.LINE="line",e.QUARTILE="quartile",e.ZOOM="zoom",e))(Wt||{}),vi=(e=>(e.LINEAR="linear",e.QUANTIZE="quantize",e))(vi||{}),wr=(e=>(e.ON="on",e.AUTO="auto",e.OFF="off",e))(wr||{}),yi=(e=>(e.DEFAULT="default",e.HOVERABLE="hoverable",e))(yi||{}),Je=(e=>(e.geoEqualEarth="geoEqualEarth",e.geoAlbers="geoAlbers",e.geoConicEqualArea="geoConicEqualArea",e.geoConicEquidistant="geoConicEquidistant",e.geoEquirectangular="geoEquirectangular",e.geoMercator="geoMercator",e.geoNaturalEarth1="geoNaturalEarth1",e))(Je||{}),ju=(e=>(e["15seconds"]="15seconds",e.minute="minute",e["30minutes"]="30minutes",e.hourly="hourly",e.daily="daily",e.weekly="weekly",e.monthly="monthly",e.quarterly="quarterly",e.yearly="yearly",e))(ju||{});function Go(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}function bi(e){return(t,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,o=n?.width?String(n.width):a;i=e.formattingValues[o]||e.formattingValues[a]}else{const a=e.defaultWidth,o=n?.width?String(n.width):e.defaultWidth;i=e.values[o]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}function xi(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?o1(o,d=>d.test(a)):a1(o,d=>d.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=t.slice(a.length);return{value:c,rest:u}}}function a1(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function o1(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function l1(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const Wu=6048e5,c1=864e5,qu=6e4,Yu=36e5,Xu=Symbol.for("constructDateFrom");function $e(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Xu in e?e[Xu](t):e instanceof Date?new e.constructor(t):new Date(t)}function qn(e,...t){const n=$e.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}let u1={};function Ls(){return u1}function Pt(e,t){return $e(t||e,e)}function _i(e,t){const n=Ls(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Pt(e,t?.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}const h1={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},d1=(e,t,n)=>{let r;const i=h1[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},p1={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},f1=(e,t,n,r)=>p1[e],m1={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},g1={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},v1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},y1={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},b1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},x1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_1=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},E1={ordinalNumber:_1,era:bi({values:m1,defaultWidth:"wide"}),quarter:bi({values:g1,defaultWidth:"wide",argumentCallback:e=>e-1}),month:bi({values:v1,defaultWidth:"wide"}),day:bi({values:y1,defaultWidth:"wide"}),dayPeriod:bi({values:b1,defaultWidth:"wide",formattingValues:x1,defaultFormattingWidth:"wide"})},O1=/^(\d+)(th|st|nd|rd)?/i,S1=/\d+/i,T1={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},w1={any:[/^b/i,/^(a|c)/i]},$1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},M1={any:[/1/i,/2/i,/3/i,/4/i]},C1={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},A1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},L1={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},k1={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},D1={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},R1={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},I1={ordinalNumber:l1({matchPattern:O1,parsePattern:S1,valueCallback:e=>parseInt(e,10)}),era:xi({matchPatterns:T1,defaultMatchWidth:"wide",parsePatterns:w1,defaultParseWidth:"any"}),quarter:xi({matchPatterns:$1,defaultMatchWidth:"wide",parsePatterns:M1,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xi({matchPatterns:C1,defaultMatchWidth:"wide",parsePatterns:A1,defaultParseWidth:"any"}),day:xi({matchPatterns:L1,defaultMatchWidth:"wide",parsePatterns:k1,defaultParseWidth:"any"}),dayPeriod:xi({matchPatterns:D1,defaultMatchWidth:"any",parsePatterns:R1,defaultParseWidth:"any"})},N1={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},P1={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},U1={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},B1={date:Go({formats:N1,defaultWidth:"full"}),time:Go({formats:P1,defaultWidth:"full"}),dateTime:Go({formats:U1,defaultWidth:"full"})},Zu={code:"en-US",formatDistance:d1,formatLong:B1,formatRelative:f1,localize:E1,match:I1,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Ku=typeof global=="object"&&global&&global.Object===Object&&global,H1=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Ku||H1||Function("return this")(),Me=Ue.Symbol,Qu=Object.prototype,V1=Qu.hasOwnProperty,G1=Qu.toString,Ei=Me?Me.toStringTag:void 0;function z1(e){var t=V1.call(e,Ei),n=e[Ei];try{e[Ei]=void 0;var r=!0}catch{}var i=G1.call(e);return r&&(t?e[Ei]=n:delete e[Ei]),i}var F1=Object.prototype,j1=F1.toString;function W1(e){return j1.call(e)}var q1="[object Null]",Y1="[object Undefined]",Ju=Me?Me.toStringTag:void 0;function Yn(e){return e==null?e===void 0?Y1:q1:Ju&&Ju in Object(e)?z1(e):W1(e)}function tn(e){return e!=null&&typeof e=="object"}var X1="[object Symbol]";function ks(e){return typeof e=="symbol"||tn(e)&&Yn(e)==X1}function zo(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Zt=Array.isArray,th=Me?Me.prototype:void 0,eh=th?th.toString:void 0;function nh(e){if(typeof e=="string")return e;if(Zt(e))return zo(e,nh)+"";if(ks(e))return eh?eh.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Ce(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Fo(e){return e}var Z1="[object AsyncFunction]",K1="[object Function]",Q1="[object GeneratorFunction]",J1="[object Proxy]";function jo(e){if(!Ce(e))return!1;var t=Yn(e);return t==K1||t==Q1||t==Z1||t==J1}var Wo=Ue["__core-js_shared__"],rh=function(){var e=/[^.]+$/.exec(Wo&&Wo.keys&&Wo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function t0(e){return!!rh&&rh in e}var e0=Function.prototype,n0=e0.toString;function Xn(e){if(e!=null){try{return n0.call(e)}catch{}try{return e+""}catch{}}return""}var r0=/[\\^$.*+?()[\]{}|]/g,i0=/^\[object .+?Constructor\]$/,s0=Function.prototype,a0=Object.prototype,o0=s0.toString,l0=a0.hasOwnProperty,c0=RegExp("^"+o0.call(l0).replace(r0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u0(e){if(!Ce(e)||t0(e))return!1;var t=jo(e)?c0:i0;return t.test(Xn(e))}function h0(e,t){return e?.[t]}function Zn(e,t){var n=h0(e,t);return u0(n)?n:void 0}var qo=Zn(Ue,"WeakMap"),ih=Object.create,d0=function(){function e(){}return function(t){if(!Ce(t))return{};if(ih)return ih(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function p0(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function f0(){}function sh(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var m0=800,g0=16,v0=Date.now;function y0(e){var t=0,n=0;return function(){var r=v0(),i=g0-(r-n);if(n=r,i>0){if(++t>=m0)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function b0(e){return function(){return e}}var Ds=function(){try{var e=Zn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),x0=Ds?function(e,t){return Ds(e,"toString",{configurable:!0,enumerable:!1,value:b0(t),writable:!0})}:Fo,ah=y0(x0);function _0(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function E0(e,t,n,r){for(var i=e.length,s=n+-1;++s<i;)if(t(e[s],s,e))return s;return-1}function O0(e){return e!==e}function S0(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function T0(e,t,n){return t===t?S0(e,t,n):E0(e,O0,n)}function w0(e,t){var n=e==null?0:e.length;return!!n&&T0(e,t,0)>-1}var $0=9007199254740991,M0=/^(?:0|[1-9]\d*)$/;function Yo(e,t){var n=typeof e;return t=t??$0,!!t&&(n=="number"||n!="symbol"&&M0.test(e))&&e>-1&&e%1==0&&e<t}function Rs(e,t,n){t=="__proto__"&&Ds?Ds(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Oi(e,t){return e===t||e!==e&&t!==t}var C0=Object.prototype,A0=C0.hasOwnProperty;function oh(e,t,n){var r=e[t];(!(A0.call(e,t)&&Oi(r,n))||n===void 0&&!(t in e))&&Rs(e,t,n)}function $r(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=void 0;l===void 0&&(l=e[o]),i?Rs(n,o,l):oh(n,o,l)}return n}var lh=Math.max;function ch(e,t,n){return t=lh(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=lh(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),p0(e,this,o)}}function Xo(e,t){return ah(ch(e,t,Fo),e+"")}var L0=9007199254740991;function Zo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=L0}function Kn(e){return e!=null&&Zo(e.length)&&!jo(e)}function k0(e,t,n){if(!Ce(n))return!1;var r=typeof t;return(r=="number"?Kn(n)&&Yo(t,n.length):r=="string"&&t in n)?Oi(n[t],e):!1}function D0(e){return Xo(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&k0(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var o=n[r];o&&e(t,o,r,s)}return t})}var R0=Object.prototype;function Is(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||R0;return e===n}function I0(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var N0="[object Arguments]";function uh(e){return tn(e)&&Yn(e)==N0}var hh=Object.prototype,P0=hh.hasOwnProperty,U0=hh.propertyIsEnumerable,Mr=uh(function(){return arguments}())?uh:function(e){return tn(e)&&P0.call(e,"callee")&&!U0.call(e,"callee")};function B0(){return!1}var dh=typeof z=="object"&&z&&!z.nodeType&&z,ph=dh&&typeof module=="object"&&module&&!module.nodeType&&module,H0=ph&&ph.exports===dh,fh=H0?Ue.Buffer:void 0,V0=fh?fh.isBuffer:void 0,Cr=V0||B0,G0="[object Arguments]",z0="[object Array]",F0="[object Boolean]",j0="[object Date]",W0="[object Error]",q0="[object Function]",Y0="[object Map]",X0="[object Number]",Z0="[object Object]",K0="[object RegExp]",Q0="[object Set]",J0="[object String]",ty="[object WeakMap]",ey="[object ArrayBuffer]",ny="[object DataView]",ry="[object Float32Array]",iy="[object Float64Array]",sy="[object Int8Array]",ay="[object Int16Array]",oy="[object Int32Array]",ly="[object Uint8Array]",cy="[object Uint8ClampedArray]",uy="[object Uint16Array]",hy="[object Uint32Array]",kt={};kt[ry]=kt[iy]=kt[sy]=kt[ay]=kt[oy]=kt[ly]=kt[cy]=kt[uy]=kt[hy]=!0,kt[G0]=kt[z0]=kt[ey]=kt[F0]=kt[ny]=kt[j0]=kt[W0]=kt[q0]=kt[Y0]=kt[X0]=kt[Z0]=kt[K0]=kt[Q0]=kt[J0]=kt[ty]=!1;function dy(e){return tn(e)&&Zo(e.length)&&!!kt[Yn(e)]}function Ko(e){return function(t){return e(t)}}var mh=typeof z=="object"&&z&&!z.nodeType&&z,Si=mh&&typeof module=="object"&&module&&!module.nodeType&&module,py=Si&&Si.exports===mh,Qo=py&&Ku.process,Ar=function(){try{var e=Si&&Si.require&&Si.require("util").types;return e||Qo&&Qo.binding&&Qo.binding("util")}catch{}}(),gh=Ar&&Ar.isTypedArray,Ns=gh?Ko(gh):dy,fy=Object.prototype,my=fy.hasOwnProperty;function vh(e,t){var n=Zt(e),r=!n&&Mr(e),i=!n&&!r&&Cr(e),s=!n&&!r&&!i&&Ns(e),a=n||r||i||s,o=a?I0(e.length,String):[],l=o.length;for(var c in e)(t||my.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Yo(c,l)))&&o.push(c);return o}function yh(e,t){return function(n){return e(t(n))}}var gy=yh(Object.keys,Object),vy=Object.prototype,yy=vy.hasOwnProperty;function bh(e){if(!Is(e))return gy(e);var t=[];for(var n in Object(e))yy.call(e,n)&&n!="constructor"&&t.push(n);return t}function Ti(e){return Kn(e)?vh(e):bh(e)}function by(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var xy=Object.prototype,_y=xy.hasOwnProperty;function Ey(e){if(!Ce(e))return by(e);var t=Is(e),n=[];for(var r in e)r=="constructor"&&(t||!_y.call(e,r))||n.push(r);return n}function wi(e){return Kn(e)?vh(e,!0):Ey(e)}var Oy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sy=/^\w*$/;function Jo(e,t){if(Zt(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ks(e)?!0:Sy.test(e)||!Oy.test(e)||t!=null&&e in Object(t)}var $i=Zn(Object,"create");function Ty(){this.__data__=$i?$i(null):{},this.size=0}function wy(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var $y="__lodash_hash_undefined__",My=Object.prototype,Cy=My.hasOwnProperty;function Ay(e){var t=this.__data__;if($i){var n=t[e];return n===$y?void 0:n}return Cy.call(t,e)?t[e]:void 0}var Ly=Object.prototype,ky=Ly.hasOwnProperty;function Dy(e){var t=this.__data__;return $i?t[e]!==void 0:ky.call(t,e)}var Ry="__lodash_hash_undefined__";function Iy(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$i&&t===void 0?Ry:t,this}function Qn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Qn.prototype.clear=Ty,Qn.prototype.delete=wy,Qn.prototype.get=Ay,Qn.prototype.has=Dy,Qn.prototype.set=Iy;function Ny(){this.__data__=[],this.size=0}function Ps(e,t){for(var n=e.length;n--;)if(Oi(e[n][0],t))return n;return-1}var Py=Array.prototype,Uy=Py.splice;function By(e){var t=this.__data__,n=Ps(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Uy.call(t,n,1),--this.size,!0}function Hy(e){var t=this.__data__,n=Ps(t,e);return n<0?void 0:t[n][1]}function Vy(e){return Ps(this.__data__,e)>-1}function Gy(e,t){var n=this.__data__,r=Ps(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function hn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}hn.prototype.clear=Ny,hn.prototype.delete=By,hn.prototype.get=Hy,hn.prototype.has=Vy,hn.prototype.set=Gy;var Mi=Zn(Ue,"Map");function zy(){this.size=0,this.__data__={hash:new Qn,map:new(Mi||hn),string:new Qn}}function Fy(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Us(e,t){var n=e.__data__;return Fy(t)?n[typeof t=="string"?"string":"hash"]:n.map}function jy(e){var t=Us(this,e).delete(e);return this.size-=t?1:0,t}function Wy(e){return Us(this,e).get(e)}function qy(e){return Us(this,e).has(e)}function Yy(e,t){var n=Us(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function dn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}dn.prototype.clear=zy,dn.prototype.delete=jy,dn.prototype.get=Wy,dn.prototype.has=qy,dn.prototype.set=Yy;var Xy="Expected a function";function tl(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Xy);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(tl.Cache||dn),n}tl.Cache=dn;var Zy=500;function Ky(e){var t=tl(e,function(r){return n.size===Zy&&n.clear(),r}),n=t.cache;return t}var Qy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jy=/\\(\\)?/g,tb=Ky(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Qy,function(n,r,i,s){t.push(i?s.replace(Jy,"$1"):r||n)}),t});function Ci(e){return e==null?"":nh(e)}function Bs(e,t){return Zt(e)?e:Jo(e,t)?[e]:tb(Ci(e))}function Ai(e){if(typeof e=="string"||ks(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function el(e,t){t=Bs(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Ai(t[n++])];return n&&n==r?e:void 0}function vt(e,t,n){var r=e==null?void 0:el(e,t);return r===void 0?n:r}function nl(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var xh=Me?Me.isConcatSpreadable:void 0;function eb(e){return Zt(e)||Mr(e)||!!(xh&&e&&e[xh])}function Hs(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=eb),i||(i=[]);++s<a;){var o=e[s];t>0&&n(o)?t>1?Hs(o,t-1,n,r,i):nl(i,o):r||(i[i.length]=o)}return i}var rl=yh(Object.getPrototypeOf,Object),nb="[object Object]",rb=Function.prototype,ib=Object.prototype,_h=rb.toString,sb=ib.hasOwnProperty,ab=_h.call(Object);function Eh(e){if(!tn(e)||Yn(e)!=nb)return!1;var t=rl(e);if(t===null)return!0;var n=sb.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&_h.call(n)==ab}function ob(){this.__data__=new hn,this.size=0}function lb(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function cb(e){return this.__data__.get(e)}function ub(e){return this.__data__.has(e)}var hb=200;function db(e,t){var n=this.__data__;if(n instanceof hn){var r=n.__data__;if(!Mi||r.length<hb-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new dn(r)}return n.set(e,t),this.size=n.size,this}function Be(e){var t=this.__data__=new hn(e);this.size=t.size}Be.prototype.clear=ob,Be.prototype.delete=lb,Be.prototype.get=cb,Be.prototype.has=ub,Be.prototype.set=db;function pb(e,t){return e&&$r(t,Ti(t),e)}function fb(e,t){return e&&$r(t,wi(t),e)}var Oh=typeof z=="object"&&z&&!z.nodeType&&z,Sh=Oh&&typeof module=="object"&&module&&!module.nodeType&&module,mb=Sh&&Sh.exports===Oh,Th=mb?Ue.Buffer:void 0,wh=Th?Th.allocUnsafe:void 0;function $h(e,t){if(t)return e.slice();var n=e.length,r=wh?wh(n):new e.constructor(n);return e.copy(r),r}function gb(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Mh(){return[]}var vb=Object.prototype,yb=vb.propertyIsEnumerable,Ch=Object.getOwnPropertySymbols,il=Ch?function(e){return e==null?[]:(e=Object(e),gb(Ch(e),function(t){return yb.call(e,t)}))}:Mh;function bb(e,t){return $r(e,il(e),t)}var xb=Object.getOwnPropertySymbols,Ah=xb?function(e){for(var t=[];e;)nl(t,il(e)),e=rl(e);return t}:Mh;function _b(e,t){return $r(e,Ah(e),t)}function Lh(e,t,n){var r=t(e);return Zt(e)?r:nl(r,n(e))}function sl(e){return Lh(e,Ti,il)}function kh(e){return Lh(e,wi,Ah)}var al=Zn(Ue,"DataView"),ol=Zn(Ue,"Promise"),Lr=Zn(Ue,"Set"),Dh="[object Map]",Eb="[object Object]",Rh="[object Promise]",Ih="[object Set]",Nh="[object WeakMap]",Ph="[object DataView]",Ob=Xn(al),Sb=Xn(Mi),Tb=Xn(ol),wb=Xn(Lr),$b=Xn(qo),Ae=Yn;(al&&Ae(new al(new ArrayBuffer(1)))!=Ph||Mi&&Ae(new Mi)!=Dh||ol&&Ae(ol.resolve())!=Rh||Lr&&Ae(new Lr)!=Ih||qo&&Ae(new qo)!=Nh)&&(Ae=function(e){var t=Yn(e),n=t==Eb?e.constructor:void 0,r=n?Xn(n):"";if(r)switch(r){case Ob:return Ph;case Sb:return Dh;case Tb:return Rh;case wb:return Ih;case $b:return Nh}return t});var Mb=Object.prototype,Cb=Mb.hasOwnProperty;function Ab(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Cb.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Vs=Ue.Uint8Array;function ll(e){var t=new e.constructor(e.byteLength);return new Vs(t).set(new Vs(e)),t}function Lb(e,t){var n=t?ll(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var kb=/\w*$/;function Db(e){var t=new e.constructor(e.source,kb.exec(e));return t.lastIndex=e.lastIndex,t}var Uh=Me?Me.prototype:void 0,Bh=Uh?Uh.valueOf:void 0;function Rb(e){return Bh?Object(Bh.call(e)):{}}function Hh(e,t){var n=t?ll(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Ib="[object Boolean]",Nb="[object Date]",Pb="[object Map]",Ub="[object Number]",Bb="[object RegExp]",Hb="[object Set]",Vb="[object String]",Gb="[object Symbol]",zb="[object ArrayBuffer]",Fb="[object DataView]",jb="[object Float32Array]",Wb="[object Float64Array]",qb="[object Int8Array]",Yb="[object Int16Array]",Xb="[object Int32Array]",Zb="[object Uint8Array]",Kb="[object Uint8ClampedArray]",Qb="[object Uint16Array]",Jb="[object Uint32Array]";function tx(e,t,n){var r=e.constructor;switch(t){case zb:return ll(e);case Ib:case Nb:return new r(+e);case Fb:return Lb(e,n);case jb:case Wb:case qb:case Yb:case Xb:case Zb:case Kb:case Qb:case Jb:return Hh(e,n);case Pb:return new r;case Ub:case Vb:return new r(e);case Bb:return Db(e);case Hb:return new r;case Gb:return Rb(e)}}function Vh(e){return typeof e.constructor=="function"&&!Is(e)?d0(rl(e)):{}}var ex="[object Map]";function nx(e){return tn(e)&&Ae(e)==ex}var Gh=Ar&&Ar.isMap,rx=Gh?Ko(Gh):nx,ix="[object Set]";function sx(e){return tn(e)&&Ae(e)==ix}var zh=Ar&&Ar.isSet,ax=zh?Ko(zh):sx,ox=1,lx=2,cx=4,Fh="[object Arguments]",ux="[object Array]",hx="[object Boolean]",dx="[object Date]",px="[object Error]",jh="[object Function]",fx="[object GeneratorFunction]",mx="[object Map]",gx="[object Number]",Wh="[object Object]",vx="[object RegExp]",yx="[object Set]",bx="[object String]",xx="[object Symbol]",_x="[object WeakMap]",Ex="[object ArrayBuffer]",Ox="[object DataView]",Sx="[object Float32Array]",Tx="[object Float64Array]",wx="[object Int8Array]",$x="[object Int16Array]",Mx="[object Int32Array]",Cx="[object Uint8Array]",Ax="[object Uint8ClampedArray]",Lx="[object Uint16Array]",kx="[object Uint32Array]",At={};At[Fh]=At[ux]=At[Ex]=At[Ox]=At[hx]=At[dx]=At[Sx]=At[Tx]=At[wx]=At[$x]=At[Mx]=At[mx]=At[gx]=At[Wh]=At[vx]=At[yx]=At[bx]=At[xx]=At[Cx]=At[Ax]=At[Lx]=At[kx]=!0,At[px]=At[jh]=At[_x]=!1;function Li(e,t,n,r,i,s){var a,o=t&ox,l=t&lx,c=t&cx;if(n&&(a=i?n(e,r,i,s):n(e)),a!==void 0)return a;if(!Ce(e))return e;var u=Zt(e);if(u){if(a=Ab(e),!o)return sh(e,a)}else{var d=Ae(e),h=d==jh||d==fx;if(Cr(e))return $h(e,o);if(d==Wh||d==Fh||h&&!i){if(a=l||h?{}:Vh(e),!o)return l?_b(e,fb(a,e)):bb(e,pb(a,e))}else{if(!At[d])return i?e:{};a=tx(e,d,o)}}s||(s=new Be);var p=s.get(e);if(p)return p;s.set(e,a),ax(e)?e.forEach(function(m){a.add(Li(m,t,n,m,e,s))}):rx(e)&&e.forEach(function(m,v){a.set(v,Li(m,t,n,v,e,s))});var f=c?l?kh:sl:l?wi:Ti,g=u?void 0:f(e);return _0(g||e,function(m,v){g&&(v=m,m=e[v]),oh(a,v,Li(m,t,n,v,e,s))}),a}var Dx=1,Rx=4;function pn(e){return Li(e,Dx|Rx)}var Ix="__lodash_hash_undefined__";function Nx(e){return this.__data__.set(e,Ix),this}function Px(e){return this.__data__.has(e)}function ki(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new dn;++t<n;)this.add(e[t])}ki.prototype.add=ki.prototype.push=Nx,ki.prototype.has=Px;function qh(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Yh(e,t){return e.has(t)}var Ux=1,Bx=2;function Xh(e,t,n,r,i,s){var a=n&Ux,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(e),u=s.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=n&Bx?new ki:void 0;for(s.set(e,t),s.set(t,e);++d<o;){var f=e[d],g=t[d];if(r)var m=a?r(g,f,d,t,e,s):r(f,g,d,e,t,s);if(m!==void 0){if(m)continue;h=!1;break}if(p){if(!qh(t,function(v,x){if(!Yh(p,x)&&(f===v||i(f,v,n,r,s)))return p.push(x)})){h=!1;break}}else if(!(f===g||i(f,g,n,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}function Hx(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function cl(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Vx=1,Gx=2,zx="[object Boolean]",Fx="[object Date]",jx="[object Error]",Wx="[object Map]",qx="[object Number]",Yx="[object RegExp]",Xx="[object Set]",Zx="[object String]",Kx="[object Symbol]",Qx="[object ArrayBuffer]",Jx="[object DataView]",Zh=Me?Me.prototype:void 0,ul=Zh?Zh.valueOf:void 0;function t_(e,t,n,r,i,s,a){switch(n){case Jx:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Qx:return!(e.byteLength!=t.byteLength||!s(new Vs(e),new Vs(t)));case zx:case Fx:case qx:return Oi(+e,+t);case jx:return e.name==t.name&&e.message==t.message;case Yx:case Zx:return e==t+"";case Wx:var o=Hx;case Xx:var l=r&Vx;if(o||(o=cl),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=Gx,a.set(e,t);var u=Xh(o(e),o(t),r,i,s,a);return a.delete(e),u;case Kx:if(ul)return ul.call(e)==ul.call(t)}return!1}var e_=1,n_=Object.prototype,r_=n_.hasOwnProperty;function i_(e,t,n,r,i,s){var a=n&e_,o=sl(e),l=o.length,c=sl(t),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var h=o[d];if(!(a?h in t:r_.call(t,h)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var g=!0;s.set(e,t),s.set(t,e);for(var m=a;++d<l;){h=o[d];var v=e[h],x=t[h];if(r)var _=a?r(x,v,h,t,e,s):r(v,x,h,e,t,s);if(!(_===void 0?v===x||i(v,x,n,r,s):_)){g=!1;break}m||(m=h=="constructor")}if(g&&!m){var E=e.constructor,b=t.constructor;E!=b&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof b=="function"&&b instanceof b)&&(g=!1)}return s.delete(e),s.delete(t),g}var s_=1,Kh="[object Arguments]",Qh="[object Array]",Gs="[object Object]",a_=Object.prototype,Jh=a_.hasOwnProperty;function o_(e,t,n,r,i,s){var a=Zt(e),o=Zt(t),l=a?Qh:Ae(e),c=o?Qh:Ae(t);l=l==Kh?Gs:l,c=c==Kh?Gs:c;var u=l==Gs,d=c==Gs,h=l==c;if(h&&Cr(e)){if(!Cr(t))return!1;a=!0,u=!1}if(h&&!u)return s||(s=new Be),a||Ns(e)?Xh(e,t,n,r,i,s):t_(e,t,l,n,r,i,s);if(!(n&s_)){var p=u&&Jh.call(e,"__wrapped__"),f=d&&Jh.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,m=f?t.value():t;return s||(s=new Be),i(g,m,n,r,s)}}return h?(s||(s=new Be),i_(e,t,n,r,i,s)):!1}function zs(e,t,n,r,i){return e===t?!0:e==null||t==null||!tn(e)&&!tn(t)?e!==e&&t!==t:o_(e,t,n,r,zs,i)}var l_=1,c_=2;function u_(e,t,n,r){var i=n.length,s=i;if(e==null)return!s;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){a=n[i];var o=a[0],l=e[o],c=a[1];if(a[2]){if(l===void 0&&!(o in e))return!1}else{var u=new Be,d;if(!(d===void 0?zs(c,l,l_|c_,r,u):d))return!1}}return!0}function td(e){return e===e&&!Ce(e)}function h_(e){for(var t=Ti(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,td(i)]}return t}function ed(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function d_(e){var t=h_(e);return t.length==1&&t[0][2]?ed(t[0][0],t[0][1]):function(n){return n===e||u_(n,e,t)}}function p_(e,t){return e!=null&&t in Object(e)}function f_(e,t,n){t=Bs(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=Ai(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&Zo(i)&&Yo(a,i)&&(Zt(e)||Mr(e)))}function m_(e,t){return e!=null&&f_(e,t,p_)}var g_=1,v_=2;function y_(e,t){return Jo(e)&&td(t)?ed(Ai(e),t):function(n){var r=vt(n,e);return r===void 0&&r===t?m_(n,e):zs(t,r,g_|v_)}}function b_(e){return function(t){return t?.[e]}}function x_(e){return function(t){return el(t,e)}}function __(e){return Jo(e)?b_(Ai(e)):x_(e)}function Fs(e){return typeof e=="function"?e:e==null?Fo:typeof e=="object"?Zt(e)?y_(e[0],e[1]):d_(e):__(e)}function E_(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var l=a[++i];if(n(s[l],l,s)===!1)break}return t}}var nd=E_();function hl(e,t,n){(n!==void 0&&!Oi(e[t],n)||n===void 0&&!(t in e))&&Rs(e,t,n)}function dl(e){return tn(e)&&Kn(e)}function pl(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function O_(e){return $r(e,wi(e))}function S_(e,t,n,r,i,s,a){var o=pl(e,n),l=pl(t,n),c=a.get(l);if(c){hl(e,n,c);return}var u=s?s(o,l,n+"",e,t,a):void 0,d=u===void 0;if(d){var h=Zt(l),p=!h&&Cr(l),f=!h&&!p&&Ns(l);u=l,h||p||f?Zt(o)?u=o:dl(o)?u=sh(o):p?(d=!1,u=$h(l,!0)):f?(d=!1,u=Hh(l,!0)):u=[]:Eh(l)||Mr(l)?(u=o,Mr(o)?u=O_(o):(!Ce(o)||jo(o))&&(u=Vh(l))):d=!1}d&&(a.set(l,u),i(u,l,r,s,a),a.delete(l)),hl(e,n,u)}function rd(e,t,n,r,i){e!==t&&nd(t,function(s,a){if(i||(i=new Be),Ce(s))S_(e,t,a,n,rd,r,i);else{var o=r?r(pl(e,a),s,a+"",e,t,i):void 0;o===void 0&&(o=s),hl(e,a,o)}},wi)}function id(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var T_="[object Map]",w_="[object Set]",$_=Object.prototype,M_=$_.hasOwnProperty;function He(e){if(e==null)return!0;if(Kn(e)&&(Zt(e)||typeof e=="string"||typeof e.splice=="function"||Cr(e)||Ns(e)||Mr(e)))return!e.length;var t=Ae(e);if(t==T_||t==w_)return!e.size;if(Is(e))return!bh(e).length;for(var n in e)if(M_.call(e,n))return!1;return!0}var at=D0(function(e,t,n){rd(e,t,n)}),C_=1/0,A_=Lr&&1/cl(new Lr([,-0]))[1]==C_?function(e){return new Lr(e)}:f0,L_=200;function sd(e,t,n){var r=-1,i=w0,s=e.length,a=!0,o=[],l=o;if(s>=L_){var c=t?null:A_(e);if(c)return cl(c);a=!1,i=Yh,l=new ki}else l=t?[]:o;t:for(;++r<s;){var u=e[r],d=t?t(u):u;if(u=u!==0?u:0,a&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue t;t&&l.push(d),o.push(u)}else i(l,d,n)||(l!==o&&l.push(d),o.push(u))}return o}var k_=Xo(function(e){var t=id(e);return dl(t)&&(t=void 0),sd(Hs(e,1,dl,!0),Fs(t))});function Di(e){return e&&e.length?sd(e):[]}function Jn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function D_(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fl(e){let t,n,r;e.length!==2?(t=Jn,n=(o,l)=>Jn(e(o),l),r=(o,l)=>e(o)-l):(t=e===Jn||e===D_?e:R_,n=e,r=e);function i(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<0?c=d+1:u=d}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function a(o,l,c=0,u=o.length){const d=i(o,l,c,u-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:a,right:s}}function R_(){return 0}function I_(e){return e===null?NaN:+e}function*N_(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const P_=fl(Jn),ml=P_.right;fl(I_).center;function Ve(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}let ad=class extends Map{constructor(t,n=H_){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(od(this,t))}has(t){return super.has(od(this,t))}set(t,n){return super.set(U_(this,t),n)}delete(t){return super.delete(B_(this,t))}};function od({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function U_({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function B_({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function H_(e){return e!==null&&typeof e=="object"?e.valueOf():e}const V_=Math.sqrt(50),G_=Math.sqrt(10),z_=Math.sqrt(2);function js(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=V_?10:s>=G_?5:s>=z_?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?js(e,t,n*2):[o,l,c]}function Ws(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?js(t,e,n):js(e,t,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function kr(e,t,n){return t=+t,e=+e,n=+n,js(e,t,n)[2]}function gl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?kr(t,e,n):kr(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function tr(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function In(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}var F_={value:()=>{}};function vl(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new qs(n)}function qs(e){this._=e}function j_(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}qs.prototype=vl.prototype={constructor:qs,on:function(e,t){var n=this._,r=j_(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=W_(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=ld(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ld(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new qs(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function W_(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ld(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=F_,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var yl="http://www.w3.org/1999/xhtml";const cd={svg:"http://www.w3.org/2000/svg",xhtml:yl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ys(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cd.hasOwnProperty(t)?{space:cd[t],local:e}:e}function q_(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===yl&&t.documentElement.namespaceURI===yl?t.createElement(e):t.createElementNS(n,e)}}function Y_(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ud(e){var t=Ys(e);return(t.local?Y_:q_)(t)}function X_(){}function bl(e){return e==null?X_:function(){return this.querySelector(e)}}function Z_(e){typeof e!="function"&&(e=bl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new ye(r,this._parents)}function K_(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Q_(){return[]}function hd(e){return e==null?Q_:function(){return this.querySelectorAll(e)}}function J_(e){return function(){return K_(e.apply(this,arguments))}}function tE(e){typeof e=="function"?e=J_(e):e=hd(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),i.push(l));return new ye(r,i)}function dd(e){return function(){return this.matches(e)}}function pd(e){return function(t){return t.matches(e)}}var eE=Array.prototype.find;function nE(e){return function(){return eE.call(this.children,e)}}function rE(){return this.firstElementChild}function iE(e){return this.select(e==null?rE:nE(typeof e=="function"?e:pd(e)))}var sE=Array.prototype.filter;function aE(){return Array.from(this.children)}function oE(e){return function(){return sE.call(this.children,e)}}function lE(e){return this.selectAll(e==null?aE:oE(typeof e=="function"?e:pd(e)))}function cE(e){typeof e!="function"&&(e=dd(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new ye(r,this._parents)}function fd(e){return new Array(e.length)}function uE(){return new ye(this._enter||this._groups.map(fd),this._parents)}function Xs(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Xs.prototype={constructor:Xs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hE(e){return function(){return e}}function dE(e,t,n,r,i,s){for(var a=0,o,l=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new Xs(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function pE(e,t,n,r,i,s,a){var o,l,c=new Map,u=t.length,d=s.length,h=new Array(u),p;for(o=0;o<u;++o)(l=t[o])&&(h[o]=p=a.call(l,l.__data__,o,t)+"",c.has(p)?i[o]=l:c.set(p,l));for(o=0;o<d;++o)p=a.call(e,s[o],o,s)+"",(l=c.get(p))?(r[o]=l,l.__data__=s[o],c.delete(p)):n[o]=new Xs(e,s[o]);for(o=0;o<u;++o)(l=t[o])&&c.get(h[o])===l&&(i[o]=l)}function fE(e){return e.__data__}function mE(e,t){if(!arguments.length)return Array.from(this,fE);var n=t?pE:dE,r=this._parents,i=this._groups;typeof e!="function"&&(e=hE(e));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],d=i[c],h=d.length,p=gE(e.call(u,u&&u.__data__,c,r)),f=p.length,g=o[c]=new Array(f),m=a[c]=new Array(f),v=l[c]=new Array(h);n(u,d,g,m,v,p,t);for(var x=0,_=0,E,b;x<f;++x)if(E=g[x]){for(x>=_&&(_=x+1);!(b=m[_])&&++_<f;);E._next=b||null}}return a=new ye(a,r),a._enter=o,a._exit=l,a}function gE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vE(){return new ye(this._exit||this._groups.map(fd),this._parents)}function yE(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function bE(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],d=c.length,h=o[l]=new Array(d),p,f=0;f<d;++f)(p=c[f]||u[f])&&(h[f]=p);for(;l<i;++l)o[l]=n[l];return new ye(o,this._parents)}function xE(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function _E(e){e||(e=EE);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new ye(i,this._parents).order()}function EE(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function OE(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function SE(){return Array.from(this)}function TE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function wE(){let e=0;for(const t of this)++e;return e}function $E(){return!this.node()}function ME(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function CE(e){return function(){this.removeAttribute(e)}}function AE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function LE(e,t){return function(){this.setAttribute(e,t)}}function kE(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function DE(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function RE(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function IE(e,t){var n=Ys(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?AE:CE:typeof t=="function"?n.local?RE:DE:n.local?kE:LE)(n,t))}function md(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function NE(e){return function(){this.style.removeProperty(e)}}function PE(e,t,n){return function(){this.style.setProperty(e,t,n)}}function UE(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function BE(e,t,n){return arguments.length>1?this.each((t==null?NE:typeof t=="function"?UE:PE)(e,t,n??"")):Dr(this.node(),e)}function Dr(e,t){return e.style.getPropertyValue(t)||md(e).getComputedStyle(e,null).getPropertyValue(t)}function HE(e){return function(){delete this[e]}}function VE(e,t){return function(){this[e]=t}}function GE(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zE(e,t){return arguments.length>1?this.each((t==null?HE:typeof t=="function"?GE:VE)(e,t)):this.node()[e]}function gd(e){return e.trim().split(/^|\s+/)}function xl(e){return e.classList||new vd(e)}function vd(e){this._node=e,this._names=gd(e.getAttribute("class")||"")}vd.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yd(e,t){for(var n=xl(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function bd(e,t){for(var n=xl(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function FE(e){return function(){yd(this,e)}}function jE(e){return function(){bd(this,e)}}function WE(e,t){return function(){(t.apply(this,arguments)?yd:bd)(this,e)}}function qE(e,t){var n=gd(e+"");if(arguments.length<2){for(var r=xl(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?WE:t?FE:jE)(n,t))}function YE(){this.textContent=""}function XE(e){return function(){this.textContent=e}}function ZE(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function KE(e){return arguments.length?this.each(e==null?YE:(typeof e=="function"?ZE:XE)(e)):this.node().textContent}function QE(){this.innerHTML=""}function JE(e){return function(){this.innerHTML=e}}function tO(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function eO(e){return arguments.length?this.each(e==null?QE:(typeof e=="function"?tO:JE)(e)):this.node().innerHTML}function nO(){this.nextSibling&&this.parentNode.appendChild(this)}function rO(){return this.each(nO)}function iO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sO(){return this.each(iO)}function aO(e){var t=typeof e=="function"?e:ud(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function oO(){return null}function lO(e,t){var n=typeof e=="function"?e:ud(e),r=t==null?oO:typeof t=="function"?t:bl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function cO(){var e=this.parentNode;e&&e.removeChild(this)}function uO(){return this.each(cO)}function hO(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dO(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pO(e){return this.select(e?dO:hO)}function fO(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mO(e){return function(t){e.call(this,t,this.__data__)}}function gO(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function vO(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function yO(e,t,n){return function(){var r=this.__on,i,s=mO(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function bO(e,t,n){var r=gO(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?yO:vO,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function xd(e,t,n){var r=md(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xO(e,t){return function(){return xd(this,e,t)}}function _O(e,t){return function(){return xd(this,e,t.apply(this,arguments))}}function EO(e,t){return this.each((typeof t=="function"?_O:xO)(e,t))}function*OO(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var _d=[null];function ye(e,t){this._groups=e,this._parents=t}function Ri(){return new ye([[document.documentElement]],_d)}function SO(){return this}ye.prototype=Ri.prototype={constructor:ye,select:Z_,selectAll:tE,selectChild:iE,selectChildren:lE,filter:cE,data:mE,enter:uE,exit:vE,join:yE,merge:bE,selection:SO,order:xE,sort:_E,call:OE,nodes:SE,node:TE,size:wE,empty:$E,each:ME,attr:IE,style:BE,property:zE,classed:qE,text:KE,html:eO,raise:rO,lower:sO,append:aO,insert:lO,remove:uO,clone:pO,datum:fO,on:bO,dispatch:EO,[Symbol.iterator]:OO};function TO(e){let t;for(;t=e.sourceEvent;)e=t;return e}function er(e,t){if(e=TO(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function _l(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ed(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ii(){}var Ni=.7,Zs=1/Ni,Rr="\\s*([+-]?\\d+)\\s*",Pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",en="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wO=/^#([0-9a-f]{3,8})$/,$O=new RegExp(`^rgb\\(${Rr},${Rr},${Rr}\\)$`),MO=new RegExp(`^rgb\\(${en},${en},${en}\\)$`),CO=new RegExp(`^rgba\\(${Rr},${Rr},${Rr},${Pi}\\)$`),AO=new RegExp(`^rgba\\(${en},${en},${en},${Pi}\\)$`),LO=new RegExp(`^hsl\\(${Pi},${en},${en}\\)$`),kO=new RegExp(`^hsla\\(${Pi},${en},${en},${Pi}\\)$`),Od={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_l(Ii,fn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Sd,formatHex:Sd,formatHex8:DO,formatHsl:RO,formatRgb:Td,toString:Td});function Sd(){return this.rgb().formatHex()}function DO(){return this.rgb().formatHex8()}function RO(){return Ad(this).formatHsl()}function Td(){return this.rgb().formatRgb()}function fn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wO.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?wd(t):n===3?new he(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ks(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ks(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$O.exec(e))?new he(t[1],t[2],t[3],1):(t=MO.exec(e))?new he(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=CO.exec(e))?Ks(t[1],t[2],t[3],t[4]):(t=AO.exec(e))?Ks(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=LO.exec(e))?Cd(t[1],t[2]/100,t[3]/100,1):(t=kO.exec(e))?Cd(t[1],t[2]/100,t[3]/100,t[4]):Od.hasOwnProperty(e)?wd(Od[e]):e==="transparent"?new he(NaN,NaN,NaN,0):null}function wd(e){return new he(e>>16&255,e>>8&255,e&255,1)}function Ks(e,t,n,r){return r<=0&&(e=t=n=NaN),new he(e,t,n,r)}function IO(e){return e instanceof Ii||(e=fn(e)),e?(e=e.rgb(),new he(e.r,e.g,e.b,e.opacity)):new he}function El(e,t,n,r){return arguments.length===1?IO(e):new he(e,t,n,r??1)}function he(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}_l(he,El,Ed(Ii,{brighter(e){return e=e==null?Zs:Math.pow(Zs,e),new he(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ni:Math.pow(Ni,e),new he(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new he(nr(this.r),nr(this.g),nr(this.b),Qs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$d,formatHex:$d,formatHex8:NO,formatRgb:Md,toString:Md}));function $d(){return`#${rr(this.r)}${rr(this.g)}${rr(this.b)}`}function NO(){return`#${rr(this.r)}${rr(this.g)}${rr(this.b)}${rr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Md(){const e=Qs(this.opacity);return`${e===1?"rgb(":"rgba("}${nr(this.r)}, ${nr(this.g)}, ${nr(this.b)}${e===1?")":`, ${e})`}`}function Qs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rr(e){return e=nr(e),(e<16?"0":"")+e.toString(16)}function Cd(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ge(e,t,n,r)}function Ad(e){if(e instanceof Ge)return new Ge(e.h,e.s,e.l,e.opacity);if(e instanceof Ii||(e=fn(e)),!e)return new Ge;if(e instanceof Ge)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Ge(a,o,l,e.opacity)}function Ld(e,t,n,r){return arguments.length===1?Ad(e):new Ge(e,t,n,r??1)}function Ge(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}_l(Ge,Ld,Ed(Ii,{brighter(e){return e=e==null?Zs:Math.pow(Zs,e),new Ge(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ni:Math.pow(Ni,e),new Ge(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new he(Ol(e>=240?e-240:e+120,i,r),Ol(e,i,r),Ol(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ge(kd(this.h),Js(this.s),Js(this.l),Qs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qs(this.opacity);return`${e===1?"hsl(":"hsla("}${kd(this.h)}, ${Js(this.s)*100}%, ${Js(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kd(e){return e=(e||0)%360,e<0?e+360:e}function Js(e){return Math.max(0,Math.min(1,e||0))}function Ol(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Sl=e=>()=>e;function PO(e,t){return function(n){return e+n*t}}function UO(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function BO(e){return(e=+e)==1?Dd:function(t,n){return n-t?UO(t,n,e):Sl(isNaN(t)?n:t)}}function Dd(e,t){var n=t-e;return n?PO(e,n):Sl(isNaN(e)?t:e)}const ta=function e(t){var n=BO(t);function r(i,s){var a=n((i=El(i)).r,(s=El(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=Dd(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function HO(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function VO(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function GO(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Ui(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function zO(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function be(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function FO(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ui(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Tl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wl=new RegExp(Tl.source,"g");function jO(e){return function(){return e}}function WO(e){return function(t){return e(t)+""}}function Rd(e,t){var n=Tl.lastIndex=wl.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=Tl.exec(e))&&(i=wl.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:be(r,i)})),n=wl.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?WO(l[0].x):jO(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)o[(d=l[u]).i]=d.x(c);return o.join("")})}function Ui(e,t){var n=typeof t,r;return t==null||n==="boolean"?Sl(t):(n==="number"?be:n==="string"?(r=fn(t))?(t=r,ta):Rd:t instanceof fn?ta:t instanceof Date?zO:VO(t)?HO:Array.isArray(t)?GO:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?FO:be)(e,t)}function Id(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Nd=180/Math.PI,Pd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ud(e,t,n,r,i,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Nd,skewX:Math.atan(l)*Nd,scaleX:a,scaleY:o}}var ea;function qO(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pd:Ud(t.a,t.b,t.c,t.d,t.e,t.f)}function YO(e){return e==null||(ea||(ea=document.createElementNS("http://www.w3.org/2000/svg","g")),ea.setAttribute("transform",e),!(e=ea.transform.baseVal.consolidate()))?Pd:(e=e.matrix,Ud(e.a,e.b,e.c,e.d,e.e,e.f))}function Bd(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,d,h,p,f){if(c!==d||u!==h){var g=p.push("translate(",null,t,null,n);f.push({i:g-4,x:be(c,d)},{i:g-2,x:be(u,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function a(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:be(c,u)})):u&&d.push(i(d)+"rotate("+u+r)}function o(c,u,d,h){c!==u?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:be(c,u)}):u&&d.push(i(d)+"skewX("+u+r)}function l(c,u,d,h,p,f){if(c!==d||u!==h){var g=p.push(i(p)+"scale(",null,",",null,")");f.push({i:g-4,x:be(c,d)},{i:g-2,x:be(u,h)})}else(d!==1||h!==1)&&p.push(i(p)+"scale("+d+","+h+")")}return function(c,u){var d=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,d,h),a(c.rotate,u.rotate,d,h),o(c.skewX,u.skewX,d,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(p){for(var f=-1,g=h.length,m;++f<g;)d[(m=h[f]).i]=m.x(p);return d.join("")}}}var XO=Bd(qO,"px, ","px)","deg)"),ZO=Bd(YO,", ",")",")"),Ir=0,Bi=0,Hi=0,Hd=1e3,na,Vi,ra=0,ir=0,ia=0,Gi=typeof performance=="object"&&performance.now?performance:Date,Vd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $l(){return ir||(Vd(KO),ir=Gi.now()+ia)}function KO(){ir=0}function sa(){this._call=this._time=this._next=null}sa.prototype=Gd.prototype={constructor:sa,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$l():+n)+(t==null?0:+t),!this._next&&Vi!==this&&(Vi?Vi._next=this:na=this,Vi=this),this._call=e,this._time=n,Ml()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ml())}};function Gd(e,t,n){var r=new sa;return r.restart(e,t,n),r}function QO(){$l(),++Ir;for(var e=na,t;e;)(t=ir-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ir}function zd(){ir=(ra=Gi.now())+ia,Ir=Bi=0;try{QO()}finally{Ir=0,tS(),ir=0}}function JO(){var e=Gi.now(),t=e-ra;t>Hd&&(ia-=t,ra=e)}function tS(){for(var e,t=na,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:na=n);Vi=e,Ml(r)}function Ml(e){if(!Ir){Bi&&(Bi=clearTimeout(Bi));var t=e-ir;t>24?(e<1/0&&(Bi=setTimeout(zd,e-Gi.now()-ia)),Hi&&(Hi=clearInterval(Hi))):(Hi||(ra=Gi.now(),Hi=setInterval(JO,Hd)),Ir=1,Vd(zd))}}function Fd(e,t,n){var r=new sa;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var eS=vl("start","end","cancel","interrupt"),nS=[],jd=0,Wd=1,Cl=2,aa=3,qd=4,Al=5,oa=6;function la(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;rS(e,n,{name:t,index:r,group:i,on:eS,tween:nS,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:jd})}function Ll(e,t){var n=ze(e,t);if(n.state>jd)throw new Error("too late; already scheduled");return n}function nn(e,t){var n=ze(e,t);if(n.state>aa)throw new Error("too late; already running");return n}function ze(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rS(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Gd(s,0,n.time);function s(c){n.state=Wd,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,d,h,p;if(n.state!==Wd)return l();for(u in r)if(p=r[u],p.name===n.name){if(p.state===aa)return Fd(a);p.state===qd?(p.state=oa,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=oa,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(Fd(function(){n.state===aa&&(n.state=qd,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Cl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Cl){for(n.state=aa,i=new Array(h=n.tween.length),u=0,d=-1;u<h;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Al,1),d=-1,h=i.length;++d<h;)i[d].call(e,u);n.state===Al&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=oa,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function kl(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>Cl&&r.state<Al,r.state=oa,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function iS(e){return this.each(function(){kl(this,e)})}function sS(e,t){var n,r;return function(){var i=nn(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function aS(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=nn(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function oS(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ze(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?sS:aS)(n,e,t))}function Dl(e,t,n){var r=e._id;return e.each(function(){var i=nn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ze(i,r).value[t]}}function Yd(e,t){var n;return(typeof t=="number"?be:t instanceof fn?ta:(n=fn(t))?(t=n,ta):Rd)(e,t)}function lS(e){return function(){this.removeAttribute(e)}}function cS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uS(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function hS(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function dS(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function pS(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function fS(e,t){var n=Ys(e),r=n==="transform"?ZO:Yd;return this.attrTween(e,typeof t=="function"?(n.local?pS:dS)(n,r,Dl(this,"attr."+e,t)):t==null?(n.local?cS:lS)(n):(n.local?hS:uS)(n,r,t))}function mS(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function gS(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function vS(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&gS(e,s)),n}return i._value=t,i}function yS(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&mS(e,s)),n}return i._value=t,i}function bS(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ys(e);return this.tween(n,(r.local?vS:yS)(r,t))}function xS(e,t){return function(){Ll(this,e).delay=+t.apply(this,arguments)}}function _S(e,t){return t=+t,function(){Ll(this,e).delay=t}}function ES(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xS:_S)(t,e)):ze(this.node(),t).delay}function OS(e,t){return function(){nn(this,e).duration=+t.apply(this,arguments)}}function SS(e,t){return t=+t,function(){nn(this,e).duration=t}}function TS(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?OS:SS)(t,e)):ze(this.node(),t).duration}function wS(e,t){if(typeof t!="function")throw new Error;return function(){nn(this,e).ease=t}}function $S(e){var t=this._id;return arguments.length?this.each(wS(t,e)):ze(this.node(),t).ease}function MS(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;nn(this,e).ease=n}}function CS(e){if(typeof e!="function")throw new Error;return this.each(MS(this._id,e))}function AS(e){typeof e!="function"&&(e=dd(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new mn(r,this._parents,this._name,this._id)}function LS(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=t[o],c=n[o],u=l.length,d=a[o]=new Array(u),h,p=0;p<u;++p)(h=l[p]||c[p])&&(d[p]=h);for(;o<r;++o)a[o]=t[o];return new mn(a,this._parents,this._name,this._id)}function kS(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function DS(e,t,n){var r,i,s=kS(t)?Ll:nn;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function RS(e,t){var n=this._id;return arguments.length<2?ze(this.node(),n).on.on(e):this.each(DS(n,e,t))}function IS(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function NS(){return this.on("end.remove",IS(this._id))}function PS(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bl(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,d,h=0;h<l;++h)(u=o[h])&&(d=e.call(u,u.__data__,h,o))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,la(c[h],t,n,h,c,ze(u,n)));return new mn(s,this._parents,t,n)}function US(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hd(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var h=e.call(u,u.__data__,d,l),p,f=ze(u,n),g=0,m=h.length;g<m;++g)(p=h[g])&&la(p,t,n,g,h,f);s.push(h),a.push(u)}return new mn(s,a,t,n)}var BS=Ri.prototype.constructor;function HS(){return new BS(this._groups,this._parents)}function VS(e,t){var n,r,i;return function(){var s=Dr(this,e),a=(this.style.removeProperty(e),Dr(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function Xd(e){return function(){this.style.removeProperty(e)}}function GS(e,t,n){var r,i=n+"",s;return function(){var a=Dr(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function zS(e,t,n){var r,i,s;return function(){var a=Dr(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),Dr(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o))}}function FS(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var l=nn(this,e),c=l.on,u=l.value[s]==null?o||(o=Xd(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function jS(e,t,n){var r=(e+="")=="transform"?XO:Yd;return t==null?this.styleTween(e,VS(e,r)).on("end.style."+e,Xd(e)):typeof t=="function"?this.styleTween(e,zS(e,r,Dl(this,"style."+e,t))).each(FS(this._id,e)):this.styleTween(e,GS(e,r,t),n).on("end.style."+e,null)}function WS(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function qS(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&WS(e,a,n)),r}return s._value=t,s}function YS(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,qS(e,t,n??""))}function XS(e){return function(){this.textContent=e}}function ZS(e){return function(){var t=e(this);this.textContent=t??""}}function KS(e){return this.tween("text",typeof e=="function"?ZS(Dl(this,"text",e)):XS(e==null?"":e+""))}function QS(e){return function(t){this.textContent=e.call(this,t)}}function JS(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&QS(i)),t}return r._value=e,r}function tT(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,JS(e))}function eT(){for(var e=this._name,t=this._id,n=Zd(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=ze(l,t);la(l,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new mn(r,this._parents,e,n)}function nT(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=nn(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),c.on=t}),i===0&&s()})}var rT=0;function mn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Zd(){return++rT}var gn=Ri.prototype;mn.prototype={constructor:mn,select:PS,selectAll:US,selectChild:gn.selectChild,selectChildren:gn.selectChildren,filter:AS,merge:LS,selection:HS,transition:eT,call:gn.call,nodes:gn.nodes,node:gn.node,size:gn.size,empty:gn.empty,each:gn.each,on:RS,attr:fS,attrTween:bS,style:jS,styleTween:YS,text:KS,textTween:tT,remove:NS,tween:oS,delay:ES,duration:TS,ease:$S,easeVarying:CS,end:nT,[Symbol.iterator]:gn[Symbol.iterator]};function Kd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var iT={time:null,delay:0,duration:250,ease:Kd};function sT(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function aT(e){var t,n;e instanceof mn?(t=e._id,e=e._name):(t=Zd(),(n=iT).time=$l(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&la(l,e,t,c,a,n||sT(l,t));return new mn(r,this._parents,e,t)}Ri.prototype.interrupt=iS,Ri.prototype.transition=aT;function oT(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ca(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Nr(e){return e=ca(Math.abs(e)),e?e[1]:NaN}function lT(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function cT(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var uT=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zi(e){if(!(t=uT.exec(e)))throw new Error("invalid format: "+e);var t;return new Rl({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}zi.prototype=Rl.prototype;function Rl(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Rl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hT(e){t:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break t;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Qd;function dT(e,t){var n=ca(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Qd=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ca(e,Math.max(0,t+s-1))[0]}function Jd(e,t){var n=ca(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const tp={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:oT,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Jd(e*100,t),r:Jd,s:dT,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ep(e){return e}var np=Array.prototype.map,rp=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function pT(e){var t=e.grouping===void 0||e.thousands===void 0?ep:lT(np.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?ep:cT(np.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(d){d=zi(d);var h=d.fill,p=d.align,f=d.sign,g=d.symbol,m=d.zero,v=d.width,x=d.comma,_=d.precision,E=d.trim,b=d.type;b==="n"?(x=!0,b="g"):tp[b]||(_===void 0&&(_=12),E=!0,b="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",$=g==="$"?r:/[%p]/.test(b)?a:"",k=tp[b],C=/[defgprs%]/.test(b);_=_===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(M){var H=S,P=$,B,O,w;if(b==="c")P=k(M)+P,M="";else{M=+M;var L=M<0||1/M<0;if(M=isNaN(M)?l:k(Math.abs(M),_),E&&(M=hT(M)),L&&+M==0&&f!=="+"&&(L=!1),H=(L?f==="("?f:o:f==="-"||f==="("?"":f)+H,P=(b==="s"?rp[8+Qd/3]:"")+P+(L&&f==="("?")":""),C){for(B=-1,O=M.length;++B<O;)if(w=M.charCodeAt(B),48>w||w>57){P=(w===46?i+M.slice(B+1):M.slice(B))+P,M=M.slice(0,B);break}}}x&&!m&&(M=t(M,1/0));var D=H.length+M.length+P.length,U=D<v?new Array(v-D+1).join(h):"";switch(x&&m&&(M=t(U+M,U.length?v-P.length:1/0),U=""),p){case"<":M=H+M+P+U;break;case"=":M=H+U+M+P;break;case"^":M=U.slice(0,D=U.length>>1)+H+M+P+U.slice(D);break;default:M=U+H+M+P;break}return s(M)}return R.toString=function(){return d+""},R}function u(d,h){var p=c((d=zi(d),d.type="f",d)),f=Math.max(-8,Math.min(8,Math.floor(Nr(h)/3)))*3,g=Math.pow(10,-f),m=rp[8+f/3];return function(v){return p(g*v)+m}}return{format:c,formatPrefix:u}}var ua,Il,ip;fT({thousands:",",grouping:[3],currency:["$",""]});function fT(e){return ua=pT(e),Il=ua.format,ip=ua.formatPrefix,ua}function mT(e){return Math.max(0,-Nr(Math.abs(e)))}function gT(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nr(t)/3)))*3-Nr(Math.abs(e)))}function vT(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Nr(t)-Nr(e))+1}function Pr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const sp=Symbol("implicit");function ha(){var e=new ad,t=[],n=[],r=sp;function i(s){let a=e.get(s);if(a===void 0){if(r!==sp)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ad;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return ha(t,n).unknown(r)},Pr.apply(i,arguments),i}function yT(e){return function(){return e}}function bT(e){return+e}var ap=[0,1];function Ur(e){return e}function Nl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:yT(isNaN(t)?NaN:.5)}function xT(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function _T(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=Nl(i,r),s=n(a,s)):(r=Nl(r,i),s=n(s,a)),function(o){return s(r(o))}}function ET(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Nl(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var l=ml(e,o,1,r)-1;return s[l](i[l](o))}}function Pl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function op(){var e=ap,t=ap,n=Ui,r,i,s,a=Ur,o,l,c;function u(){var h=Math.min(e.length,t.length);return a!==Ur&&(a=xT(e[0],e[h-1])),o=h>2?ET:_T,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=o(e.map(r),t,n)))(r(a(h)))}return d.invert=function(h){return a(i((c||(c=o(t,e.map(r),be)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,bT),u()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),n=Id,u()},d.clamp=function(h){return arguments.length?(a=h?!0:Ur,u()):a!==Ur},d.interpolate=function(h){return arguments.length?(n=h,u()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,p){return r=h,i=p,u()}}function lp(){return op()(Ur,Ur)}function OT(e,t,n,r){var i=gl(e,t,n),s;switch(r=zi(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=gT(i,a))&&(r.precision=s),ip(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=vT(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=mT(i))&&(r.precision=s-(r.type==="%")*2);break}}return Il(r)}function cp(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ws(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return OT(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=kr(a,o,n),c===l)return r[i]=a,r[s]=o,t(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function Fe(){var e=lp();return e.copy=function(){return Pl(e,Fe())},Pr.apply(e,arguments),cp(e)}function Ul(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[ml(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Ul().domain([e,t]).range(i).unknown(s)},Pr.apply(cp(a),arguments)}function Fi(e,t,n){this.k=e,this.x=t,this.y=n}Fi.prototype={constructor:Fi,scale:function(e){return e===1?this:new Fi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Fi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Fi.prototype;const de="cds",vn={opacity:{unselected:.05,selected:.4}},Nn={ticks:{number:7,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1,hover:{rectanglePadding:4}},Br={duration:1e3,ease:Kd,zoomLevel:3},Hr={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},depth:2},up={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},Le={circle:{radius:4,opacity:{hovered:1,default:.3}},box:{opacity:{hovered:.5,default:.3}},strokeWidth:{default:1,thicker:2}},ST={defaultBins:10},Nt={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},yn={opacity:{unselected:.3,selected:1},weight:{selected:2,unselected:1}},Kt={statusBar:{paddingRight:5},status:{indicatorSize:16,paddingLeft:15},total:{paddingLeft:36,paddingRight:24},height:{default:8,proportional:16},dividerWidth:2},Lt={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},sr={opacity:{unselected:.1,selected:.3},xLabelPadding:10,yLabelPadding:8,yTicksNumber:4,minRange:10,xAxisRectHeight:50,dotsRadius:5},je={nodeWidth:4,minNodePadding:24,opacity:{unfocus:.3,default:.8,selected:1}},hp={minCellDividerDimension:16},dp={default:{size:24}},pp={defaultOffset:4,horizontalOffset:10},fp={default:{duration:300},pie_slice_mouseover:{duration:100},pie_slice_mouseout:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},xe={height:{[Pe.GRAPH_VIEW]:32,[Pe.SLIDER_VIEW]:10},spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},TT=[{type:Wt.RADIUS,name:"Radius"},{type:Wt.AREA,name:"Poor area"},{type:Wt.AREA,name:"Satisfactory area"},{type:Wt.AREA,name:"Great area"},{type:Wt.QUARTILE,name:"Quartiles"}],Vr={type:we.END_LINE,threshold:16,numCharacter:14},mp=4,wT={code:typeof navigator<"u"&&navigator?.language||"en-US",number:(e,t=navigator?.language||"en-US")=>e?.toLocaleString?.(t),date:(e,t=navigator?.language||"en-US",n={},r=null)=>r||e.toLocaleDateString(t,n),time:(e,t=navigator?.language||"en-US",n={},r=null)=>r||e.toLocaleTimeString(t,n),optionsObject:{"15seconds":{primary:{"MMM d, pp":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"MMM d, h:mm:ss.SSS a":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},secondary:{pp:{hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"h:mm:ss.SSS a":{hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},type:"time"},minute:{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},"30minutes":{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},hourly:{primary:{"MMM d, hh a":{month:"short",day:"numeric",hour:"2-digit",hourCycle:"h12"}},secondary:{"hh a":{hour:"2-digit",hourCycle:"h12"}},type:"time"},daily:{primary:{"MMM d":{month:"short",day:"numeric"}},secondary:{d:{day:"numeric"}},type:"date"},weekly:{primary:{"eee, MMM d":{weekday:"short",month:"short",day:"numeric"}},secondary:{eee:{weekday:"short"}},type:"date"},monthly:{primary:{"MMM yyyy":{month:"short",year:"numeric"}},secondary:{MMM:{month:"short"}},type:"date"},quarterly:{primary:{},secondary:{},type:"date"},yearly:{primary:{yyyy:{year:"numeric"}},secondary:{yyyy:{year:"numeric"}},type:"date"}},translations:{group:"Group",total:"Total",meter:{title:""},tabularRep:{title:"Tabular representation",downloadAsCSV:"Download as CSV"},toolbar:{exportAsCSV:"Export to CSV",exportAsJPG:"Export to JPG",exportAsPNG:"Export to PNG",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",moreOptions:"More options",makeFullScreen:"Make fullscreen",exitFullScreen:"Exit fullscreen",showAsTable:"Show as table"}}},$T={enabled:!0,position:Sr.BOTTOM,clickable:!0,truncation:Vr,alignment:Ft.LEFT,order:null,additionalItems:[]},MT={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},CT={enabled:!0},gp={enabled:!0,showTotal:!0,truncation:Vr,groupLabel:"Group"},vp={top:{visible:!0,includeZero:!0,truncation:Vr},bottom:{visible:!0,includeZero:!0,truncation:Vr},left:{visible:!0,includeZero:!0,truncation:Vr},right:{visible:!0,includeZero:!0,truncation:Vr}},da={addSpaceOnEdges:1,showDayName:!1,localeObject:Zu,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}};let yp=!1;try{yp=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}catch(e){console.warn("Fullscreen capabilities check failed: ",e.message)}const Jt={width:null,height:null,resizable:!0,theme:Vo.WHITE,tooltip:gp,legend:$T,locale:wT,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:xt.SHOW_AS_DATATABLE},...yp?[{type:xt.MAKE_FULLSCREEN}]:[],{type:xt.EXPORT_CSV},{type:xt.EXPORT_PNG},{type:xt.EXPORT_JPG}]}},bp=at({},Jt,{thematic:{projection:Je.geoNaturalEarth1}}),ji=at({},Jt,{axes:vp,timeScale:da,grid:MT,ruler:CT,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:Pe.GRAPH_VIEW}}}),ar=at({},ji,{bars:{maxWidth:16,spacingFactor:.25,preserveSpaceForMissingBars:!0},timeScale:at(da,{addSpaceOnEdges:1})}),AT=at({},ar,{}),LT=at({},ar,{}),kT=at({},ar,{bars:at({},ar.bars,{dividerSize:1.5})}),DT=at({},ar,{}),Bl=at({},ji,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),RT=Bl,xp=at({},Bl,{points:{radius:3,filled:!1,enabled:!0}}),_p=at({},xp,{timeScale:at(da,{addSpaceOnEdges:0})}),IT=_p,NT=at({},ji,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:e=>{const t=Math.min(e.width,e.height);return[t*3/400,t*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:Wt.RADIUS,name:"Radius"}]}}),PT=at({},ji,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:Wt.AREA,name:"Poor area"},{type:Wt.AREA,name:"Satisfactory area"},{type:Wt.AREA,name:"Great area"},{type:Wt.QUARTILE,name:"Quartiles"}]}}),UT=at({},ar,{bars:{dividerSize:1.5},timeScale:at(da,{addSpaceOnEdges:0})}),BT=at({},Jt,{tooltip:at({},gp,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:e=>{const t=Math.min(e.width,e.height);return[t*20/400,t*75/400]},wordMapsTo:"word"}}),Ep=at({},Jt,{pie:{labels:{formatter:null,enabled:!0},alignment:Ft.LEFT,sortFunction:null,valueMapsTo:"value"}}),HT=at({},Jt,{legend:{enabled:!1},gauge:{type:Wn.SEMI,arcWidth:16,deltaArrow:{size:e=>e/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:e=>e/8,valueFontSize:e=>e/2.5,alignment:Ft.LEFT}}),VT=at({},Ep,{donut:{center:{numberFontSize:e=>`${Math.min(e/100*24,24)}px`,titleFontSize:e=>`${Math.min(e/100*15,15)}px`,titleYPosition:e=>Math.min(e/80*20,20)},alignment:Ft.LEFT}}),Op=at({},Jt,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),GT=at({},Op,{legend:{enabled:!0}}),zT=at({},Jt,{radar:{axes:{angle:"key",value:"value"},alignment:Ft.LEFT},tooltip:{gridline:{enabled:!0}}}),FT=at({},ar,{comboChartTypes:[]}),jT=at({tree:{type:Ms.TREE}},Jt,{}),WT=at({},Jt,{data:at(Jt.data,{groupMapsTo:"name"})}),qT=at({},Jt,Hr,{data:at(Jt.data,{groupMapsTo:"name"})}),YT=at({},Jt,{alluvial:{data:at(Jt.data,{groupMapsTo:"source"}),nodeAlignment:Ft.CENTER,nodePadding:24,monochrome:!1,nodes:[]}}),XT=at({},Jt,{axes:vp,heatmap:{divider:{state:wr.AUTO},colorLegend:{type:"linear"}}}),ZT=at({},bp,{choropleth:{colorLegend:{type:"linear"}}}),Ct={alluvialChart:YT,areaChart:_p,axisChart:ji,boxplotChart:DT,bubbleChart:NT,bulletChart:PT,chart:Jt,circlePackChart:qT,choroplethChart:ZT,comboChart:FT,donutChart:VT,gaugeChart:HT,groupedBarChart:LT,heatmapChart:XT,histogramChart:UT,lineChart:xp,lollipopChart:RT,meterChart:Op,pieChart:Ep,proportionalMeterChart:GT,radarChart:zT,scatterChart:Bl,simpleBarChart:AT,stackedAreaChart:IT,stackedBarChart:kT,thematicChart:bp,treeChart:jT,treemapChart:WT,wordCloudChart:BT};function KT(e,t,n){let r=null;return function(...i){const s=this;s.mousePosition=er(i[0],n),clearTimeout(r),r=setTimeout(function(){e.apply(s,i)},t)}}function Rt(e,t){const n=pn(e),r=Object.keys(t.axes||{});t?.toolbar?.controls&&delete n.toolbar.controls,r.length===0&&delete n.axes;for(const i in n.axes)if(r.includes(i)){const s=t.axes[i];if((s.primary||s.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://charts.carbondesignsystem.com/"),s.mapsTo==null){const o=s.scaleType;o==null?s.mapsTo="value":o===nt.TIME?s.mapsTo="date":o===nt.LABELS&&(s.mapsTo="key")}}else delete n.axes[i];return Vl(n,t),at(n,t)}function bn(e){if(!e)return;const t=/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/,n=e.getAttribute("transform").match(t);if(!n)return null;if(n[0]){const r=n[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:r[0],ty:r[1]}}return null}function Wi(e){const t=/\(([^)]+)\)/.exec(e);if(t&&t.length>1){const n=t[1].split(",");if(n.length>1)return{x:parseFloat(n[0]),y:parseFloat(n[1])}}return{x:0,y:0}}function Hl(e,t,n="value",r=!1){const i=e/t.reduce((s,a)=>s+a[n],0)*100;return r?i:i%1!==0?parseFloat(i.toFixed(1)):i}function qi(e,t,n){if(n>e.length)return e;if(t===we.MID_LINE)return e.substr(0,n/2)+"..."+e.substr(-n/2);if(t===we.FRONT_LINE)return"..."+e.substr(-n);if(t===we.END_LINE)return e.substr(0,n)+"..."}function Vl(e,t){const n=y(e,"legend","additionalItems"),r=y(t,"legend","additionalItems");if(n&&r){const i=r.map(o=>o.type),s=n.map(o=>o.type),a=TT.filter(o=>s.includes(o.type)&&!i.includes(o.type));e.legend.additionalItems=a,t.legend.additionalItems=k_(a,r,"name")}}const y=(e,...t)=>{let n=e;if(n){for(const r of t)if(n[r]!==null&&n[r]!==void 0)n=n[r];else return null;return n}return null},Sp=(e,t)=>t===zt.HORIZONTAL?{y0:e.x0,y1:e.x1,x0:e.y0,x1:e.y1}:e,se=(e,t)=>{const{x0:n,x1:r,y0:i,y1:s}=Sp(e,t);return`M${n},${i}L${n},${s}L${r},${s}L${r},${i}L${n},${i}`};function xn(e,t,n){return n===zt.VERTICAL?[e,t]:[t,e]}function Tp(e){const t=Pt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function wp(e,t){const n=Pt(e,t?.in);return n.setHours(0,0,0,0),n}function $p(e,t,n){const[r,i]=qn(n?.in,e,t),s=wp(r),a=wp(i),o=+s-Tp(s),l=+a-Tp(a);return Math.round((o-l)/c1)}function QT(e,t){const n=Pt(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function JT(e,t){const n=Pt(e,t?.in);return $p(n,QT(n))+1}function pa(e,t){return _i(e,{...t,weekStartsOn:1})}function Mp(e,t){const n=Pt(e,t?.in),r=n.getFullYear(),i=$e(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=pa(i),a=$e(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=pa(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function tw(e,t){const n=Mp(e,t),r=$e(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),pa(r)}function ew(e,t){const n=Pt(e,t?.in),r=+pa(n)-+tw(n);return Math.round(r/Wu)+1}function Cp(e,t){const n=Pt(e,t?.in),r=n.getFullYear(),i=Ls(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=$e(t?.in||e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=_i(a,t),l=$e(t?.in||e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=_i(l,t);return+n>=+o?r+1:+n>=+c?r:r-1}function nw(e,t){const n=Ls(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Cp(e,t),s=$e(t?.in||e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),_i(s,t)}function rw(e,t){const n=Pt(e,t?.in),r=+_i(n,t)-+nw(n,t);return Math.round(r/Wu)+1}function Ot(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Pn={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ot(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ot(n+1,2)},d(e,t){return Ot(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ot(e.getHours()%12||12,t.length)},H(e,t){return Ot(e.getHours(),t.length)},m(e,t){return Ot(e.getMinutes(),t.length)},s(e,t){return Ot(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ot(i,t.length)}},Gr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ap={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Pn.y(e,t)},Y:function(e,t,n,r){const i=Cp(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Ot(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ot(s,t.length)},R:function(e,t){const n=Mp(e);return Ot(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ot(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ot(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ot(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Pn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ot(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=rw(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Ot(i,t.length)},I:function(e,t,n){const r=ew(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ot(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Pn.d(e,t)},D:function(e,t,n){const r=JT(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ot(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Ot(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Ot(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Ot(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Gr.noon:r===0?i=Gr.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Gr.evening:r>=12?i=Gr.afternoon:r>=4?i=Gr.morning:i=Gr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Pn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Pn.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ot(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ot(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Pn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Pn.s(e,t)},S:function(e,t){return Pn.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return kp(r);case"XXXX":case"XX":return or(r);case"XXXXX":case"XXX":default:return or(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return kp(r);case"xxxx":case"xx":return or(r);case"xxxxx":case"xxx":default:return or(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Lp(r,":");case"OOOO":default:return"GMT"+or(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Lp(r,":");case"zzzz":default:return"GMT"+or(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Ot(r,t.length)},T:function(e,t,n){return Ot(+e,t.length)}};function Lp(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+Ot(s,2)}function kp(e,t){return e%60===0?(e>0?"-":"+")+Ot(Math.abs(e)/60,2):or(e,t)}function or(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Ot(Math.trunc(r/60),2),s=Ot(r%60,2);return n+i+t+s}const Dp=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Rp=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},iw=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Dp(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Dp(r,t)).replace("{{time}}",Rp(i,t))},sw={p:Rp,P:iw},aw=/^D+$/,ow=/^Y+$/,lw=["D","DD","YY","YYYY"];function cw(e){return aw.test(e)}function uw(e){return ow.test(e)}function hw(e,t,n){const r=dw(e,t,n);if(console.warn(r),lw.includes(e))throw new RangeError(r)}function dw(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function pw(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function fw(e){return!(!pw(e)&&typeof e!="number"||isNaN(+Pt(e)))}const mw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vw=/^'([^]*?)'?$/,yw=/''/g,bw=/[a-zA-Z]/;function Gl(e,t,n){const r=Ls(),i=n?.locale??r.locale??Zu,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=Pt(e,n?.in);if(!fw(o))throw new RangeError("Invalid time value");let l=t.match(gw).map(u=>{const d=u[0];if(d==="p"||d==="P"){const h=sw[d];return h(u,i.formatLong)}return u}).join("").match(mw).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const d=u[0];if(d==="'")return{isToken:!1,value:xw(u)};if(Ap[d])return{isToken:!0,value:u};if(d.match(bw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(u=>{if(!u.isToken)return u.value;const d=u.value;(!n?.useAdditionalWeekYearTokens&&uw(d)||!n?.useAdditionalDayOfYearTokens&&cw(d))&&hw(d,t,String(e));const h=Ap[d[0]];return h(o,d,i.localize,c)}).join("")}function xw(e){const t=e.match(vw);return t?t[1].replace(yw,"'"):e}const zl=[["15seconds",15*1e3],["minute",60*1e3],["30minutes",1800*1e3],["hourly",3600*1e3],["daily",1440*60*1e3],["monthly",720*60*60*1e3],["quarterly",2160*60*60*1e3],["yearly",360*24*60*60*1e3]];function Ip(e,t,n,r,i){const s=t===0,a=Number(Gl(new Date(e),"c"))===2,o=Number(Gl(new Date(e),"q"))===1,l=t!==0?n[t-1]:null;switch(r){case"15seconds":return s||ma(e)||Yi(e,l)||Un(e);case"minute":return s||ma(e)||Yi(e,l)||Un(e);case"30minutes":return s||ma(e)||Yi(e,l)||Un(e);case"hourly":return s||ma(e)||Yi(e,l)||Un(e);case"daily":return i?s||a||Un(e):s||Yi(e,l)||Un(e);case"weekly":return s||a||Un(e);case"monthly":return s||Un(e);case"quarterly":return s||o;case"yearly":return!1;default:throw new Error(`${r} is not a valid time interval.`)}}function Fl(e,t,n,r,i,s){const a=i.showDayName,o=r==="daily"&&a?"weekly":r,l=new Date(e),c=y(i,"timeIntervalFormats")[o],u=y(c,"primary"),d=y(c,"secondary"),h=Ip(e,t,n,r,a);let p=h?u:d;r==="15seconds"&&l.getMilliseconds()!==0&&(p=p.replace("pp","h:mm:ss.SSS a"));const f=i.localeObject,{code:g,optionsObject:m}=s,v=m[r].type,x=m[r][h?"primary":"secondary"][p];if(r==="quarterly"||!x){const _=Gl(l,p,{locale:f}).split("").map(E=>{const b=Number(E);return E!==" "&&!Number.isNaN(b)?b?.toLocaleString?.(g):E});return s[v](l,g,{},_.join(""))}else return s[v](l,g,x)}function fa(e){const t=new Date(e);return{M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds()}}function _w(e){if(e)return e.slice(1).map((t,n)=>t-e[n])}function Ew(e){const t=zl.reduce((n,[,r],i)=>{const s=zl[n][1],a=Math.abs(s-e),o=Math.abs(r-e);return a<o?n:i},0);return zl[t][0]}function jl(e,t){if(ju[t])return t;if(e.length===1)return"15seconds";const n=_w(e),r=In(n);return Ew(r)}function ma(e){const{s:t,m:n,H:r}=fa(e);return r===0&&n===0&&t===0}function Yi(e,t){const n=fa(e).M,r=fa(t).M;return n!==r}function Un(e){const{M:t,d:n,s:r,m:i,H:s}=fa(e);return t===1&&n===1&&s===0&&i===0&&r===0}function Np(e){return e===void 0?"":e.toISOString()}function Pp(e){const t=Ve(e,r=>r.value),n=Fe().domain(t).nice().domain();if(n[0]>0)n[0]=0;else if(n[0]===0&&n[1]===0)return[0,1];return n[0]<0&&n[1]>0&&(Math.abs(n[0])>n[1]?n[1]=Math.abs(n[0]):n[0]=-n[1]),n}function Up(e,t){const n=y(t,"gradient","colors"),r=!He(n);let i=y(t,"pairing","option");const s=Pp(e),a=s[0]<0&&s[1]>0?"diverge":"mono";(i<1&&i>4&&a==="mono"||i<1&&i>2&&a==="diverge")&&(i=1);const o=r?n:[];if(!r){const l=a==="diverge"?17:11;for(let c=1;c<l+1;c++)o.push(`fill-${a}-${i}-${c}`)}return Ul().domain(s).range(o)}var ht=(e=>(e.GRAPHICS_DOCUMENT="graphics-document",e.GRAPHICS_OBJECT="graphics-object",e.GRAPHICS_SYMBOL="graphics-symbol",e.GROUP="group",e.DOCUMENT="document",e.CHECKBOX="checkbox",e.BUTTON="button",e.MENU="menu",e.MENU_ITEM="menuitem",e.IMG="img",e))(ht||{});function Ow(e,t){return e&&nd(e,t,Ti)}function Sw(e,t){return function(n,r){if(n==null)return n;if(!Kn(n))return e(n,r);for(var i=n.length,s=-1,a=Object(n);++s<i&&r(a[s],s,a)!==!1;);return n}}var Wl=Sw(Ow);function pt(e){return function(){return e}}var Tw=Array.prototype.slice;function ga(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ww(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;){var a=e[i];t(r,a,n(a),e)}return r}function $w(e,t,n,r){return Wl(e,function(i,s,a){t(r,i,n(i),a)}),r}function Mw(e,t){return function(n,r){var i=Zt(n)?ww:$w,s={};return i(n,e,Fs(r),s)}}function Cw(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}var Aw=Object.prototype,Lw=Aw.hasOwnProperty,kw=Mw(function(e,t,n){Lw.call(e,n)?e[n].push(t):Rs(e,n,[t])});function Dw(e,t){let n=0;for(let r of e)r!=null&&(r=+r)>=r&&++n;return n}function Rw(e){return e}function Iw(e=Jn){if(e===Jn)return Bp;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Bp(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var Nw=Array.prototype,Pw=Nw.slice;function ql(e){return()=>e}function Uw(e,t,n){let r;for(;;){const i=kr(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function Bw(e){return Math.max(1,Math.ceil(Math.log(Dw(e))/Math.LN2)+1)}function Hw(){var e=Rw,t=Ve,n=Bw;function r(i){Array.isArray(i)||(i=Array.from(i));var s,a=i.length,o,l,c=new Array(a);for(s=0;s<a;++s)c[s]=e(i[s],s,i);var u=t(c),d=u[0],h=u[1],p=n(c,d,h);if(!Array.isArray(p)){const _=h,E=+p;if(t===Ve&&([d,h]=Uw(d,h,E)),p=Ws(d,h,E),p[0]<=d&&(l=kr(d,h,E)),p[p.length-1]>=h)if(_>=h&&t===Ve){const b=kr(d,h,E);isFinite(b)&&(b>0?h=(Math.floor(h/b)+1)*b:b<0&&(h=(Math.ceil(h*-b)+1)/-b))}else p.pop()}for(var f=p.length,g=0,m=f;p[g]<=d;)++g;for(;p[m-1]>h;)--m;(g||m<f)&&(p=p.slice(g,m),f=m-g);var v=new Array(f+1),x;for(s=0;s<=f;++s)x=v[s]=[],x.x0=s>0?p[s-1]:d,x.x1=s<f?p[s]:h;if(isFinite(l)){if(l>0)for(s=0;s<a;++s)(o=c[s])!=null&&d<=o&&o<=h&&v[Math.min(f,Math.floor((o-d)/l))].push(i[s]);else if(l<0){for(s=0;s<a;++s)if((o=c[s])!=null&&d<=o&&o<=h){const _=Math.floor((d-o)*l);v[Math.min(f,_+(p[_]<=o))].push(i[s])}}}else for(s=0;s<a;++s)(o=c[s])!=null&&d<=o&&o<=h&&v[ml(p,o,0,f)].push(i[s]);return v}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:ql(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:ql([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:ql(Array.isArray(i)?Pw.call(i):i),r):n},r}function Hp(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Bp:Iw(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(t-c*d/l+h)),f=Math.min(r,Math.floor(t+(l-c)*d/l+h));Hp(e,t,p,f,i)}const s=e[t];let a=n,o=r;for(Xi(e,n,t),i(e[r],s)>0&&Xi(e,n,r);a<o;){for(Xi(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}i(e[n],s)===0?Xi(e,n,o):(++o,Xi(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function Xi(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Yl(e,t,n){if(e=Float64Array.from(N_(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return In(e);if(t>=1)return tr(e);var r,i=(r-1)*t,s=Math.floor(i),a=tr(Hp(e,s).subarray(0,s+1)),o=In(e.subarray(s+1));return a+(o-a)*(i-s)}}function Vp(e,t){if((a=e.length)>1)for(var n=1,r,i,s=e[t[0]],a,o=s.length;n<a;++n)for(i=s,s=e[t[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Gp(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Vw(e,t){return e[t]}function Gw(e){const t=[];return t.key=e,t}function Xl(){var e=pt([]),t=Gp,n=Vp,r=Vw;function i(s){var a=Array.from(e.apply(this,arguments),Gw),o,l=a.length,c=-1,u;for(const d of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(d,a[o].key,c,s)]).data=d;for(o=0,u=ga(t(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:pt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:pt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Gp:typeof s=="function"?s:pt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Vp,i):n},i}function zw(e,t){if((l=e.length)>0)for(var n,r=0,i,s,a,o,l,c=e[t[0]].length;r<c;++r)for(a=o=0,n=0;n<l;++n)(s=(i=e[t[n]][r])[1]-i[0])>0?(i[0]=a,i[1]=a+=s):s<0?(i[1]=o,i[0]=o+=s):(i[0]=0,i[1]=s)}function Fw(e){const t=e.trim();return["=","+","-","@","	","\r"].includes(t.charAt(0))?`${t}`:/[,\"\n]/.test(t)?`"${t}"`:t}class rn{constructor(t){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=t}formatTable({headers:t,cells:n}){const r=this.getOptions(),{code:i,date:s,number:a}=y(r,"locale"),o=y(r,"tabularRepModal","tableHeadingFormatter"),l=y(r,"tabularRepModal","tableCellFormatter"),{cartesianScales:c}=this.services,u=c?.getDomainAxisScaleType();let d;return u===nt.TIME&&(d=h=>s(h,i,{month:"short",day:"numeric",year:"numeric"})),[typeof o=="function"?o(t):t,...typeof l=="function"?l(n):n.map(h=>{d&&(h[1]=d(h[1]));for(const p in h){const f=h[p];typeof f=="number"&&(h[p]=a(f,i))}return h})]}getAllDataFromDomain(t){if(!this.getData())return null;const n=this.getOptions();let r=this.getData();const i=this.getDataGroups(),{groupMapsTo:s}=y(n,"data"),a=y(n,"axes");return t&&(r=r.filter(o=>t.includes(o[s]))),a&&Object.keys(a).forEach(o=>{const l=a[o].mapsTo,c=a[o].scaleType;if((c===nt.LINEAR||c===nt.LOG)&&(r=r.map(u=>({...u,[l]:u[l]===null?u[l]:Number(u[l])}))),l&&a[o].domain)if(c===nt.LABELS)r=r.filter(u=>a[o].domain.includes(u[l]));else{const[u,d]=a[o].domain;r=r.filter(h=>!(l in h)||h[l]>=u&&h[l]<=d)}}),r.filter(o=>i.find(l=>l.name===o[s]))}getDisplayData(t){if(!this.get("data"))return null;const{ACTIVE:n}=Nt.items.status,r=this.getDataGroups(t),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(t).filter(s=>r.find(a=>a.name===s[i]&&a.status===n))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(t){const n=this.sanitize(pn(t)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),n}getDataGroups(t){return y(this.getOptions(),"data","loading")?[]:t?this.get("dataGroups").filter(n=>t.includes(n.name)):this.get("dataGroups")}getActiveDataGroups(t){const{ACTIVE:n}=Nt.items.status;return this.getDataGroups(t).filter(r=>r.status===n)}getDataGroupNames(t){return this.getDataGroups(t).map(n=>n.name)}getActiveDataGroupNames(t){return this.getActiveDataGroups(t).map(n=>n.name)}aggregateBinDataByGroup(t){return kw(t,"group")}getBinConfigurations(){const t=this.getDisplayData(),n=this.getOptions(),r=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),s=n.axes[r],{groupMapsTo:a}=n.data,{bins:o=ST.defaultBins}=s,l=Array.isArray(o),c=Hw().value(p=>p[i]).thresholds(o)(t);if(l)c[c.length-1].x1=o[o.length-1];else{const p=c[0].x1-c[0].x0;c[c.length-1].x1=+c[c.length-1].x0+p}const u=l?[o[0],o[o.length-1]]:[c[0].x0,c[c.length-1].x1],d=Array.from(new Set(t.map(p=>p[a]))),h=[];return c.forEach(p=>{const f=`${p.x0}-${p.x1}`,g=this.aggregateBinDataByGroup(p);d.forEach(m=>{h.push({group:m,key:f,value:g[m]||0,bin:p.x0})})}),{bins:c,binsDomain:u}}getBinnedStackedData(){const t=this.getOptions(),{groupMapsTo:n}=t.data,r=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),s=this.getDataValuesGroupedByKeys({bins:i});return Xl().keys(r)(s).map((a,o)=>Object.keys(a).filter(l=>!isNaN(l)).map(l=>{const c=a[l];return c[n]=r[o],c}))}getGroupedData(t){const n=this.getDisplayData(t),r={},{groupMapsTo:i}=this.getOptions().data;return n.map(s=>{const a=s[i];r[a]!==null&&r[a]!==void 0?r[a].push(s):r[a]=[s]}),Object.keys(r).map(s=>({name:s,data:r[s]}))}getStackKeys({bins:t=null,groups:n=null}={bins:null,groups:null}){const r=this.getOptions(),i=this.getDisplayData(n);let s;t?s=t.map(l=>`${l.x0}:${l.x1}`):s=Di(i.map(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return l[c]instanceof Date?Np(l[c]):l[c]&&typeof l[c].toString=="function"?l[c].toString():l[c]}));const a=this.services.cartesianScales.domainAxisPosition,o=r.axes[a].scaleType;return o===nt.TIME?s.sort((l,c)=>{const u=new Date(l),d=new Date(c);return u-d}):(o===nt.LOG||o===nt.LINEAR)&&s.sort((l,c)=>l-c),s}getDataValuesGroupedByKeys({bins:t=null,groups:n=null}){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.getDisplayData(n),a=this.getDataGroupNames(),o=this.getStackKeys({bins:t,groups:n});return t?o.map(l=>{const[c,u]=l.split(":"),d={x0:c,x1:u},h=t.find(p=>p.x0.toString()===c.toString());return a.forEach(p=>{d[p]=h.filter(f=>f[i]===p).length}),d}):o.map(l=>{const c={sharedStackKey:l};return a.forEach(u=>{const d=s.find(p=>{const f=this.services.cartesianScales.getDomainIdentifier(p);return p[i]===u&&Object.prototype.hasOwnProperty.call(p,f)&&(p[f]instanceof Date?Np(p[f])===l:p[f].toString()===l)}),h=this.services.cartesianScales.getRangeIdentifier(c);c[u]=d?d[h]:null}),c})}getStackedData({percentage:t=!1,groups:n=null,divergent:r=!1}){const i=this.getOptions(),{groupMapsTo:s}=i.data,a=this.getActiveDataGroupNames(n),o=this.getDataValuesGroupedByKeys({groups:n});if(t){const l=Cw(o.map(c=>[c.sharedStackKey,0]));o.forEach(c=>{a.forEach(u=>{l[c.sharedStackKey]+=c[u]})}),o.forEach(c=>{a.forEach(u=>{const d=l[c.sharedStackKey];l[c.sharedStackKey]?c[u]=c[u]/d*100:c[u]=0})})}return(r?Xl().offset(zw):Xl()).keys(a)(o).map((l,c)=>Object.keys(l).filter(u=>!isNaN(u)).map(u=>{const d=l[u];return d[s]=a[c],d}))}getOptions(){return this.state.options}set(t,n){this.state=Object.assign({},this.state,t);const r=Object.assign({skipUpdate:!1,animate:!0},n);r.skipUpdate||this.update(r.animate)}get(t){return t?this.state[t]:this.state}setOptions(t){const n=this.getOptions();Vl(n,t),this.set({options:at(n,t)})}update(t=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(T.Model.UPDATE,{animate:t}))}toggleDataLabel(t){const{ACTIVE:n,DISABLED:r}=Nt.items.status,i=this.getDataGroups(),s=i.some(c=>c.status===r),a=i.filter(c=>c.status===n);if(s)if(a.length===1&&a[0].name===t)i.forEach((c,u)=>{i[u].status=n});else{const c=i.findIndex(u=>u.name===t);i[c].status=i[c].status===r?n:r}else i.forEach((c,u)=>{i[u].status=c.name===t?n:r});const o=i.filter(c=>c.status===n),l=this.getOptions();i.some(c=>c.status===r)?l.data.selectedGroups=o.map(c=>c.name):l.data.selectedGroups=[],this.services.events.dispatchEvent(T.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(t,n,r,i){const s=this.getOptions();return s.getIsFilled?s.getIsFilled(t,n,r,i):i}getFillColor(t,n,r){const i=this.getOptions(),s=y(this.colorScale,t);return i.getFillColor?i.getFillColor(t,n,r,s):s}getStrokeColor(t,n,r){const i=this.getOptions(),s=y(this.colorScale,t);return i.getStrokeColor?i.getStrokeColor(t,n,r,s):s}isUserProvidedColorScaleValid(){const t=y(this.getOptions(),"color","scale"),n=this.getDataGroups();return t==null||Object.keys(t).length==0?!1:n.some(r=>Object.keys(t).includes(r.name))}getColorClassName(t){const n=this.colorClassNames(t.dataGroupName);let r=t.originalClassName;return t.classNameTypes.forEach(i=>r=t.originalClassName?`${r} ${i}-${n}`:`${i}-${n}`),r||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(t){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://charts.carbondesignsystem.com/");const n=[],{datasets:r,labels:i}=t;return r.forEach(s=>{s.data.forEach((a,o)=>{let l;const c=y(s,"label");if(c===null){const d=y(i,o);d?l=d:l="Ungrouped"}else l=c;const u={group:l,key:i[o]};isNaN(a)?(u.value=a.value,u.date=a.date):u.value=a,n.push(u)})}),n}getTabularDataArray(){return[]}exportToCSV(){const t=this.getTabularDataArray().map(s=>s.map(a=>`"${(a==="&ndash;"?"":a).split(/[,;'"`]/).map(o=>Fw(o)).join("")}"`)).map(s=>s.join(",")).join(`
`),n=this.getOptions();let r="myChart";const i=y(n,"fileDownload","fileName");typeof i=="function"?r=i("csv"):typeof i=="string"&&(r=i),this.services.files.downloadCSV(t,`${r}.csv`)}getTabularData(t){return Array.isArray(t)?t:this.transformToTabularData(t)}sanitize(t){return t=this.getTabularData(t),t}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(t=>{this.allDataGroups.indexOf(t)===-1&&this.allDataGroups.push(t)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(t){const{groupMapsTo:n}=this.getOptions().data,{ACTIVE:r,DISABLED:i}=Nt.items.status,s=this.getOptions(),a=Di(t.map(l=>l[n]));s.data.selectedGroups.length&&(s.data.selectedGroups.every(l=>a.includes(l))||(s.data.selectedGroups=[]));const o=l=>!s.data.selectedGroups.length||s.data.selectedGroups.includes(l)?r:i;return a.map(l=>({name:l,status:o(l)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const t=this.getOptions(),n=y(t,"color","scale");Object.keys(n).forEach(r=>{this.allDataGroups.includes(r)||console.warn(`"${r}" does not exist in data groups.`)}),this.allDataGroups.filter(r=>n[r]).forEach(r=>this.colorScale[r]=n[r])}setColorClassNames(){const t=y(this.getOptions(),"color","pairing");let n=y(t,"numberOfVariants");(!n||n<this.allDataGroups.length)&&(n=this.allDataGroups.length);let r=y(t,"option");const i=up.pairingOptions,s=n>5?14:n,a=`${s}-color`;r=r<=i[a]?r:1;const o=this.allDataGroups.map((l,c)=>`${s}-${r}-${c%14+1}`);this.colorClassNames=ha().range(o).domain(this.allDataGroups)}}class lr extends rn{constructor(t){super(t),this.axisFlavor=yi.DEFAULT}assignRangeAndDomains(){const{cartesianScales:t}=this.services,n=this.getOptions(),r=t.isDualAxes(),i={primaryDomain:t.domainAxisPosition,primaryRange:t.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return r&&(i.secondaryDomain=t.secondaryDomainAxisPosition,i.secondaryRange=t.secondaryRangeAxisPosition),Object.keys(i).forEach(s=>{const a=i[s];t.scales[a]?i[s]={position:a,label:t.getScaleLabel(a),identifier:y(n,"axes",a,"mapsTo")}:i[s]=null}),i}getTabularDataArray(){const t=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{primaryDomain:i,primaryRange:s,secondaryDomain:a,secondaryRange:o}=this.assignRangeAndDomains(),{number:l,code:c}=y(this.getOptions(),"locale"),u=["Group",i.label,s.label,...a?[a.label]:[],...o?[o.label]:[]],d=t.map(h=>[h[r],h[i.identifier]===null?"&ndash;":h[i.identifier],h[s.identifier]===null||isNaN(h[s.identifier])?"&ndash;":l(h[s.identifier],c),...a?[h[a.identifier]===null?"&ndash;":h[a.identifier]]:[],...o?[h[o.identifier]===null||isNaN(h[o.identifier])?"&ndash;":h[o.identifier]]:[]]);return super.formatTable({headers:u,cells:d})}setData(t){let n;if(t&&(n=super.setData(t),y(this.getOptions(),"zoomBar",G.TOP,"enabled"))){const r=y(this.getOptions(),"zoomBar",G.TOP,"data");this.setZoomBarData(r)}return n}setZoomBarData(t){const n=t?this.sanitize(pn(t)):this.getDisplayData();let r=n;const{cartesianScales:i}=this.services;if(n&&i.domainAxisPosition&&i.rangeAxisPosition){const s=i.getDomainIdentifier(),a=i.getRangeIdentifier();let o=n.map(l=>l[s].getTime());o=Di(o).sort(),r=o.map(l=>{let c=0;const u={};return n.forEach(d=>{d[s].getTime()===l&&(c+=d[a])}),u[s]=new Date(l),u[a]=c,u})}this.set({zoomBarData:r})}getZoomBarData(){return this.get("zoomBarData")}sanitizeDateValues(t){const n=this.getOptions();if(!n.axes)return t;const r=[];return Object.keys(G).forEach(i=>{const s=G[i],a=n.axes[s];if(a&&a.scaleType===nt.TIME){const o=a.mapsTo;(o!==null||o!==void 0)&&r.push(o)}}),r.length>0&&t.forEach(i=>{r.forEach(s=>{y(i,s,"getTime")===null&&(i[s]=new Date(i[s]))})}),t}sanitize(t){return t=super.sanitize(t),t=this.sanitizeDateValues(t),t}}let jw=class extends lr{constructor(t){super(t)}getTabularDataArray(){const t=this.getDisplayData(),{number:n,code:r}=y(this.getOptions(),"locale");t.sort((a,o)=>a.source.localeCompare(o.source));const i=["Source","Target","Value"],s=[...t.map(a=>[a.source,a.target,a.value===null?"&ndash;":n(a.value,r)])];return super.formatTable({headers:i,cells:s})}},Ww=class extends lr{constructor(t){super(t)}getBoxQuartiles(t){return{q_25:Yl(t,.25),q_50:Yl(t,.5),q_75:Yl(t,.75)}}getBoxplotData(){const t=this.getOptions(),{groupMapsTo:n}=t.data,r=this.getGroupedData(),i=[];for(const{name:s,data:a}of r){const o=this.services.cartesianScales.getRangeIdentifier(),l=a.map(_=>_[o]).sort(Jn),c={[n]:s,counts:l,quartiles:this.getBoxQuartiles(l),outliers:null,whiskers:null},u=c.quartiles.q_25,d=c.quartiles.q_75,h=(d-u)*1.5,p=u-h,f=d+h,g=[],m=[];for(const _ of l)_<p||_>f?g.push(_):m.push(_);c.outliers=g;const v=In(m),x=tr(m);c.whiskers={min:v||In([c.quartiles.q_25,c.quartiles.q_50,c.quartiles.q_75]),max:x||tr([c.quartiles.q_25,c.quartiles.q_50,c.quartiles.q_75])},i.push(c)}return i}getTabularDataArray(){const t=this.getOptions(),{groupMapsTo:n}=t.data,r=this.getBoxplotData(),{number:i,code:s}=y(t,"locale"),a=["Group","Minimum","Q1","Median","Q3","Maximum","IQR","Outlier(s)"],o=[...r.map(l=>{let c=y(l,"outliers");return(c===null||c.length===0)&&(c=["&ndash;"]),[l[n],y(l,"whiskers","min")!==null?i(y(l,"whiskers","min"),s):"&ndash;",y(l,"quartiles","q_25")!==null?i(y(l,"quartiles","q_25"),s):"&ndash;",y(l,"quartiles","q_50")!==null?i(y(l,"quartiles","q_50"),s):"&ndash;",y(l,"quartiles","q_75")!==null?i(y(l,"quartiles","q_75"),s):"&ndash;",y(l,"whiskers","max")!==null?i(y(l,"whiskers","max"),s):"&ndash;",y(l,"quartiles","q_75")!==null&&y(l,"quartiles","q_25")!==null?(i(y(l,"quartiles","q_75")-y(l,"quartiles","q_25")),s):"&ndash;",c.map(u=>i(u,s)).join(",")]})];return super.formatTable({headers:a,cells:o})}setColorClassNames(){const t=y(this.getOptions(),"color","pairing");let n=y(t,"option");const r=up.pairingOptions;n=n<=r["1-color"]?n:1;const i=this.allDataGroups.map(()=>`1-${n}-1`);this.colorClassNames=ha().range(i).domain(this.allDataGroups)}},qw=class extends lr{constructor(t){super(t)}getMatchingRangeIndexForDatapoint(t){let n;for(let r=t.ranges.length-1;r>0;r--){const i=t.ranges[r];if(t.value>=i)return n=r,n}return 0}getTabularDataArray(){const t=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.services.cartesianScales.getRangeIdentifier(),{number:s,code:a}=y(n,"locale"),o=y(n,"bullet","performanceAreaTitles"),l=["Title","Group","Value","Target","Percentage","Performance"],c=[...t.map(u=>[u.title,u[r],u.value===null?"&ndash;":s(u.value,a),y(u,"marker")===null?"&ndash;":s(u.marker,a),y(u,"marker")===null?"&ndash;":`${s(Math.floor(u[i]/u.marker*100),a)}%`,o[this.getMatchingRangeIndexForDatapoint(u)]])];return super.formatTable({headers:l,cells:c})}},Yw=class extends rn{constructor(t){super(t),this._colorScale=void 0,this._matrix={}}getFillColor(t){return this._colorScale(t)}getCombinedData(){if(He(this._matrix)){const t=this.getOptions(),n=this.getDisplayData();!He(n)&&!He(t.geoData.objects.countries)&&(t.geoData.objects.countries.geometries.forEach(r=>{this._matrix[r.properties.NAME]=r}),n.forEach(r=>{this._matrix[r.name]?this._matrix[r.name].value=r.value||null:console.warn(`Data point ${r} is missing geographical data.`)}))}return this._matrix}getTabularDataArray(){const t=this.getDisplayData(),{number:n,code:r}=y(this.getOptions(),"locale"),i=["Country ID","Country Name","Value"],s=[...t.map(a=>[a.id===null?"&ndash;":a.id,a.name,a.value===null?"&ndash;":n(a.value,r)])];return super.formatTable({headers:i,cells:s})}getColorClassName(t){return`${t.originalClassName||""} ${this._colorScale(t.value)}`}setColorClassNames(){const t=y(this.getOptions(),"color");this._colorScale=Up(this.getDisplayData(),t)}},Xw=class extends rn{constructor(t){super(t),this.parentNode=!1,this.set({depth:2},{skipUpdate:!0})}setData(t){super.setData(t),this.setDataGroups(),t.length===1&&(this.parentNode=!0),this.setZoom()}setOptions(t){const n=this.getOptions(),r=at({},t,this.getZoomOptions(t));Vl(n,r);const i=this.getHierarchyLevel(),s=y(n,"circlePack","depth");this.set({options:at(n,r),depth:s&&s<4?s:i})}getZoomOptions(t){if(!this.getDisplayData())return{};const n=this.getDisplayData(),r=t||this.getOptions(),i=n.length===1&&y(n,0,"children")?y(n,0,"children"):n;let s=this.getHierarchyLevel();return i.some(a=>{if(a.children&&a.children.some(o=>o.children))return s=3,!1}),y(r,"canvasZoom","enabled")===!0&&s>2?{legend:{additionalItems:[{type:Wt.ZOOM,name:"Click to zoom"}]}}:null}setZoom(t){this.setOptions(this.getZoomOptions(t))}updateHierarchyLevel(t){this.set({depth:t})}getHierarchyLevel(){return this.get("depth")}hasParentNode(){return this.parentNode}setDataGroups(){const t=this.getData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=t.map(s=>{const a=s[r];return this.setChildrenDataGroup(s,a)});this.set({data:i},{skipUpdate:!0})}setChildrenDataGroup(t,n){return t.children?{...t,dataGroupName:n,children:t.children.map(r=>this.setChildrenDataGroup(r,n))}:{...t,dataGroupName:n}}getTabularDataArray(){const t=this.getDisplayData(),{number:n,code:r}=y(this.getOptions(),"locale"),i=["Child","Parent","Value"],s=[];return t.forEach(a=>{let o=a.value?a.value:0;a.children&&(o+=this.getChildrenDatums(a.children,a.name,s,0)),s.push(["&ndash;",a.name,n(o,r)])}),super.formatTable({headers:i,cells:s})}getChildrenDatums(t,n,r=[],i=0){const s=n,{number:a,code:o}=y(this.getOptions(),"locale");return t.forEach(l=>{const c=l.name;let u=0;if(l.children)l.children.length>0&&(typeof l.value=="number"&&(i+=l.value),u+=this.getChildrenDatums(l.children,c,r,u),r.push([c,s,a(u,o)]),i+=u);else{let d=0;typeof l.value=="number"&&(d=l.value,i+=l.value),r.push([l.name,s,a(d,o)])}}),i}},Zw=class extends rn{constructor(t){super(t)}getTabularData(t){const n=super.getTabularData(t);return t!==n&&n.forEach(r=>{r.key&&r.key!==r.group&&(r.group=r.key)}),n}getTabularDataArray(){const t=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{valueMapsTo:i}=n.pie,{number:s,code:a}=y(n,"locale"),o=["Group","Value"],l=[...t.map(c=>[c[r],c[i]===null?"&ndash;":s(c[i],a)])];return super.formatTable({headers:o,cells:l})}sanitize(t){return this.getTabularData(t).sort((n,r)=>r.value-n.value)}},Kw=class extends rn{constructor(t){super(t)}getDataGroups(){return super.getDataGroups().filter(t=>t.name!=="delta")}getTabularDataArray(){const t=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{number:i,code:s}=y(this.getOptions(),"locale"),a=["Group","Value"],o=[...t.map(l=>[l[r],l.value===null?"&ndash;":i(l.value,s)])];return super.formatTable({headers:a,cells:o})}},Qw=class extends lr{constructor(t){super(t),this.axisFlavor=yi.HOVERABLE,this._colorScale=void 0,this._domains=[],this._ranges=[],this._matrix={};const n=y(this.getOptions(),"axes");if(y(n,"left","scaleType")&&y(n,"left","scaleType")!==nt.LABELS||y(n,"right","scaleType")&&y(n,"right","scaleType")!==nt.LABELS||y(n,"top","scaleType")&&y(n,"top","scaleType")!==nt.LABELS||y(n,"bottom","scaleType")&&y(n,"bottom","scaleType")!==nt.LABELS)throw Error("Heatmap only supports label scaletypes.")}getValueDomain(){const t=Ve(this.getDisplayData(),r=>r.value),n=Fe().domain(t).nice().domain();if(n[0]>0)n[0]=0;else if(n[0]===0&&n[1]===0)return[0,1];return n[0]<0&&n[1]>0&&(Math.abs(n[0])>n[1]?n[1]=Math.abs(n[0]):n[0]=-n[1]),n}getFillColor(t){return this._colorScale(t)}getUniqueDomain(){if(He(this._domains)){const t=this.getDisplayData(),{cartesianScales:n}=this.services,r=n.getDomainIdentifier(),i=n.getMainXAxisPosition(),s=n.getCustomDomainValuesByposition(i);if(s)return s;this._domains=Array.from(new Set(t.map(a=>a[r])))}return this._domains}getUniqueRanges(){if(He(this._ranges)){const t=this.getDisplayData(),{cartesianScales:n}=this.services,r=n.getRangeIdentifier(),i=n.getMainYAxisPosition(),s=n.getCustomDomainValuesByposition(i);if(s)return s;this._ranges=Array.from(new Set(t.map(a=>a[r])))}return this._ranges}getMatrix(){if(He(this._matrix)){const t=this.getUniqueDomain(),n=this.getUniqueRanges(),r=this.services.cartesianScales.getDomainIdentifier(),i=this.services.cartesianScales.getRangeIdentifier(),s={};n.forEach(a=>{s[a]={value:null,index:-1}}),t.forEach(a=>{this._matrix[a]=pn(s)}),this.getDisplayData().forEach((a,o)=>{this._matrix[a[r]][a[i]]={value:a.value,index:o}})}return this._matrix}setData(t){const n=this.sanitize(pn(t)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),this._domains=[],this._ranges=[],this._matrix={},n}getMatrixAsArray(){He(this._matrix)&&this.getMatrix();const t=this.getUniqueDomain(),n=this.getUniqueRanges(),r=this.services.cartesianScales.getDomainIdentifier(),i=this.services.cartesianScales.getRangeIdentifier(),s=[];return t.forEach(a=>{n.forEach(o=>{const l={value:this._matrix[a][o].value,index:this._matrix[a][o].index};l[r]=a,l[i]=o,s.push(l)})}),s}getTabularDataArray(){const t=this.getDisplayData(),{primaryDomain:n,primaryRange:r}=this.assignRangeAndDomains(),{number:i,code:s}=y(this.getOptions(),"locale"),a=[n.label,r.label,"Value"],o=[...t.map(l=>[l[n.identifier]===null?"&ndash;":l[n.identifier],l[r.identifier]===null?"&ndash;":l[r.identifier],l.value===null?"&ndash;":i(l.value,s)])];return super.formatTable({headers:a,cells:o})}getColorClassName(t){return`${t.originalClassName} ${this._colorScale(t.value)}`}setColorClassNames(){const t=this.getOptions(),n=y(t,"color","gradient","colors"),r=!He(n);let i=y(t,"color","pairing","option");const s=this.getValueDomain(),a=s[0]<0&&s[1]>0?"diverge":"mono";(i<1&&i>4&&a==="mono"||i<1&&i>2&&a==="diverge")&&(i=1);const o=r?n:[];if(!r){const c=a==="diverge"?17:11;for(let u=1;u<c+1;u++)o.push(`fill-${a}-${i}-${u}`)}this._colorScale=Ul().domain(s).range(o);const l=y(this.getOptions(),"color");this._colorScale=Up(this.getDisplayData(),l)}},Jw=class extends lr{getTabularDataArray(){const t=this.getOptions(),{groupMapsTo:n}=t.data,{number:r,code:i}=y(this.getOptions(),"locale"),s=this.getBinnedStackedData(),a=[vt(t,"bins.rangeLabel")||"Range",...s.map(l=>vt(l,`0.${n}`))],o=[...vt(s,0).map((l,c)=>[`${r(Number(vt(l,"data.x0")),i)}  ${r(Number(vt(l,"data.x1")),i)}`,...s.map(u=>r(vt(u[c],`data.${vt(u[c],n)}`),i))])];return super.formatTable({headers:a,cells:o})}};class t$ extends rn{constructor(t){super(t)}getMaximumDomain(t){return t.reduce((n,r)=>n+r.value,0)}getFillColor(t){const n=this.getOptions(),r=y(n,"color","scale"),i=this.getStatus();return r||!i?super.getFillColor(t):null}getStatus(){const t=this.getOptions(),n=y(this.getDisplayData())?.reduce((s,a)=>s+a.value,0)??0,r=y(t,"meter","proportional")?n:n>100?100:n,i=y(t,"meter","status","ranges");if(i){const s=i.filter(a=>a.range[0]<=r&&r<=a.range[1]);if(s.length>0)return s[0].status}return null}getTabularDataArray(){const t=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getStatus(),s=y(n,"meter","proportional"),{number:a,code:o}=y(this.getOptions(),"locale");let l=[],c=[],u;if(s===null){u=100;const d=t[0];l=["Group","Value",...i?["Status"]:[]],c=[[d[r],d.value===null?"&ndash;":a(d.value,o),...i?[i]:[]]]}else u=y(s,"total")||this.getMaximumDomain(t),l=["Group","Value","Percentage of total"],c=[...t.map(h=>{let p;h.value!==null&&h.value!==void 0?p=Number(h.value):p=0;const f=Number((h.value/u*100).toFixed(2));return[h[r],h.value===null?"&ndash;":a(p,o),a(f,o)+" %"]})];return super.formatTable({headers:l,cells:c})}}class e$ extends lr{constructor(t){super(t)}getTabularDataArray(){const t=this.getOptions(),n=this.getGroupedData(),{angle:r,value:i}=y(t,"radar","axes"),{number:s,code:a}=y(t,"locale"),o=y(n,"0","data").map(u=>u[r]),l=["Group",...o],c=[...n.map(u=>[u.name,...o.map((d,h)=>y(u,"data",h,i)!==null?s(y(u,"data",h,i),a):"&ndash;")])];return super.formatTable({headers:l,cells:c})}}let n$=class extends rn{constructor(t){super(t)}getTabularDataArray(){const t=this.getDisplayData(),n=["Child","Parent"],r=[];return t.forEach(i=>{this.getChildrenDatums(i,r),r.push([i.name,"&ndash;"])}),super.formatTable({headers:n,cells:r})}getChildrenDatums(t,n=[]){t.children&&t.children.length>0&&t.children.forEach(r=>{this.getChildrenDatums(r,n),n.push([r.name,t.name])})}};class r$ extends rn{constructor(t){super(t)}getTabularDataArray(){const t=this.getDisplayData(),{number:n,code:r}=y(this.getOptions(),"locale"),i=["Child","Group","Value"],s=[];return t.forEach(a=>{Array.isArray(a.children)?a.children.forEach(o=>{s.push([o.name,a.name,o.value===null?"&ndash;":n(o.value,r)])}):y(a.name)!==null&&y(a.value)&&s.push(["",a.name,n(a.value,r)])}),super.formatTable({headers:i,cells:s})}}let i$=class extends rn{constructor(t){super(t)}getTabularDataArray(){const t=this.getDisplayData(),n=this.getOptions(),{fontSizeMapsTo:r,wordMapsTo:i}=n.wordCloud,{groupMapsTo:s}=n.data,{code:a,number:o}=y(n,"locale"),l=[n.tooltip.wordLabel,"Group",n.tooltip.valueLabel],c=[...t.map(u=>[u[i],u[s],o(u[r],a)])];return super.formatTable({headers:l,cells:c})}};var s$=/\s/;function a$(e){for(var t=e.length;t--&&s$.test(e.charAt(t)););return t}var o$=/^\s+/;function l$(e){return e&&e.slice(0,a$(e)+1).replace(o$,"")}var zp=NaN,c$=/^[-+]0x[0-9a-f]+$/i,u$=/^0b[01]+$/i,h$=/^0o[0-7]+$/i,d$=parseInt;function zr(e){if(typeof e=="number")return e;if(ks(e))return zp;if(Ce(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ce(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=l$(e);var n=u$.test(e);return n||h$.test(e)?d$(e.slice(2),n?2:8):c$.test(e)?zp:+e}var Zl=function(){return Ue.Date.now()},p$="Expected a function",f$=Math.max,m$=Math.min;function va(e,t,n){var r,i,s,a,o,l,c=0,u=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(p$);t=zr(t)||0,Ce(n)&&(u=!!n.leading,d="maxWait"in n,s=d?f$(zr(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function p(S){var $=r,k=i;return r=i=void 0,c=S,a=e.apply(k,$),a}function f(S){return c=S,o=setTimeout(v,t),u?p(S):a}function g(S){var $=S-l,k=S-c,C=t-$;return d?m$(C,s-k):C}function m(S){var $=S-l,k=S-c;return l===void 0||$>=t||$<0||d&&k>=s}function v(){var S=Zl();if(m(S))return x(S);o=setTimeout(v,g(S))}function x(S){return o=void 0,h&&r?p(S):(r=i=void 0,a)}function _(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function E(){return o===void 0?a:x(Zl())}function b(){var S=Zl(),$=m(S);if(r=arguments,i=this,l=S,$){if(o===void 0)return f(l);if(d)return clearTimeout(o),o=setTimeout(v,t),p(l)}return o===void 0&&(o=setTimeout(v,t)),a}return b.cancel=_,b.flush=E,b}function g$(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function I(e){return typeof e=="string"?new ye([[document.querySelector(e)]],[document.documentElement]):new ye([[e]],_d)}function Fr(){var e=ha().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,a,o=!1,l=0,c=0,u=.5;delete e.unknown;function d(){var h=t().length,p=i<r,f=p?i:r,g=p?r:i;s=(g-f)/Math.max(1,h-l+c*2),o&&(s=Math.floor(s)),f+=(g-f-s*(h-l))*u,a=s*(1-l),o&&(f=Math.round(f),a=Math.round(a));var m=g$(h).map(function(v){return f+s*v});return n(p?m.reverse():m)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,d()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,d()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},e.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},e.copy=function(){return Fr(t(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},Pr.apply(d(),arguments)}function Fp(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}const Kl=new Date,Ql=new Date;function qt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),t(s,o),e(s);while(c<s&&s<a);return l},i.filter=s=>qt(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););}),n&&(i.count=(s,a)=>(Kl.setTime(+s),Ql.setTime(+a),e(Kl),e(Ql),Math.floor(n(Kl,Ql))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const ya=qt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ya.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ya),ya.range;const _n=1e3,ke=_n*60,En=ke*60,On=En*24,Jl=On*7,jp=On*30,tc=On*365,jr=qt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_n)},(e,t)=>(t-e)/_n,e=>e.getUTCSeconds());jr.range;const ec=qt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_n)},(e,t)=>{e.setTime(+e+t*ke)},(e,t)=>(t-e)/ke,e=>e.getMinutes());ec.range,qt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ke)},(e,t)=>(t-e)/ke,e=>e.getUTCMinutes()).range;const nc=qt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_n-e.getMinutes()*ke)},(e,t)=>{e.setTime(+e+t*En)},(e,t)=>(t-e)/En,e=>e.getHours());nc.range,qt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*En)},(e,t)=>(t-e)/En,e=>e.getUTCHours()).range;const Zi=qt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ke)/On,e=>e.getDate()-1);Zi.range;const rc=qt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/On,e=>e.getUTCDate()-1);rc.range,qt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/On,e=>Math.floor(e/On)).range;function cr(e){return qt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ke)/Jl)}const ba=cr(0),xa=cr(1),v$=cr(2),y$=cr(3),Wr=cr(4),b$=cr(5),x$=cr(6);ba.range,xa.range,v$.range,y$.range,Wr.range,b$.range,x$.range;function ur(e){return qt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Jl)}const Wp=ur(0),_a=ur(1),_$=ur(2),E$=ur(3),qr=ur(4),O$=ur(5),S$=ur(6);Wp.range,_a.range,_$.range,E$.range,qr.range,O$.range,S$.range;const ic=qt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ic.range,qt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()).range;const Sn=qt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Sn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),Sn.range;const hr=qt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());hr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),hr.range;function T$(e,t,n,r,i,s){const a=[[jr,1,_n],[jr,5,5*_n],[jr,15,15*_n],[jr,30,30*_n],[s,1,ke],[s,5,5*ke],[s,15,15*ke],[s,30,30*ke],[i,1,En],[i,3,3*En],[i,6,6*En],[i,12,12*En],[r,1,On],[r,2,2*On],[n,1,Jl],[t,1,jp],[t,3,3*jp],[e,1,tc]];function o(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const p=d&&typeof d.range=="function"?d:l(c,u,d),f=p?p.range(c,+u+1):[];return h?f.reverse():f}function l(c,u,d){const h=Math.abs(u-c)/d,p=fl(([,,m])=>m).right(a,h);if(p===a.length)return e.every(gl(c/tc,u/tc,d));if(p===0)return ya.every(Math.max(gl(c,u,d),1));const[f,g]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return f.every(g)}return[o,l]}const[w$,$$]=T$(Sn,ic,ba,Zi,nc,ec);function sc(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ac(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ki(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function M$(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=Qi(i),u=Ji(i),d=Qi(s),h=Ji(s),p=Qi(a),f=Ji(a),g=Qi(o),m=Ji(o),v=Qi(l),x=Ji(l),_={a:L,A:D,b:U,B:K,c:null,d:Qp,e:Qp,f:K$,g:oM,G:cM,H:Y$,I:X$,j:Z$,L:Jp,m:Q$,M:J$,p:W,q:j,Q:af,s:of,S:tM,u:eM,U:nM,V:rM,w:iM,W:sM,x:null,X:null,y:aM,Y:lM,Z:uM,"%":sf},E={a:X,A:ct,b:J,B:Y,c:null,d:ef,e:ef,f:fM,g:SM,G:wM,H:hM,I:dM,j:pM,L:nf,m:mM,M:gM,p:et,q:ut,Q:af,s:of,S:vM,u:yM,U:bM,V:xM,w:_M,W:EM,x:null,X:null,y:OM,Y:TM,Z:$M,"%":sf},b={a:R,A:M,b:H,B:P,c:B,d:Zp,e:Zp,f:F$,g:Xp,G:Yp,H:Kp,I:Kp,j:H$,L:z$,m:B$,M:V$,p:C,q:U$,Q:W$,s:q$,S:G$,u:D$,U:R$,V:I$,w:k$,W:N$,x:O,X:w,y:Xp,Y:Yp,Z:P$,"%":j$};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),E.x=S(n,E),E.X=S(r,E),E.c=S(t,E);function S(F,q){return function(Z){var V=[],dt=-1,ot=0,It=F.length,Ht,rt,Et;for(Z instanceof Date||(Z=new Date(+Z));++dt<It;)F.charCodeAt(dt)===37&&(V.push(F.slice(ot,dt)),(rt=qp[Ht=F.charAt(++dt)])!=null?Ht=F.charAt(++dt):rt=Ht==="e"?" ":"0",(Et=q[Ht])&&(Ht=Et(Z,rt)),V.push(Ht),ot=dt+1);return V.push(F.slice(ot,dt)),V.join("")}}function $(F,q){return function(Z){var V=Ki(1900,void 0,1),dt=k(V,F,Z+="",0),ot,It;if(dt!=Z.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(q&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(ot=ac(Ki(V.y,0,1)),It=ot.getUTCDay(),ot=It>4||It===0?_a.ceil(ot):_a(ot),ot=rc.offset(ot,(V.V-1)*7),V.y=ot.getUTCFullYear(),V.m=ot.getUTCMonth(),V.d=ot.getUTCDate()+(V.w+6)%7):(ot=sc(Ki(V.y,0,1)),It=ot.getDay(),ot=It>4||It===0?xa.ceil(ot):xa(ot),ot=Zi.offset(ot,(V.V-1)*7),V.y=ot.getFullYear(),V.m=ot.getMonth(),V.d=ot.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),It="Z"in V?ac(Ki(V.y,0,1)).getUTCDay():sc(Ki(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(It+5)%7:V.w+V.U*7-(It+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,ac(V)):sc(V)}}function k(F,q,Z,V){for(var dt=0,ot=q.length,It=Z.length,Ht,rt;dt<ot;){if(V>=It)return-1;if(Ht=q.charCodeAt(dt++),Ht===37){if(Ht=q.charAt(dt++),rt=b[Ht in qp?q.charAt(dt++):Ht],!rt||(V=rt(F,Z,V))<0)return-1}else if(Ht!=Z.charCodeAt(V++))return-1}return V}function C(F,q,Z){var V=c.exec(q.slice(Z));return V?(F.p=u.get(V[0].toLowerCase()),Z+V[0].length):-1}function R(F,q,Z){var V=p.exec(q.slice(Z));return V?(F.w=f.get(V[0].toLowerCase()),Z+V[0].length):-1}function M(F,q,Z){var V=d.exec(q.slice(Z));return V?(F.w=h.get(V[0].toLowerCase()),Z+V[0].length):-1}function H(F,q,Z){var V=v.exec(q.slice(Z));return V?(F.m=x.get(V[0].toLowerCase()),Z+V[0].length):-1}function P(F,q,Z){var V=g.exec(q.slice(Z));return V?(F.m=m.get(V[0].toLowerCase()),Z+V[0].length):-1}function B(F,q,Z){return k(F,t,q,Z)}function O(F,q,Z){return k(F,n,q,Z)}function w(F,q,Z){return k(F,r,q,Z)}function L(F){return a[F.getDay()]}function D(F){return s[F.getDay()]}function U(F){return l[F.getMonth()]}function K(F){return o[F.getMonth()]}function W(F){return i[+(F.getHours()>=12)]}function j(F){return 1+~~(F.getMonth()/3)}function X(F){return a[F.getUTCDay()]}function ct(F){return s[F.getUTCDay()]}function J(F){return l[F.getUTCMonth()]}function Y(F){return o[F.getUTCMonth()]}function et(F){return i[+(F.getUTCHours()>=12)]}function ut(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var q=S(F+="",_);return q.toString=function(){return F},q},parse:function(F){var q=$(F+="",!1);return q.toString=function(){return F},q},utcFormat:function(F){var q=S(F+="",E);return q.toString=function(){return F},q},utcParse:function(F){var q=$(F+="",!0);return q.toString=function(){return F},q}}}var qp={"-":"",_:" ",0:"0"},Yt=/^\s*\d+/,C$=/^%/,A$=/[\\^$*+?|[\]().{}]/g;function yt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function L$(e){return e.replace(A$,"\\$&")}function Qi(e){return new RegExp("^(?:"+e.map(L$).join("|")+")","i")}function Ji(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function k$(e,t,n){var r=Yt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function D$(e,t,n){var r=Yt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function R$(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function I$(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function N$(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Yp(e,t,n){var r=Yt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xp(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function P$(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function U$(e,t,n){var r=Yt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function B$(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Zp(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function H$(e,t,n){var r=Yt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Kp(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function V$(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function G$(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function z$(e,t,n){var r=Yt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function F$(e,t,n){var r=Yt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function j$(e,t,n){var r=C$.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function W$(e,t,n){var r=Yt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function q$(e,t,n){var r=Yt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Qp(e,t){return yt(e.getDate(),t,2)}function Y$(e,t){return yt(e.getHours(),t,2)}function X$(e,t){return yt(e.getHours()%12||12,t,2)}function Z$(e,t){return yt(1+Zi.count(Sn(e),e),t,3)}function Jp(e,t){return yt(e.getMilliseconds(),t,3)}function K$(e,t){return Jp(e,t)+"000"}function Q$(e,t){return yt(e.getMonth()+1,t,2)}function J$(e,t){return yt(e.getMinutes(),t,2)}function tM(e,t){return yt(e.getSeconds(),t,2)}function eM(e){var t=e.getDay();return t===0?7:t}function nM(e,t){return yt(ba.count(Sn(e)-1,e),t,2)}function tf(e){var t=e.getDay();return t>=4||t===0?Wr(e):Wr.ceil(e)}function rM(e,t){return e=tf(e),yt(Wr.count(Sn(e),e)+(Sn(e).getDay()===4),t,2)}function iM(e){return e.getDay()}function sM(e,t){return yt(xa.count(Sn(e)-1,e),t,2)}function aM(e,t){return yt(e.getFullYear()%100,t,2)}function oM(e,t){return e=tf(e),yt(e.getFullYear()%100,t,2)}function lM(e,t){return yt(e.getFullYear()%1e4,t,4)}function cM(e,t){var n=e.getDay();return e=n>=4||n===0?Wr(e):Wr.ceil(e),yt(e.getFullYear()%1e4,t,4)}function uM(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+yt(t/60|0,"0",2)+yt(t%60,"0",2)}function ef(e,t){return yt(e.getUTCDate(),t,2)}function hM(e,t){return yt(e.getUTCHours(),t,2)}function dM(e,t){return yt(e.getUTCHours()%12||12,t,2)}function pM(e,t){return yt(1+rc.count(hr(e),e),t,3)}function nf(e,t){return yt(e.getUTCMilliseconds(),t,3)}function fM(e,t){return nf(e,t)+"000"}function mM(e,t){return yt(e.getUTCMonth()+1,t,2)}function gM(e,t){return yt(e.getUTCMinutes(),t,2)}function vM(e,t){return yt(e.getUTCSeconds(),t,2)}function yM(e){var t=e.getUTCDay();return t===0?7:t}function bM(e,t){return yt(Wp.count(hr(e)-1,e),t,2)}function rf(e){var t=e.getUTCDay();return t>=4||t===0?qr(e):qr.ceil(e)}function xM(e,t){return e=rf(e),yt(qr.count(hr(e),e)+(hr(e).getUTCDay()===4),t,2)}function _M(e){return e.getUTCDay()}function EM(e,t){return yt(_a.count(hr(e)-1,e),t,2)}function OM(e,t){return yt(e.getUTCFullYear()%100,t,2)}function SM(e,t){return e=rf(e),yt(e.getUTCFullYear()%100,t,2)}function TM(e,t){return yt(e.getUTCFullYear()%1e4,t,4)}function wM(e,t){var n=e.getUTCDay();return e=n>=4||n===0?qr(e):qr.ceil(e),yt(e.getUTCFullYear()%1e4,t,4)}function $M(){return"+0000"}function sf(){return"%"}function af(e){return+e}function of(e){return Math.floor(+e/1e3)}var Yr,lf;MM({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function MM(e){return Yr=M$(e),lf=Yr.format,Yr.parse,Yr.utcFormat,Yr.utcParse,Yr}function CM(e){return new Date(e)}function AM(e){return e instanceof Date?+e:+new Date(+e)}function cf(e,t,n,r,i,s,a,o,l,c){var u=lp(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),x=c("%b %d"),_=c("%B"),E=c("%Y");function b(S){return(l(S)<S?p:o(S)<S?f:a(S)<S?g:s(S)<S?m:r(S)<S?i(S)<S?v:x:n(S)<S?_:E)(S)}return u.invert=function(S){return new Date(d(S))},u.domain=function(S){return arguments.length?h(Array.from(S,AM)):h().map(CM)},u.ticks=function(S){var $=h();return e($[0],$[$.length-1],S??10)},u.tickFormat=function(S,$){return $==null?b:c($)},u.nice=function(S){var $=h();return(!S||typeof S.range!="function")&&(S=t($[0],$[$.length-1],S??10)),S?h(Fp($,S)):u},u.copy=function(){return Pl(u,cf(e,t,n,r,i,s,a,o,l,c))},u}function uf(){return Pr.apply(cf(w$,$$,Sn,ic,ba,Zi,nc,ec,jr,lf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const hf=Math.abs,te=Math.atan2,dr=Math.cos,LM=Math.max,oc=Math.min,sn=Math.sin,Xr=Math.sqrt,ee=1e-12,ts=Math.PI,Ea=ts/2,Oa=2*ts;function kM(e){return e>1?0:e<-1?ts:Math.acos(e)}function df(e){return e>=1?Ea:e<=-1?-Ea:Math.asin(e)}function pf(e){this._context=e}pf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Sa(e){return new pf(e)}function Bn(){}function ff(e){this._context=e}ff.prototype={areaStart:Bn,areaEnd:Bn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function mf(e){return new ff(e)}function DM(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const RM=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Tn(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function Ta(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function IM(e){const t=Ta(e,"border-left-width"),n=Ta(e,"border-right-width");return e.clientWidth+t+n}function NM(e){const t=Ta(e,"border-top-width"),n=Ta(e,"border-bottom-width");return e.clientHeight+t+n}function gf(e,t={}){const n=t.width||IM(e),r=t.height||NM(e);return{width:n,height:r}}function PM(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const _e=16384;function UM(e){(e.width>_e||e.height>_e)&&(e.width>_e&&e.height>_e?e.width>e.height?(e.height*=_e/e.width,e.width=_e):(e.width*=_e/e.height,e.height=_e):e.width>_e?(e.height*=_e/e.width,e.width=_e):(e.width*=_e/e.height,e.height=_e))}function wa(e){return new Promise((t,n)=>{const r=new Image;r.decode=()=>t(r),r.onload=()=>t(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function BM(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function HM(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),BM(i)}const pe=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||pe(n,t)};function VM(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function GM(e){return Tn(e).map(t=>{const n=e.getPropertyValue(t),r=e.getPropertyPriority(t);return`${t}: ${n}${r?" !important":""};`}).join(" ")}function zM(e,t,n){const r=`.${e}:${t}`,i=n.cssText?VM(n):GM(n);return document.createTextNode(`${r}{${i}}`)}function vf(e,t,n){const r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(i===""||i==="none")return;const s=RM();try{t.className=`${t.className} ${s}`}catch{return}const a=document.createElement("style");a.appendChild(zM(s,n,r)),t.appendChild(a)}function FM(e,t){vf(e,t,":before"),vf(e,t,":after")}const yf="application/font-woff",bf="image/jpeg",jM={woff:yf,woff2:yf,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:bf,jpeg:bf,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function WM(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function lc(e){const t=WM(e).toLowerCase();return jM[t]||""}function qM(e){return e.split(/,/)[1]}function cc(e){return e.search(/^(data:)/)!==-1}function YM(e,t){return`data:${t};base64,${e}`}async function xf(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,a)=>{const o=new FileReader;o.onerror=a,o.onloadend=()=>{try{s(n({res:r,result:o.result}))}catch(l){a(l)}},o.readAsDataURL(i)})}const uc={};function XM(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function hc(e,t,n){const r=XM(e,t,n.includeQueryParams);if(uc[r]!=null)return uc[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await xf(e,n.fetchRequestInit,({res:a,result:o})=>(t||(t=a.headers.get("Content-Type")||""),qM(o)));i=YM(s,t)}catch(s){i=n.imagePlaceholder||"";let a=`Failed to fetch resource: ${e}`;s&&(a=typeof s=="string"?s:s.message),a&&console.warn(a)}return uc[r]=i,i}async function ZM(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):wa(t)}async function KM(e,t){if(e.currentSrc){const s=document.createElement("canvas"),a=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,a?.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return wa(o)}const n=e.poster,r=lc(n),i=await hc(n,r,t);return wa(i)}async function QM(e){var t;try{if(!((t=e?.contentDocument)===null||t===void 0)&&t.body)return await $a(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}async function JM(e,t){return pe(e,HTMLCanvasElement)?ZM(e):pe(e,HTMLVideoElement)?KM(e,t):pe(e,HTMLIFrameElement)?QM(e):e.cloneNode(!1)}const t2=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";async function e2(e,t,n){var r,i;let s=[];return t2(e)&&e.assignedNodes?s=Tn(e.assignedNodes()):pe(e,HTMLIFrameElement)&&!((r=e.contentDocument)===null||r===void 0)&&r.body?s=Tn(e.contentDocument.body.childNodes):s=Tn(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||pe(e,HTMLVideoElement)||await s.reduce((a,o)=>a.then(()=>$a(o,n)).then(l=>{l&&t.appendChild(l)}),Promise.resolve()),t}function n2(e,t){const n=t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Tn(r).forEach(i=>{let s=r.getPropertyValue(i);i==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),pe(e,HTMLIFrameElement)&&i==="display"&&s==="inline"&&(s="block"),i==="d"&&t.getAttribute("d")&&(s=`path(${t.getAttribute("d")})`),n.setProperty(i,s,r.getPropertyPriority(i))})}function r2(e,t){pe(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),pe(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function i2(e,t){if(pe(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function s2(e,t){return pe(t,Element)&&(n2(e,t),FM(e,t),r2(e,t),i2(e,t)),t}async function a2(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const o=e.querySelector(a),l=document.querySelector(a);!o&&l&&!r[a]&&(r[a]=await $a(l,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg");a.setAttribute("xmlns",s),a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.overflow="hidden",a.style.display="none";const o=document.createElementNS(s,"defs");a.appendChild(o);for(let l=0;l<i.length;l++)o.appendChild(i[l]);e.appendChild(a)}return e}async function $a(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>JM(r,t)).then(r=>e2(e,r,t)).then(r=>s2(e,r)).then(r=>a2(r,t))}const _f=/url\((['"]?)([^'"]+?)\1\)/g,o2=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,l2=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function c2(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function u2(e){const t=[];return e.replace(_f,(n,r,i)=>(t.push(i),n)),t.filter(n=>!cc(n))}async function h2(e,t,n,r,i){try{const s=n?DM(t,n):t,a=lc(t);let o;return i||(o=await hc(s,a,r)),e.replace(c2(t),`$1${o}$3`)}catch{}return e}function d2(e,{preferredFontFormat:t}){return t?e.replace(l2,n=>{for(;;){const[r,,i]=o2.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function Ef(e){return e.search(_f)!==-1}async function Of(e,t,n){if(!Ef(e))return e;const r=d2(e,n);return u2(r).reduce((i,s)=>i.then(a=>h2(a,s,t,n)),Promise.resolve(r))}async function Ma(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await Of(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function p2(e,t){await Ma("background",e,t)||await Ma("background-image",e,t),await Ma("mask",e,t)||await Ma("mask-image",e,t)}async function f2(e,t){const n=pe(e,HTMLImageElement);if(!(n&&!cc(e.src))&&!(pe(e,SVGImageElement)&&!cc(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await hc(r,lc(r),t);await new Promise((s,a)=>{e.onload=s,e.onerror=a;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function m2(e,t){const n=Tn(e.childNodes).map(r=>Sf(r,t));await Promise.all(n).then(()=>e)}async function Sf(e,t){pe(e,Element)&&(await p2(e,t),await f2(e,t),await m2(e,t))}function g2(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const Tf={};async function wf(e){let t=Tf[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},Tf[e]=t,t}async function $f(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let a=s.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,e.url).href),xf(a,t.fetchRequestInit,({result:o})=>(n=n.replace(s,`url(${o})`),[s,o]))});return Promise.all(i).then(()=>n)}function Mf(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;t.push(l[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(a,"gi");for(;;){let l=s.exec(r);if(l===null){if(l=o.exec(r),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(l[0])}return t}async function v2(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{Tn(i.cssRules||[]).forEach((s,a)=>{if(s.type===CSSRule.IMPORT_RULE){let o=a+1;const l=s.href,c=wf(l).then(u=>$f(u,t)).then(u=>Mf(u).forEach(d=>{try{i.insertRule(d,d.startsWith("@import")?o+=1:i.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:d,error:h})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(c)}})}catch(s){const a=e.find(o=>o.href==null)||document.styleSheets[0];i.href!=null&&r.push(wf(i.href).then(o=>$f(o,t)).then(o=>Mf(o).forEach(l=>{a.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{Tn(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function y2(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Ef(t.style.getPropertyValue("src")))}async function b2(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Tn(e.ownerDocument.styleSheets),r=await v2(n,t);return y2(r)}async function x2(e,t){const n=await b2(e,t);return(await Promise.all(n.map(r=>{const i=r.parentStyleSheet?r.parentStyleSheet.href:null;return Of(r.cssText,i,t)}))).join(`
`)}async function _2(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await x2(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function E2(e,t={}){const{width:n,height:r}=gf(e,t),i=await $a(e,t,!0);return await _2(i,t),await Sf(i,t),g2(i,t),await HM(i,n,r)}async function Cf(e,t={}){const{width:n,height:r}=gf(e,t),i=await E2(e,t),s=await wa(i),a=document.createElement("canvas"),o=a.getContext("2d"),l=t.pixelRatio||PM(),c=t.canvasWidth||n,u=t.canvasHeight||r;return a.width=c*l,a.height=u*l,t.skipAutoScale||UM(a),a.style.width=`${c}`,a.style.height=`${u}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,a.width,a.height)),o.drawImage(s,0,0,a.width,a.height),a}async function O2(e,t={}){return(await Cf(e,t)).toDataURL()}async function S2(e,t={}){return(await Cf(e,t)).toDataURL("image/jpeg",t.quality||1)}let wn=class{constructor(t,n){this.model=t,this.services=n,this.init()}init(){}update(){}setModel(t){this.model=t}setServices(t){this.services=t}};const T2="DONT_STYLE_ME_css_styles_verifier";let N=class Uu extends wn{constructor(t,n){super(t,n)}static getHTMLElementSize(t){return{width:t.clientWidth,height:t.clientHeight}}static getSVGElementSize(t,n={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){t.attr||(t=I(t));const r={width:0,height:0},i=h=>{h&&Object.keys(r).forEach(p=>{if(h[p]){const f=h[p],g=parseFloat(f);f&&g>r[p]&&(""+f).indexOf("%")===-1&&(r[p]=g)}})},s={width:t.attr("width"),height:t.attr("height")},a=t.node();let o,l,c,u;try{typeof a.getBBox=="function"&&(o=a.getBBox(),l={width:o.width,height:o.height})}catch(h){console.error(h)}try{typeof a?.getBoundingClientRect=="function"&&(c=a.getBoundingClientRect(),u={width:c.width,height:c.height})}catch(h){console.error(h)}let d;if(a instanceof SVGSVGElement&&(d={width:a.clientWidth,height:a.clientHeight}),n){if(n.useAttrs&&(i(s),r.width>0&&r.height>0))return r;if(n.useClientDimensions&&(i(d),r.width>0&&r.height>0))return d;if(n.useBBox&&(i(l),r.width>0&&r.height>0))return l;if(n.useBoundingRect&&(i(u),r.width>0&&r.height>0))return u}try{const h={width:y(t.node(),"width","baseVal","value"),height:y(t.node(),"height","baseVal","value")};i(h)}catch{i(d),i(l),i(s)}return r}static appendOrSelect(t,n){const r=t.select(`${n}`);if(r.empty()){let i=n.split("#"),s,a;return i.length===2?(s=i[0],i=i[1].split("."),a=i[0]):(i=n.split("."),s=i[0]),t.append(s).attr("id",a).attr("class",i.slice(1).join(" "))}return r}init(){this.initializeID(),this.styleHolderElement(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}getElementOffset(t,n=!1){const r={left:0,top:0},i=t.getBoundingClientRect(),s=n?{left:0,top:0}:this.getHolder().getBoundingClientRect();try{r.left=i.left-s.left,r.top=i.top-s.top}catch(a){console.error(a)}return r}generateElementIDString(t){return`chart-${this.chartID}-${t}`}initializeID(){const t=this.model.getOptions().chartId;t?this.chartID=t:this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)}addMainContainer(){const t=this.model.getOptions(),n=y(t,"style","prefix"),r=I(this.getHolder()).append("div").classed(`${de}--${n}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");r.append("g").attr("class",T2),this.mainContainer=r.node()}update(){this.styleHolderElement()}styleHolderElement(){const t=this.getHolder(),{width:n,height:r,theme:i}=this.model.getOptions();n!==this.width&&(t.style.width=n,this.width=n),r!==this.height&&(t.style.height=r,this.height=r),I(this.getHolder()).classed(`${de}--chart-holder`,!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){const t=this,n=this.model.getOptions(),r=this.getHolder(),i=I(r);i.classed("filled",!0),S2(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){let a="myChart";const o=y(n,"fileDownload","fileName");typeof o=="function"?a=o("jpg"):typeof o=="string"&&(a=o),t.services.files?.downloadImage(s,`${a}.jpg`),i.classed("filled",!1)})}exportToPNG(){const t=this,n=this.model.getOptions(),r=this.getHolder(),i=I(r);i.classed("filled",!0),O2(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){let a="myChart";const o=y(n,"fileDownload","fileName");typeof o=="function"?a=o("png"):typeof o=="string"&&(a=o),t.services.files?.downloadImage(s,`${a}.png`),i.classed("filled",!1)}).catch(function(s){console.error("oops, something went wrong!",s)})}isFullScreenMode(){return I(this.getHolder()).classed("fullscreen")}toggleFullscreen(){const t=this.getHolder();I(t).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{const t=I(this.getHolder()),n=t.classed("fullscreen");t.classed("fullscreen",!n)})}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:t}=Uu.getSVGElementSize(I(this.mainContainer),{useBBox:!0}),n=I(this.mainContainer).attr("class"),r=I(this.mainContainer).selectAll(`.${n} > svg`);let i=0;r.nodes().forEach(function(s){i+=Number(Uu.getSVGElementSize(I(s),{useBBox:!0}).height)}),i<=t?I(this.mainContainer).attr("height",i):I(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const t=this.getHolder();t&&I(t).on("mouseover",()=>{this.services.events?.dispatchEvent(T.Chart.MOUSEOVER)}).on("mouseout",()=>{this.services.events?.dispatchEvent(T.Chart.MOUSEOUT)})}addResizeListener(){const t=this.getHolder();if(!t)return;let n=t.clientWidth,r=t.clientHeight;const i=va(()=>{t&&(Math.abs(n-t.clientWidth)>1||Math.abs(r-t.clientHeight)>1)&&(n=t.clientWidth,r=t.clientHeight,this.services.events?.dispatchEvent(T.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(t)}},dc=class n1 extends wn{static appendOrUpdateLinearGradient(t){let n=t.svg.select(`defs linearGradient#${t.id}`);n.empty()&&(n=t.svg.append("defs").append("linearGradient").attr("id",t.id).attr("x1",t.x1).attr("x2",t.x2).attr("y1",t.y1).attr("y2",t.y2)),n.selectAll("stop").remove(),n.selectAll("stop").data(t.stops).enter().append("stop").attr("offset",r=>r.offset).style("stop-color",r=>r.color).style("stop-opacity",r=>r.opacity)}static getOffsetRatio(t){return(Math.abs(t[1])*100/Math.abs(t[0]-t[1])).toFixed(2)+"%"}static getStops(t,n){const r=t[0]<0&&t[1]>0;let i=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return r&&(i=[{offset:"0%",color:n,opacity:"0.6"},{offset:n1.getOffsetRatio(t),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),i}};function Af(e){const t=w2(Lf(e),360);return Hn(t,[0,10])||Hn(t,[350,0])?{textAnchor:Ke.START,dominantBaseline:Qe.MIDDLE}:Hn(t,[10,80])?{textAnchor:Ke.START,dominantBaseline:Qe.HANGING}:Hn(t,[80,100])?{textAnchor:Ke.MIDDLE,dominantBaseline:Qe.HANGING}:Hn(t,[100,170])?{textAnchor:Ke.END,dominantBaseline:Qe.HANGING}:Hn(t,[170,190])?{textAnchor:Ke.END,dominantBaseline:Qe.MIDDLE}:Hn(t,[190,260])?{textAnchor:Ke.END,dominantBaseline:Qe.BASELINE}:Hn(t,[260,280])?{textAnchor:Ke.MIDDLE,dominantBaseline:Qe.BASELINE}:{textAnchor:Ke.START,dominantBaseline:Qe.BASELINE}}function w2(e,t){return(e%t+t)%t}function Hn(e,[t,n]){return e>=t&&e<=n}function Lf(e){return e*(180/Math.PI)}function Ut(e,t,n={x:0,y:0}){const r=t*Math.cos(e)+n.x,i=t*Math.sin(e)+n.y;return{x:isNaN(r)?0:r,y:isNaN(i)?0:i}}function $2(e,t){return t*Math.sin(e-Math.PI/2)}function M2(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)n=t(n,e[i],i,e);return n}function C2(e){return function(t){return e?.[t]}}var A2={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},L2=C2(A2),k2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,D2="\\u0300-\\u036f",R2="\\ufe20-\\ufe2f",I2="\\u20d0-\\u20ff",N2=D2+R2+I2,P2="["+N2+"]",U2=RegExp(P2,"g");function B2(e){return e=Ci(e),e&&e.replace(k2,L2).replace(U2,"")}var H2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function V2(e){return e.match(H2)||[]}var G2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function z2(e){return G2.test(e)}var kf="\\ud800-\\udfff",F2="\\u0300-\\u036f",j2="\\ufe20-\\ufe2f",W2="\\u20d0-\\u20ff",q2=F2+j2+W2,Df="\\u2700-\\u27bf",Rf="a-z\\xdf-\\xf6\\xf8-\\xff",Y2="\\xac\\xb1\\xd7\\xf7",X2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Z2="\\u2000-\\u206f",K2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",If="A-Z\\xc0-\\xd6\\xd8-\\xde",Q2="\\ufe0e\\ufe0f",Nf=Y2+X2+Z2+K2,Pf="[']",Uf="["+Nf+"]",J2="["+q2+"]",Bf="\\d+",tC="["+Df+"]",Hf="["+Rf+"]",Vf="[^"+kf+Nf+Bf+Df+Rf+If+"]",eC="\\ud83c[\\udffb-\\udfff]",nC="(?:"+J2+"|"+eC+")",rC="[^"+kf+"]",Gf="(?:\\ud83c[\\udde6-\\uddff]){2}",zf="[\\ud800-\\udbff][\\udc00-\\udfff]",Zr="["+If+"]",iC="\\u200d",Ff="(?:"+Hf+"|"+Vf+")",sC="(?:"+Zr+"|"+Vf+")",jf="(?:"+Pf+"(?:d|ll|m|re|s|t|ve))?",Wf="(?:"+Pf+"(?:D|LL|M|RE|S|T|VE))?",qf=nC+"?",Yf="["+Q2+"]?",aC="(?:"+iC+"(?:"+[rC,Gf,zf].join("|")+")"+Yf+qf+")*",oC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cC=Yf+qf+aC,uC="(?:"+[tC,Gf,zf].join("|")+")"+cC,hC=RegExp([Zr+"?"+Hf+"+"+jf+"(?="+[Uf,Zr,"$"].join("|")+")",sC+"+"+Wf+"(?="+[Uf,Zr+Ff,"$"].join("|")+")",Zr+"?"+Ff+"+"+jf,Zr+"+"+Wf,lC,oC,Bf,uC].join("|"),"g");function dC(e){return e.match(hC)||[]}function pC(e,t,n){return e=Ci(e),t=t,t===void 0?z2(e)?dC(e):V2(e):e.match(t)||[]}var fC="[']",mC=RegExp(fC,"g");function Xf(e){return function(t){return M2(pC(B2(t).replace(mC,"")),e,"")}}function gC(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function Zf(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=zr(n),n=n===n?n:0),t!==void 0&&(t=zr(t),t=t===t?t:0),gC(zr(e),t,n)}var vC="Expected a function";function yC(e,t,n){if(typeof e!="function")throw new TypeError(vC);return setTimeout(function(){e.apply(void 0,n)},t)}var bC=Xo(function(e,t,n){return yC(e,zr(t)||0,n)});function xC(e,t){var n=-1,r=Kn(e)?Array(e.length):[];return Wl(e,function(i,s,a){r[++n]=t(i,s,a)}),r}function _C(e,t){var n=Zt(e)?zo:xC;return n(e,Fs(t))}var EC=1/0;function OC(e,t){return Hs(_C(e,t),EC)}function Kf(e,t){return zs(e,t)}var Kr=Xf(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});function SC(e,t){var n;return Wl(e,function(r,i,s){return n=t(r,i,s),!n}),!!n}function TC(e,t,n){var r=Zt(e)?qh:SC;return r(e,Fs(t))}class pr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],a=t+s,o=Math.abs(t)<Math.abs(s)?t-(a-s):s-(a-t);o&&(n[r++]=o),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,s=i-(a-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=a+i,i==r-a&&(a=r))}return a}}function*wC(e){for(const t of e)yield*t}function Qf(e){return Array.from(wC(e))}function $C(e){return e}var Ca=1,Aa=2,pc=3,es=4,Jf=1e-6;function MC(e){return"translate("+e+",0)"}function CC(e){return"translate(0,"+e+")"}function AC(e){return t=>+e(t)}function LC(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function kC(){return!this.__axis}function La(e,t){var n=[],r=null,i=null,s=6,a=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===Ca||e===es?-1:1,u=e===es||e===Aa?"x":"y",d=e===Ca||e===pc?MC:CC;function h(p){var f=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=i??(t.tickFormat?t.tickFormat.apply(t,n):$C),m=Math.max(s,0)+o,v=t.range(),x=+v[0]+l,_=+v[v.length-1]+l,E=(t.bandwidth?LC:AC)(t.copy(),l),b=p.selection?p.selection():p,S=b.selectAll(".domain").data([null]),$=b.selectAll(".tick").data(f,t).order(),k=$.exit(),C=$.enter().append("g").attr("class","tick"),R=$.select("line"),M=$.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(C),R=R.merge(C.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),M=M.merge(C.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",e===Ca?"0em":e===pc?"0.71em":"0.32em")),p!==b&&(S=S.transition(p),$=$.transition(p),R=R.transition(p),M=M.transition(p),k=k.transition(p).attr("opacity",Jf).attr("transform",function(H){return isFinite(H=E(H))?d(H+l):this.getAttribute("transform")}),C.attr("opacity",Jf).attr("transform",function(H){var P=this.parentNode.__axis;return d((P&&isFinite(P=P(H))?P:E(H))+l)})),k.remove(),S.attr("d",e===es||e===Aa?a?"M"+c*a+","+x+"H"+l+"V"+_+"H"+c*a:"M"+l+","+x+"V"+_:a?"M"+x+","+c*a+"V"+l+"H"+_+"V"+c*a:"M"+x+","+l+"H"+_),$.attr("opacity",1).attr("transform",function(H){return d(E(H)+l)}),R.attr(u+"2",c*s),M.attr(u,c*m).text(g),b.filter(kC).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Aa?"start":e===es?"end":"middle"),b.each(function(){this.__axis=E})}return h.scale=function(p){return arguments.length?(t=p,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),h):r&&r.slice()},h.tickFormat=function(p){return arguments.length?(i=p,h):i},h.tickSize=function(p){return arguments.length?(s=a=+p,h):s},h.tickSizeInner=function(p){return arguments.length?(s=+p,h):s},h.tickSizeOuter=function(p){return arguments.length?(a=+p,h):a},h.tickPadding=function(p){return arguments.length?(o=+p,h):o},h.offset=function(p){return arguments.length?(l=+p,h):l},h}function DC(e){return La(Ca,e)}function RC(e){return La(Aa,e)}function fc(e){return La(pc,e)}function tm(e){return La(es,e)}const mc={capture:!0,passive:!1};function gc(e){e.preventDefault(),e.stopImmediatePropagation()}function IC(e){var t=e.document.documentElement,n=I(e).on("dragstart.drag",gc,mc);"onselectstart"in t?n.on("selectstart.drag",gc,mc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function NC(e,t){var n=e.document.documentElement,r=I(e).on("dragstart.drag",null);t&&(r.on("click.drag",gc,mc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function PC(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const UC=e=>+e,vc=e=>()=>e;function BC(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function HC(e){e.stopImmediatePropagation()}function yc(e){e.preventDefault(),e.stopImmediatePropagation()}var em={name:"drag"},bc={name:"space"},Qr={name:"handle"},Jr={name:"center"};const{abs:nm,max:ne,min:re}=Math;function rm(e){return[+e[0],+e[1]]}function im(e){return[rm(e[0]),rm(e[1])]}var ka={name:"x",handles:["w","e"].map(_c),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},xc={},$n={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},sm={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},am={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},VC={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},GC={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function _c(e){return{type:e}}function zC(e){return!e.ctrlKey&&!e.button}function FC(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function jC(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ec(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function WC(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function om(){return qC(ka)}function qC(e){var t=FC,n=zC,r=jC,i=!0,s=vl("start","brush","end"),a=6,o;function l(m){var v=m.property("__brush",g).selectAll(".overlay").data([_c("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",$n.overlay).merge(v).each(function(){var _=Ec(this).extent;I(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),m.selectAll(".selection").data([_c("selection")]).enter().append("rect").attr("class","selection").attr("cursor",$n.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var x=m.selectAll(".handle").data(e.handles,function(_){return _.type});x.exit().remove(),x.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return $n[_.type]}),m.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",f).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,v,x){m.tween?m.on("start.brush",function(_){u(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){u(this,arguments).end(_)}).tween("brush",function(){var _=this,E=_.__brush,b=u(_,arguments),S=E.selection,$=e.input(typeof v=="function"?v.apply(this,arguments):v,E.extent),k=Ui(S,$);function C(R){E.selection=R===1&&$===null?null:k(R),c.call(_),b.brush()}return S!==null&&$!==null?C:C(1)}):m.each(function(){var _=this,E=arguments,b=_.__brush,S=e.input(typeof v=="function"?v.apply(_,E):v,b.extent),$=u(_,E).beforestart();kl(_),b.selection=S===null?null:S,c.call(_),$.start(x).brush(x).end(x)})},l.clear=function(m,v){l.move(m,null,v)};function c(){var m=I(this),v=Ec(this).selection;v?(m.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(x){return x.type[x.type.length-1]==="e"?v[1][0]-a/2:v[0][0]-a/2}).attr("y",function(x){return x.type[0]==="s"?v[1][1]-a/2:v[0][1]-a/2}).attr("width",function(x){return x.type==="n"||x.type==="s"?v[1][0]-v[0][0]+a:a}).attr("height",function(x){return x.type==="e"||x.type==="w"?v[1][1]-v[0][1]+a:a})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(m,v,x){var _=m.__brush.emitter;return _&&(!x||!_.clean)?_:new d(m,v,x)}function d(m,v,x){this.that=m,this.args=v,this.state=m.__brush,this.active=0,this.clean=x}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,v){return this.starting?(this.starting=!1,this.emit("start",m,v)):this.emit("brush",m),this},brush:function(m,v){return this.emit("brush",m,v),this},end:function(m,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,v)),this},emit:function(m,v,x){var _=I(this.that).datum();s.call(m,this.that,new BC(m,{sourceEvent:v,target:l,selection:e.output(this.state.selection),mode:x,dispatch:s}),_)}};function h(m){if(o&&!m.touches||!n.apply(this,arguments))return;var v=this,x=m.target.__data__.type,_=(i&&m.metaKey?x="overlay":x)==="selection"?em:i&&m.altKey?Jr:Qr,E=e===xc?null:VC[x],b=e===ka?null:GC[x],S=Ec(v),$=S.extent,k=S.selection,C=$[0][0],R,M,H=$[0][1],P,B,O=$[1][0],w,L,D=$[1][1],U,K,W=0,j=0,X,ct=E&&b&&i&&m.shiftKey,J,Y,et=Array.from(m.touches||[m],rt=>{const Et=rt.identifier;return rt=er(rt,v),rt.point0=rt.slice(),rt.identifier=Et,rt});kl(v);var ut=u(v,arguments,!0).beforestart();if(x==="overlay"){k&&(X=!0);const rt=[et[0],et[1]||et[0]];S.selection=k=[[R=e===xc?C:re(rt[0][0],rt[1][0]),P=e===ka?H:re(rt[0][1],rt[1][1])],[w=e===xc?O:ne(rt[0][0],rt[1][0]),U=e===ka?D:ne(rt[0][1],rt[1][1])]],et.length>1&&dt(m)}else R=k[0][0],P=k[0][1],w=k[1][0],U=k[1][1];M=R,B=P,L=w,K=U;var F=I(v).attr("pointer-events","none"),q=F.selectAll(".overlay").attr("cursor",$n[x]);if(m.touches)ut.moved=V,ut.ended=ot;else{var Z=I(m.view).on("mousemove.brush",V,!0).on("mouseup.brush",ot,!0);i&&Z.on("keydown.brush",It,!0).on("keyup.brush",Ht,!0),IC(m.view)}c.call(v),ut.start(m,_.name);function V(rt){for(const Et of rt.changedTouches||[rt])for(const Ne of et)Ne.identifier===Et.identifier&&(Ne.cur=er(Et,v));if(ct&&!J&&!Y&&et.length===1){const Et=et[0];nm(Et.cur[0]-Et[0])>nm(Et.cur[1]-Et[1])?Y=!0:J=!0}for(const Et of et)Et.cur&&(Et[0]=Et.cur[0],Et[1]=Et.cur[1]);X=!0,yc(rt),dt(rt)}function dt(rt){const Et=et[0],Ne=Et.point0;var Te;switch(W=Et[0]-Ne[0],j=Et[1]-Ne[1],_){case bc:case em:{E&&(W=ne(C-R,re(O-w,W)),M=R+W,L=w+W),b&&(j=ne(H-P,re(D-U,j)),B=P+j,K=U+j);break}case Qr:{et[1]?(E&&(M=ne(C,re(O,et[0][0])),L=ne(C,re(O,et[1][0])),E=1),b&&(B=ne(H,re(D,et[0][1])),K=ne(H,re(D,et[1][1])),b=1)):(E<0?(W=ne(C-R,re(O-R,W)),M=R+W,L=w):E>0&&(W=ne(C-w,re(O-w,W)),M=R,L=w+W),b<0?(j=ne(H-P,re(D-P,j)),B=P+j,K=U):b>0&&(j=ne(H-U,re(D-U,j)),B=P,K=U+j));break}case Jr:{E&&(M=ne(C,re(O,R-W*E)),L=ne(C,re(O,w+W*E))),b&&(B=ne(H,re(D,P-j*b)),K=ne(H,re(D,U+j*b)));break}}L<M&&(E*=-1,Te=R,R=w,w=Te,Te=M,M=L,L=Te,x in sm&&q.attr("cursor",$n[x=sm[x]])),K<B&&(b*=-1,Te=P,P=U,U=Te,Te=B,B=K,K=Te,x in am&&q.attr("cursor",$n[x=am[x]])),S.selection&&(k=S.selection),J&&(M=k[0][0],L=k[1][0]),Y&&(B=k[0][1],K=k[1][1]),(k[0][0]!==M||k[0][1]!==B||k[1][0]!==L||k[1][1]!==K)&&(S.selection=[[M,B],[L,K]],c.call(v),ut.brush(rt,_.name))}function ot(rt){if(HC(rt),rt.touches){if(rt.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else NC(rt.view,X),Z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),q.attr("cursor",$n.overlay),S.selection&&(k=S.selection),WC(k)&&(S.selection=null,c.call(v)),ut.end(rt,_.name)}function It(rt){switch(rt.keyCode){case 16:{ct=E&&b;break}case 18:{_===Qr&&(E&&(w=L-W*E,R=M+W*E),b&&(U=K-j*b,P=B+j*b),_=Jr,dt(rt));break}case 32:{(_===Qr||_===Jr)&&(E<0?w=L-W:E>0&&(R=M-W),b<0?U=K-j:b>0&&(P=B-j),_=bc,q.attr("cursor",$n.selection),dt(rt));break}default:return}yc(rt)}function Ht(rt){switch(rt.keyCode){case 16:{ct&&(J=Y=ct=!1,dt(rt));break}case 18:{_===Jr&&(E<0?w=L:E>0&&(R=M),b<0?U=K:b>0&&(P=B),_=Qr,dt(rt));break}case 32:{_===bc&&(rt.altKey?(E&&(w=L-W*E,R=M+W*E),b&&(U=K-j*b,P=B+j*b),_=Jr):(E<0?w=L:E>0&&(R=M),b<0?U=K:b>0&&(P=B),_=Qr),q.attr("cursor",$n[x]),dt(rt));break}default:return}yc(rt)}}function p(m){u(this,arguments).moved(m)}function f(m){u(this,arguments).ended(m)}function g(){var m=this.__brush||{selection:null};return m.extent=im(t.apply(this,arguments)),m.dim=e,m}return l.extent=function(m){return arguments.length?(t=typeof m=="function"?m:vc(im(m)),l):t},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:vc(!!m),l):n},l.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:vc(!!m),l):r},l.handleSize=function(m){return arguments.length?(a=+m,l):a},l.keyModifiers=function(m){return arguments.length?(i=!!m,l):i},l.on=function(){var m=s.on.apply(s,arguments);return m===s?l:m},l}const Oc=Math.PI,Sc=2*Oc,fr=1e-6,YC=Sc-fr;function lm(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function XC(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return lm;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Tc=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?lm:XC(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-t,c=i-n,u=a-t,d=o-n,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>fr)if(!(Math.abs(d*l-c*u)>fr)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,f=i-o,g=l*l+c*c,m=p*p+f*f,v=Math.sqrt(g),x=Math.sqrt(h),_=s*Math.tan((Oc-Math.acos((g+h-m)/(2*v*x)))/2),E=_/x,b=_/v;Math.abs(E-1)>fr&&this._append`L${t+E*u},${n+E*d}`,this._append`A${s},${s},0,0,${+(d*p>u*f)},${this._x1=t+b*l},${this._y1=n+b*c}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=t+o,u=n+l,d=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>fr||Math.abs(this._y1-u)>fr)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%Sc+Sc),h>YC?this._append`A${r},${r},0,1,${d},${t-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>fr&&this._append`A${r},${r},0,${+(h>=Oc)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function cm(){return new Tc}cm.prototype=Tc.prototype;var St=1e-6,um=1e-12,ft=Math.PI,fe=ft/2,hm=ft/4,Ee=ft*2,ae=180/ft,Bt=ft/180,Tt=Math.abs,dm=Math.atan,mr=Math.atan2,$t=Math.cos,ZC=Math.exp,KC=Math.log,_t=Math.sin,Vn=Math.sign||function(e){return e>0?1:e<0?-1:0},We=Math.sqrt,QC=Math.tan;function JC(e){return e>1?0:e<-1?ft:Math.acos(e)}function Mn(e){return e>1?fe:e<-1?-fe:Math.asin(e)}function De(){}function Da(e,t){e&&fm.hasOwnProperty(e.type)&&fm[e.type](e,t)}var pm={Feature:function(e,t){Da(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Da(n[r].geometry,t)}},fm={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){wc(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)wc(n[r],t,0)},Polygon:function(e,t){mm(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)mm(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Da(n[r],t)}};function wc(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function mm(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)wc(e[n],t,1);t.polygonEnd()}function ti(e,t){e&&pm.hasOwnProperty(e.type)?pm[e.type](e,t):Da(e,t)}function $c(e){return[mr(e[1],e[0]),Mn(e[2])]}function ei(e){var t=e[0],n=e[1],r=$t(n);return[r*$t(t),r*_t(t),_t(n)]}function Ra(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ia(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Mc(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Na(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Cc(e){var t=We(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Ac(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Lc(e,t){return Tt(e)>ft&&(e-=Math.round(e/Ee)*Ee),[e,t]}Lc.invert=Lc;function gm(e,t,n){return(e%=Ee)?t||n?Ac(ym(e),bm(t,n)):ym(e):t||n?bm(t,n):Lc}function vm(e){return function(t,n){return t+=e,Tt(t)>ft&&(t-=Math.round(t/Ee)*Ee),[t,n]}}function ym(e){var t=vm(e);return t.invert=vm(-e),t}function bm(e,t){var n=$t(e),r=_t(e),i=$t(t),s=_t(t);function a(o,l){var c=$t(l),u=$t(o)*c,d=_t(o)*c,h=_t(l),p=h*n+u*r;return[mr(d*i-p*s,u*n-h*r),Mn(p*i+d*s)]}return a.invert=function(o,l){var c=$t(l),u=$t(o)*c,d=_t(o)*c,h=_t(l),p=h*i-d*s;return[mr(d*i+h*s,u*n+p*r),Mn(p*n-u*r)]},a}function tA(e){e=gm(e[0]*Bt,e[1]*Bt,e.length>2?e[2]*Bt:0);function t(n){return n=e(n[0]*Bt,n[1]*Bt),n[0]*=ae,n[1]*=ae,n}return t.invert=function(n){return n=e.invert(n[0]*Bt,n[1]*Bt),n[0]*=ae,n[1]*=ae,n},t}function eA(e,t,n,r,i,s){if(n){var a=$t(t),o=_t(t),l=r*n;i==null?(i=t+r*Ee,s=t-l/2):(i=xm(a,i),s=xm(a,s),(r>0?i<s:i>s)&&(i+=r*Ee));for(var c,u=i;r>0?u>s:u<s;u-=l)c=$c([a,-o*$t(u),-o*_t(u)]),e.point(c[0],c[1])}}function xm(e,t){t=ei(t),t[0]-=e,Cc(t);var n=JC(-t[1]);return((-t[2]<0?-n:n)+Ee-St)%Ee}function _m(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:De,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Pa(e,t){return Tt(e[0]-t[0])<St&&Tt(e[1]-t[1])<St}function Ua(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Em(e,t,n,r,i){var s=[],a=[],o,l;if(e.forEach(function(f){if(!((g=f.length-1)<=0)){var g,m=f[0],v=f[g],x;if(Pa(m,v)){if(!m[2]&&!v[2]){for(i.lineStart(),o=0;o<g;++o)i.point((m=f[o])[0],m[1]);i.lineEnd();return}v[0]+=2*St}s.push(x=new Ua(m,f,null,!0)),a.push(x.o=new Ua(m,null,x,!1)),s.push(x=new Ua(v,f,null,!1)),a.push(x.o=new Ua(v,null,x,!0))}}),!!s.length){for(a.sort(t),Om(s),Om(a),o=0,l=a.length;o<l;++o)a[o].e=n=!n;for(var c=s[0],u,d;;){for(var h=c,p=!0;h.v;)if((h=h.n)===c)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,l=u.length;o<l;++o)i.point((d=u[o])[0],d[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(u=h.p.z,o=u.length-1;o>=0;--o)i.point((d=u[o])[0],d[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);i.lineEnd()}}}function Om(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function kc(e){return Tt(e[0])<=ft?e[0]:Vn(e[0])*((Tt(e[0])+ft)%Ee-ft)}function nA(e,t){var n=kc(t),r=t[1],i=_t(r),s=[_t(n),-$t(n),0],a=0,o=0,l=new pr;i===1?r=fe+St:i===-1&&(r=-fe-St);for(var c=0,u=e.length;c<u;++c)if(h=(d=e[c]).length)for(var d,h,p=d[h-1],f=kc(p),g=p[1]/2+hm,m=_t(g),v=$t(g),x=0;x<h;++x,f=E,m=S,v=$,p=_){var _=d[x],E=kc(_),b=_[1]/2+hm,S=_t(b),$=$t(b),k=E-f,C=k>=0?1:-1,R=C*k,M=R>ft,H=m*S;if(l.add(mr(H*C*_t(R),v*$+H*$t(R))),a+=M?k+C*Ee:k,M^f>=n^E>=n){var P=Ia(ei(p),ei(_));Cc(P);var B=Ia(s,P);Cc(B);var O=(M^k>=0?-1:1)*Mn(B[2]);(r>O||r===O&&(P[0]||P[1]))&&(o+=M^k>=0?1:-1)}}return(a<-St||a<St&&l<-um)^o&1}function Sm(e,t,n,r){return function(i){var s=t(i),a=_m(),o=t(a),l=!1,c,u,d,h={point:p,lineStart:g,lineEnd:m,polygonStart:function(){h.point=v,h.lineStart=x,h.lineEnd=_,u=[],c=[]},polygonEnd:function(){h.point=p,h.lineStart=g,h.lineEnd=m,u=Qf(u);var E=nA(c,r);u.length?(l||(i.polygonStart(),l=!0),Em(u,iA,E,n,i)):E&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(E,b){e(E,b)&&i.point(E,b)}function f(E,b){s.point(E,b)}function g(){h.point=f,s.lineStart()}function m(){h.point=p,s.lineEnd()}function v(E,b){d.push([E,b]),o.point(E,b)}function x(){o.lineStart(),d=[]}function _(){v(d[0][0],d[0][1]),o.lineEnd();var E=o.clean(),b=a.result(),S,$=b.length,k,C,R;if(d.pop(),c.push(d),d=null,!!$){if(E&1){if(C=b[0],(k=C.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<k;++S)i.point((R=C[S])[0],R[1]);i.lineEnd()}return}$>1&&E&2&&b.push(b.pop().concat(b.shift())),u.push(b.filter(rA))}}return h}}function rA(e){return e.length>1}function iA(e,t){return((e=e.x)[0]<0?e[1]-fe-St:fe-e[1])-((t=t.x)[0]<0?t[1]-fe-St:fe-t[1])}const Tm=Sm(function(){return!0},sA,oA,[-ft,-fe]);function sA(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,a){var o=s>0?ft:-ft,l=Tt(s-t);Tt(l-ft)<St?(e.point(t,n=(n+a)/2>0?fe:-fe),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(s,n),i=0):r!==o&&l>=ft&&(Tt(t-r)<St&&(t-=r*St),Tt(s-o)<St&&(s-=o*St),n=aA(t,n,s,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),i=0),e.point(t=s,n=a),r=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function aA(e,t,n,r){var i,s,a=_t(e-n);return Tt(a)>St?dm((_t(t)*(s=$t(r))*_t(n)-_t(r)*(i=$t(t))*_t(e))/(i*s*a)):(t+r)/2}function oA(e,t,n,r){var i;if(e==null)i=n*fe,r.point(-ft,i),r.point(0,i),r.point(ft,i),r.point(ft,0),r.point(ft,-i),r.point(0,-i),r.point(-ft,-i),r.point(-ft,0),r.point(-ft,i);else if(Tt(e[0]-t[0])>St){var s=e[0]<t[0]?ft:-ft;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function lA(e){var t=$t(e),n=2*Bt,r=t>0,i=Tt(t)>St;function s(u,d,h,p){eA(p,e,n,h,u,d)}function a(u,d){return $t(u)*$t(d)>t}function o(u){var d,h,p,f,g;return{lineStart:function(){f=p=!1,g=1},point:function(m,v){var x=[m,v],_,E=a(m,v),b=r?E?0:c(m,v):E?c(m+(m<0?ft:-ft),v):0;if(!d&&(f=p=E)&&u.lineStart(),E!==p&&(_=l(d,x),(!_||Pa(d,_)||Pa(x,_))&&(x[2]=1)),E!==p)g=0,E?(u.lineStart(),_=l(x,d),u.point(_[0],_[1])):(_=l(d,x),u.point(_[0],_[1],2),u.lineEnd()),d=_;else if(i&&d&&r^E){var S;!(b&h)&&(S=l(x,d,!0))&&(g=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}E&&(!d||!Pa(d,x))&&u.point(x[0],x[1]),d=x,p=E,h=b},lineEnd:function(){p&&u.lineEnd(),d=null},clean:function(){return g|(f&&p)<<1}}}function l(u,d,h){var p=ei(u),f=ei(d),g=[1,0,0],m=Ia(p,f),v=Ra(m,m),x=m[0],_=v-x*x;if(!_)return!h&&u;var E=t*v/_,b=-t*x/_,S=Ia(g,m),$=Na(g,E),k=Na(m,b);Mc($,k);var C=S,R=Ra($,C),M=Ra(C,C),H=R*R-M*(Ra($,$)-1);if(!(H<0)){var P=We(H),B=Na(C,(-R-P)/M);if(Mc(B,$),B=$c(B),!h)return B;var O=u[0],w=d[0],L=u[1],D=d[1],U;w<O&&(U=O,O=w,w=U);var K=w-O,W=Tt(K-ft)<St,j=W||K<St;if(!W&&D<L&&(U=L,L=D,D=U),j?W?L+D>0^B[1]<(Tt(B[0]-O)<St?L:D):L<=B[1]&&B[1]<=D:K>ft^(O<=B[0]&&B[0]<=w)){var X=Na(C,(-R+P)/M);return Mc(X,$),[B,$c(X)]}}}function c(u,d){var h=r?e:ft-e,p=0;return u<-h?p|=1:u>h&&(p|=2),d<-h?p|=4:d>h&&(p|=8),p}return Sm(a,o,s,r?[0,-e]:[-ft,e-ft])}function cA(e,t,n,r,i,s){var a=e[0],o=e[1],l=t[0],c=t[1],u=0,d=1,h=l-a,p=c-o,f;if(f=n-a,!(!h&&f>0)){if(f/=h,h<0){if(f<u)return;f<d&&(d=f)}else if(h>0){if(f>d)return;f>u&&(u=f)}if(f=i-a,!(!h&&f<0)){if(f/=h,h<0){if(f>d)return;f>u&&(u=f)}else if(h>0){if(f<u)return;f<d&&(d=f)}if(f=r-o,!(!p&&f>0)){if(f/=p,p<0){if(f<u)return;f<d&&(d=f)}else if(p>0){if(f>d)return;f>u&&(u=f)}if(f=s-o,!(!p&&f<0)){if(f/=p,p<0){if(f>d)return;f>u&&(u=f)}else if(p>0){if(f<u)return;f<d&&(d=f)}return u>0&&(e[0]=a+u*h,e[1]=o+u*p),d<1&&(t[0]=a+d*h,t[1]=o+d*p),!0}}}}}var ns=1e9,Ba=-ns;function uA(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function s(c,u,d,h){var p=0,f=0;if(c==null||(p=a(c,d))!==(f=a(u,d))||l(c,u)<0^d>0)do h.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+d+4)%4)!==f);else h.point(u[0],u[1])}function a(c,u){return Tt(c[0]-e)<St?u>0?0:3:Tt(c[0]-n)<St?u>0?2:1:Tt(c[1]-t)<St?u>0?1:0:u>0?3:2}function o(c,u){return l(c.x,u.x)}function l(c,u){var d=a(c,1),h=a(u,1);return d!==h?d-h:d===0?u[1]-c[1]:d===1?c[0]-u[0]:d===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,d=_m(),h,p,f,g,m,v,x,_,E,b,S,$={point:k,lineStart:H,lineEnd:P,polygonStart:R,polygonEnd:M};function k(O,w){i(O,w)&&u.point(O,w)}function C(){for(var O=0,w=0,L=p.length;w<L;++w)for(var D=p[w],U=1,K=D.length,W=D[0],j,X,ct=W[0],J=W[1];U<K;++U)j=ct,X=J,W=D[U],ct=W[0],J=W[1],X<=r?J>r&&(ct-j)*(r-X)>(J-X)*(e-j)&&++O:J<=r&&(ct-j)*(r-X)<(J-X)*(e-j)&&--O;return O}function R(){u=d,h=[],p=[],S=!0}function M(){var O=C(),w=S&&O,L=(h=Qf(h)).length;(w||L)&&(c.polygonStart(),w&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),L&&Em(h,o,O,s,c),c.polygonEnd()),u=c,h=p=f=null}function H(){$.point=B,p&&p.push(f=[]),b=!0,E=!1,x=_=NaN}function P(){h&&(B(g,m),v&&E&&d.rejoin(),h.push(d.result())),$.point=k,E&&u.lineEnd()}function B(O,w){var L=i(O,w);if(p&&f.push([O,w]),b)g=O,m=w,v=L,b=!1,L&&(u.lineStart(),u.point(O,w));else if(L&&E)u.point(O,w);else{var D=[x=Math.max(Ba,Math.min(ns,x)),_=Math.max(Ba,Math.min(ns,_))],U=[O=Math.max(Ba,Math.min(ns,O)),w=Math.max(Ba,Math.min(ns,w))];cA(D,U,e,t,n,r)?(E||(u.lineStart(),u.point(D[0],D[1])),u.point(U[0],U[1]),L||u.lineEnd(),S=!1):L&&(u.lineStart(),u.point(O,w),S=!1)}x=O,_=w,E=L}return $}}const Dc=e=>e;var Rc=new pr,Ic=new pr,wm,$m,Nc,Pc,Cn={point:De,lineStart:De,lineEnd:De,polygonStart:function(){Cn.lineStart=hA,Cn.lineEnd=pA},polygonEnd:function(){Cn.lineStart=Cn.lineEnd=Cn.point=De,Rc.add(Tt(Ic)),Ic=new pr},result:function(){var e=Rc/2;return Rc=new pr,e}};function hA(){Cn.point=dA}function dA(e,t){Cn.point=Mm,wm=Nc=e,$m=Pc=t}function Mm(e,t){Ic.add(Pc*e-Nc*t),Nc=e,Pc=t}function pA(){Mm(wm,$m)}var ni=1/0,Ha=ni,rs=-ni,Va=rs,Ga={point:fA,lineStart:De,lineEnd:De,polygonStart:De,polygonEnd:De,result:function(){var e=[[ni,Ha],[rs,Va]];return rs=Va=-(Ha=ni=1/0),e}};function fA(e,t){e<ni&&(ni=e),e>rs&&(rs=e),t<Ha&&(Ha=t),t>Va&&(Va=t)}var Uc=0,Bc=0,is=0,za=0,Fa=0,ri=0,Hc=0,Vc=0,ss=0,Cm,Am,an,on,Re={point:gr,lineStart:Lm,lineEnd:km,polygonStart:function(){Re.lineStart=vA,Re.lineEnd=yA},polygonEnd:function(){Re.point=gr,Re.lineStart=Lm,Re.lineEnd=km},result:function(){var e=ss?[Hc/ss,Vc/ss]:ri?[za/ri,Fa/ri]:is?[Uc/is,Bc/is]:[NaN,NaN];return Uc=Bc=is=za=Fa=ri=Hc=Vc=ss=0,e}};function gr(e,t){Uc+=e,Bc+=t,++is}function Lm(){Re.point=mA}function mA(e,t){Re.point=gA,gr(an=e,on=t)}function gA(e,t){var n=e-an,r=t-on,i=We(n*n+r*r);za+=i*(an+e)/2,Fa+=i*(on+t)/2,ri+=i,gr(an=e,on=t)}function km(){Re.point=gr}function vA(){Re.point=bA}function yA(){Dm(Cm,Am)}function bA(e,t){Re.point=Dm,gr(Cm=an=e,Am=on=t)}function Dm(e,t){var n=e-an,r=t-on,i=We(n*n+r*r);za+=i*(an+e)/2,Fa+=i*(on+t)/2,ri+=i,i=on*e-an*t,Hc+=i*(an+e),Vc+=i*(on+t),ss+=i*3,gr(an=e,on=t)}function Rm(e){this._context=e}Rm.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ee);break}}},result:De};var Gc=new pr,zc,Im,Nm,as,os,ls={point:De,lineStart:function(){ls.point=xA},lineEnd:function(){zc&&Pm(Im,Nm),ls.point=De},polygonStart:function(){zc=!0},polygonEnd:function(){zc=null},result:function(){var e=+Gc;return Gc=new pr,e}};function xA(e,t){ls.point=Pm,Im=as=e,Nm=os=t}function Pm(e,t){as-=e,os-=t,Gc.add(We(as*as+os*os)),as=e,os=t}let Um,ja,Bm,Hm;class Vm{constructor(t){this._append=t==null?Gm:_A(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Bm||this._append!==ja){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Bm=r,ja=this._append,Hm=this._,this._=i}this._+=Hm;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Gm(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _A(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Gm;if(t!==Um){const n=10**t;Um=t,ja=function(r){let i=1;this._+=r[0];for(const s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}return ja}function EA(e,t){let n=3,r=4.5,i,s;function a(o){return o&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),ti(o,i(s))),s.result()}return a.area=function(o){return ti(o,i(Cn)),Cn.result()},a.measure=function(o){return ti(o,i(ls)),ls.result()},a.bounds=function(o){return ti(o,i(Ga)),Ga.result()},a.centroid=function(o){return ti(o,i(Re)),Re.result()},a.projection=function(o){return arguments.length?(i=o==null?(e=null,Dc):(e=o).stream,a):e},a.context=function(o){return arguments.length?(s=o==null?(t=null,new Vm(n)):new Rm(t=o),typeof r!="function"&&s.pointRadius(r),a):t},a.pointRadius=function(o){return arguments.length?(r=typeof o=="function"?o:(s.pointRadius(+o),+o),a):r},a.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(s=new Vm(n)),a},a.projection(e).digits(n).context(t)}function Fc(e){return function(t){var n=new jc;for(var r in e)n[r]=e[r];return n.stream=t,n}}function jc(){}jc.prototype={constructor:jc,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Wc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ti(n,e.stream(Ga)),t(Ga.result()),r!=null&&e.clipExtent(r),e}function zm(e,t,n){return Wc(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),o=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,l])},n)}function OA(e,t,n){return zm(e,[[0,0],t],n)}function SA(e,t,n){return Wc(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),a=(i-s*(r[1][0]+r[0][0]))/2,o=-s*r[0][1];e.scale(150*s).translate([a,o])},n)}function TA(e,t,n){return Wc(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),a=-s*r[0][0],o=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,o])},n)}var Fm=16,wA=$t(30*Bt);function jm(e,t){return+t?MA(e,t):$A(e)}function $A(e){return Fc({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function MA(e,t){function n(r,i,s,a,o,l,c,u,d,h,p,f,g,m){var v=c-r,x=u-i,_=v*v+x*x;if(_>4*t&&g--){var E=a+h,b=o+p,S=l+f,$=We(E*E+b*b+S*S),k=Mn(S/=$),C=Tt(Tt(S)-1)<St||Tt(s-d)<St?(s+d)/2:mr(b,E),R=e(C,k),M=R[0],H=R[1],P=M-r,B=H-i,O=x*P-v*B;(O*O/_>t||Tt((v*P+x*B)/_-.5)>.3||a*h+o*p+l*f<wA)&&(n(r,i,s,a,o,l,M,H,C,E/=$,b/=$,S,g,m),m.point(M,H),n(M,H,C,E,b,S,c,u,d,h,p,f,g,m))}}return function(r){var i,s,a,o,l,c,u,d,h,p,f,g,m={point:v,lineStart:x,lineEnd:E,polygonStart:function(){r.polygonStart(),m.lineStart=b},polygonEnd:function(){r.polygonEnd(),m.lineStart=x}};function v(k,C){k=e(k,C),r.point(k[0],k[1])}function x(){d=NaN,m.point=_,r.lineStart()}function _(k,C){var R=ei([k,C]),M=e(k,C);n(d,h,u,p,f,g,d=M[0],h=M[1],u=k,p=R[0],f=R[1],g=R[2],Fm,r),r.point(d,h)}function E(){m.point=v,r.lineEnd()}function b(){x(),m.point=S,m.lineEnd=$}function S(k,C){_(i=k,C),s=d,a=h,o=p,l=f,c=g,m.point=_}function $(){n(d,h,u,p,f,g,s,a,i,o,l,c,Fm,r),m.lineEnd=E,E()}return m}}var CA=Fc({point:function(e,t){this.stream.point(e*Bt,t*Bt)}});function AA(e){return Fc({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function LA(e,t,n,r,i){function s(a,o){return a*=r,o*=i,[t+e*a,n-e*o]}return s.invert=function(a,o){return[(a-t)/e*r,(n-o)/e*i]},s}function Wm(e,t,n,r,i,s){if(!s)return LA(e,t,n,r,i);var a=$t(s),o=_t(s),l=a*e,c=o*e,u=a/e,d=o/e,h=(o*n-a*t)/e,p=(o*t+a*n)/e;function f(g,m){return g*=r,m*=i,[l*g-c*m+t,n-c*g-l*m]}return f.invert=function(g,m){return[r*(u*g-d*m+h),i*(p-d*g-u*m)]},f}function Wa(e){return qm(function(){return e})()}function qm(e){var t,n=150,r=480,i=250,s=0,a=0,o=0,l=0,c=0,u,d=0,h=1,p=1,f=null,g=Tm,m=null,v,x,_,E=Dc,b=.5,S,$,k,C,R;function M(O){return k(O[0]*Bt,O[1]*Bt)}function H(O){return O=k.invert(O[0],O[1]),O&&[O[0]*ae,O[1]*ae]}M.stream=function(O){return C&&R===O?C:C=CA(AA(u)(g(S(E(R=O)))))},M.preclip=function(O){return arguments.length?(g=O,f=void 0,B()):g},M.postclip=function(O){return arguments.length?(E=O,m=v=x=_=null,B()):E},M.clipAngle=function(O){return arguments.length?(g=+O?lA(f=O*Bt):(f=null,Tm),B()):f*ae},M.clipExtent=function(O){return arguments.length?(E=O==null?(m=v=x=_=null,Dc):uA(m=+O[0][0],v=+O[0][1],x=+O[1][0],_=+O[1][1]),B()):m==null?null:[[m,v],[x,_]]},M.scale=function(O){return arguments.length?(n=+O,P()):n},M.translate=function(O){return arguments.length?(r=+O[0],i=+O[1],P()):[r,i]},M.center=function(O){return arguments.length?(s=O[0]%360*Bt,a=O[1]%360*Bt,P()):[s*ae,a*ae]},M.rotate=function(O){return arguments.length?(o=O[0]%360*Bt,l=O[1]%360*Bt,c=O.length>2?O[2]%360*Bt:0,P()):[o*ae,l*ae,c*ae]},M.angle=function(O){return arguments.length?(d=O%360*Bt,P()):d*ae},M.reflectX=function(O){return arguments.length?(h=O?-1:1,P()):h<0},M.reflectY=function(O){return arguments.length?(p=O?-1:1,P()):p<0},M.precision=function(O){return arguments.length?(S=jm($,b=O*O),B()):We(b)},M.fitExtent=function(O,w){return zm(M,O,w)},M.fitSize=function(O,w){return OA(M,O,w)},M.fitWidth=function(O,w){return SA(M,O,w)},M.fitHeight=function(O,w){return TA(M,O,w)};function P(){var O=Wm(n,0,0,h,p,d).apply(null,t(s,a)),w=Wm(n,r-O[0],i-O[1],h,p,d);return u=gm(o,l,c),$=Ac(t,w),k=Ac(u,$),S=jm($,b),B()}function B(){return C=R=null,M}return function(){return t=e.apply(this,arguments),M.invert=t.invert&&H,P()}}function Ym(e){var t=0,n=ft/3,r=qm(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Bt,n=s[1]*Bt):[t*ae,n*ae]},i}function kA(e){var t=$t(e);function n(r,i){return[r*t,_t(i)/t]}return n.invert=function(r,i){return[r/t,Mn(i*t)]},n}function DA(e,t){var n=_t(e),r=(n+_t(t))/2;if(Tt(r)<St)return kA(e);var i=1+n*(2*r-n),s=We(i)/r;function a(o,l){var c=We(i-2*r*_t(l))/r;return[c*_t(o*=r),s-c*$t(o)]}return a.invert=function(o,l){var c=s-l,u=mr(o,Tt(c))*Vn(c);return c*r<0&&(u-=ft*Vn(o)*Vn(c)),[u/r,Mn((i-(o*o+c*c)*r*r)/(2*r))]},a}function Xm(){return Ym(DA).scale(155.424).center([0,33.6442])}function RA(){return Xm().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function qc(e,t){return[e,KC(QC((fe+t)/2))]}qc.invert=function(e,t){return[e,2*dm(ZC(t))-fe]};function IA(){return NA(qc).scale(961/Ee)}function NA(e){var t=Wa(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,a=null,o,l,c;t.scale=function(d){return arguments.length?(r(d),u()):r()},t.translate=function(d){return arguments.length?(i(d),u()):i()},t.center=function(d){return arguments.length?(n(d),u()):n()},t.clipExtent=function(d){return arguments.length?(d==null?a=o=l=c=null:(a=+d[0][0],o=+d[0][1],l=+d[1][0],c=+d[1][1]),u()):a==null?null:[[a,o],[l,c]]};function u(){var d=ft*r(),h=t(tA(t.rotate()).invert([0,0]));return s(a==null?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:e===qc?[[Math.max(h[0]-d,a),o],[Math.min(h[0]+d,l),c]]:[[a,Math.max(h[1]-d,o)],[l,Math.min(h[1]+d,c)]])}return u()}function qa(e,t){return[e,t]}qa.invert=qa;function PA(){return Wa(qa).scale(152.63)}function UA(e,t){var n=$t(e),r=e===t?_t(e):(n-$t(t))/(t-e),i=n/r+e;if(Tt(r)<St)return qa;function s(a,o){var l=i-o,c=r*a;return[l*_t(c),i-l*$t(c)]}return s.invert=function(a,o){var l=i-o,c=mr(a,Tt(l))*Vn(l);return l*r<0&&(c-=ft*Vn(a)*Vn(l)),[c/r,i-Vn(r)*We(a*a+l*l)]},s}function BA(){return Ym(UA).scale(131.154).center([0,13.9389])}var cs=1.340264,us=-.081106,hs=893e-6,ds=.003796,Ya=We(3)/2,HA=12;function Zm(e,t){var n=Mn(Ya*_t(t)),r=n*n,i=r*r*r;return[e*$t(n)/(Ya*(cs+3*us*r+i*(7*hs+9*ds*r))),n*(cs+us*r+i*(hs+ds*r))]}Zm.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,a,o,l;s<HA&&(o=n*(cs+us*r+i*(hs+ds*r))-t,l=cs+3*us*r+i*(7*hs+9*ds*r),n-=a=o/l,r=n*n,i=r*r*r,!(Tt(a)<um));++s);return[Ya*e*(cs+3*us*r+i*(7*hs+9*ds*r))/$t(n),Mn(_t(n)/Ya)]};function VA(){return Wa(Zm).scale(177.158)}function Km(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Km.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(Tt(i)>St&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function GA(){return Wa(Km).scale(175.295)}function zA(e,t){return e.parent===t.parent?1:2}function FA(e){return e.reduce(jA,0)/e.length}function jA(e,t){return e+t.x}function WA(e){return 1+e.reduce(qA,0)}function qA(e,t){return Math.max(e,t.y)}function YA(e){for(var t;t=e.children;)e=t[0];return e}function XA(e){for(var t;t=e.children;)e=t[t.length-1];return e}function ZA(){var e=zA,t=1,n=1,r=!1;function i(s){var a,o=0;s.eachAfter(function(h){var p=h.children;p?(h.x=FA(p),h.y=WA(p)):(h.x=a?o+=e(h,a):0,h.y=0,a=h)});var l=YA(s),c=XA(s),u=l.x-e(l,c)/2,d=c.x+e(c,l)/2;return s.eachAfter(r?function(h){h.x=(h.x-s.x)*t,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-u)/(d-u)*t,h.y=(1-(s.y?h.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function KA(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function QA(){return this.eachAfter(KA)}function JA(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function tL(e,t){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function eL(e,t){for(var n=this,r=[n],i=[],s,a,o,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function nL(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function rL(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function iL(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function sL(e){for(var t=this,n=aL(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function aL(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function oL(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function lL(){return Array.from(this)}function cL(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function uL(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*hL(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function ps(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=fL)):t===void 0&&(t=pL);for(var n=new fs(e),r,i=[n],s,a,o,l;r=i.pop();)if((a=t(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,o=l-1;o>=0;--o)i.push(s=a[o]=new fs(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(gL)}function dL(){return ps(this).eachBefore(mL)}function pL(e){return e.children}function fL(e){return Array.isArray(e)?e[1]:null}function mL(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function gL(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function fs(e){this.data=e,this.depth=this.height=0,this.parent=null}fs.prototype=ps.prototype={constructor:fs,count:QA,each:JA,eachAfter:eL,eachBefore:tL,find:nL,sum:rL,sort:iL,path:sL,ancestors:oL,descendants:lL,leaves:cL,links:uL,copy:dL,[Symbol.iterator]:hL};function vL(e){return e==null?null:Qm(e)}function Qm(e){if(typeof e!="function")throw new Error;return e}function vr(){return 0}function ii(e){return function(){return e}}const yL=1664525,bL=1013904223,Jm=4294967296;function xL(){let e=1;return()=>(e=(yL*e+bL)%Jm)/Jm}function _L(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function EL(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function OL(e,t){for(var n=0,r=(e=EL(Array.from(e),t)).length,i=[],s,a;n<r;)s=e[n],a&&tg(a,s)?++n:(a=TL(i=SL(i,s)),n=0);return a}function SL(e,t){var n,r;if(Yc(t,e))return[t];for(n=0;n<e.length;++n)if(Xa(t,e[n])&&Yc(ms(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Xa(ms(e[n],e[r]),t)&&Xa(ms(e[n],t),e[r])&&Xa(ms(e[r],t),e[n])&&Yc(eg(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Xa(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function tg(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Yc(e,t){for(var n=0;n<t.length;++n)if(!tg(e,t[n]))return!1;return!0}function TL(e){switch(e.length){case 1:return wL(e[0]);case 2:return ms(e[0],e[1]);case 3:return eg(e[0],e[1],e[2])}}function wL(e){return{x:e.x,y:e.y,r:e.r}}function ms(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,a=t.y,o=t.r,l=s-n,c=a-r,u=o-i,d=Math.sqrt(l*l+c*c);return{x:(n+s+l/d*u)/2,y:(r+a+c/d*u)/2,r:(d+i+o)/2}}function eg(e,t,n){var r=e.x,i=e.y,s=e.r,a=t.x,o=t.y,l=t.r,c=n.x,u=n.y,d=n.r,h=r-a,p=r-c,f=i-o,g=i-u,m=l-s,v=d-s,x=r*r+i*i-s*s,_=x-a*a-o*o+l*l,E=x-c*c-u*u+d*d,b=p*f-h*g,S=(f*E-g*_)/(b*2)-r,$=(g*m-f*v)/b,k=(p*_-h*E)/(b*2)-i,C=(h*v-p*m)/b,R=$*$+C*C-1,M=2*(s+S*$+k*C),H=S*S+k*k-s*s,P=-(Math.abs(R)>1e-6?(M+Math.sqrt(M*M-4*R*H))/(2*R):H/M);return{x:r+S+$*P,y:i+k+C*P,r:P}}function ng(e,t,n){var r=e.x-t.x,i,s,a=e.y-t.y,o,l,c=r*r+a*a;c?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(c+l-s)/(2*c),o=Math.sqrt(Math.max(0,l/c-i*i)),n.x=e.x-i*r-o*a,n.y=e.y-i*a+o*r):(i=(c+s-l)/(2*c),o=Math.sqrt(Math.max(0,s/c-i*i)),n.x=t.x+i*r-o*a,n.y=t.y+i*a+o*r)):(n.x=t.x+n.r,n.y=t.y)}function rg(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ig(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function Za(e){this._=e,this.next=null,this.previous=null}function $L(e,t){if(!(s=(e=_L(e)).length))return 0;var n,r,i,s,a,o,l,c,u,d,h;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;ng(r,n,i=e[2]),n=new Za(n),r=new Za(r),i=new Za(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<s;++l){ng(n._,r._,i=e[l]),i=new Za(i),c=r.next,u=n.previous,d=r._.r,h=n._.r;do if(d<=h){if(rg(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue t}d+=c._.r,c=c.next}else{if(rg(u._,i._)){n=u,n.next=r,r.previous=n,--l;continue t}h+=u._.r,u=u.previous}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=ig(n);(i=i.next)!==r;)(o=ig(i))<a&&(n=i,a=o);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=OL(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function ML(e){return Math.sqrt(e.value)}function CL(){var e=null,t=1,n=1,r=vr;function i(s){const a=xL();return s.x=t/2,s.y=n/2,e?s.eachBefore(sg(e)).eachAfter(Xc(r,.5,a)).eachBefore(ag(1)):s.eachBefore(sg(ML)).eachAfter(Xc(vr,1,a)).eachAfter(Xc(r,s.r/Math.min(t,n),a)).eachBefore(ag(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=vL(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:ii(+s),i):r},i}function sg(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Xc(e,t,n){return function(r){if(i=r.children){var i,s,a=i.length,o=e(r)*t||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=$L(i,n),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function ag(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function AL(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function LL(e,t,n,r,i){for(var s=e.children,a,o=-1,l=s.length,c=e.value&&(r-t)/e.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}function kL(e,t){return e.parent===t.parent?1:2}function Zc(e){var t=e.children;return t?t[0]:e.t}function Kc(e){var t=e.children;return t?t[t.length-1]:e.t}function DL(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function RL(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function IL(e,t,n){return e.a.parent===t.parent?e.a:n}function Ka(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Ka.prototype=Object.create(fs.prototype);function NL(e){for(var t=new Ka(e,0),n,r=[t],i,s,a,o;n=r.pop();)if(s=n._.children)for(n.children=new Array(o=s.length),a=o-1;a>=0;--a)r.push(i=n.children[a]=new Ka(s[a],a)),i.parent=n;return(t.parent=new Ka(null,0)).children=[t],t}function PL(){var e=kL,t=1,n=1,r=null;function i(c){var u=NL(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(a),r)c.eachBefore(l);else{var d=c,h=c,p=c;c.eachBefore(function(x){x.x<d.x&&(d=x),x.x>h.x&&(h=x),x.depth>p.depth&&(p=x)});var f=d===h?1:e(d,h)/2,g=f-d.x,m=t/(h.x+f+g),v=n/(p.depth||1);c.eachBefore(function(x){x.x=(x.x+g)*m,x.y=x.depth*v})}return c}function s(c){var u=c.children,d=c.parent.children,h=c.i?d[c.i-1]:null;if(u){RL(c);var p=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-p):c.z=p}else h&&(c.z=h.z+e(c._,h._));c.parent.A=o(c,h,c.parent.A||d[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,u,d){if(u){for(var h=c,p=c,f=u,g=h.parent.children[0],m=h.m,v=p.m,x=f.m,_=g.m,E;f=Kc(f),h=Zc(h),f&&h;)g=Zc(g),p=Kc(p),p.a=c,E=f.z+x-h.z-m+e(f._,h._),E>0&&(DL(IL(f,c,d),c,E),m+=E,v+=E),x+=f.m,m+=h.m,_+=g.m,v+=p.m;f&&!Kc(p)&&(p.t=f,p.m+=x-v),h&&!Zc(g)&&(g.t=h,g.m+=m-_,d=c)}return d}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}function UL(e,t,n,r,i){for(var s=e.children,a,o=-1,l=s.length,c=e.value&&(i-n)/e.value;++o<l;)a=s[o],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}var BL=(1+Math.sqrt(5))/2;function HL(e,t,n,r,i,s){for(var a=[],o=t.children,l,c,u=0,d=0,h=o.length,p,f,g=t.value,m,v,x,_,E,b,S;u<h;){p=i-n,f=s-r;do m=o[d++].value;while(!m&&d<h);for(v=x=m,b=Math.max(f/p,p/f)/(g*e),S=m*m*b,E=Math.max(x/S,S/v);d<h;++d){if(m+=c=o[d].value,c<v&&(v=c),c>x&&(x=c),S=m*m*b,_=Math.max(x/S,S/v),_>E){m-=c;break}E=_}a.push(l={value:m,dice:p<f,children:o.slice(u,d)}),l.dice?LL(l,n,r,i,g?r+=f*m/g:s):UL(l,n,r,g?n+=p*m/g:i,s),g-=m,u=d}return a}const VL=function e(t){function n(r,i,s,a,o){HL(t,r,i,s,a,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(BL);function GL(){var e=VL,t=!1,n=1,r=1,i=[0],s=vr,a=vr,o=vr,l=vr,c=vr;function u(h){return h.x0=h.y0=0,h.x1=n,h.y1=r,h.eachBefore(d),i=[0],t&&h.eachBefore(AL),h}function d(h){var p=i[h.depth],f=h.x0+p,g=h.y0+p,m=h.x1-p,v=h.y1-p;m<f&&(f=m=(f+m)/2),v<g&&(g=v=(g+v)/2),h.x0=f,h.y0=g,h.x1=m,h.y1=v,h.children&&(p=i[h.depth+1]=s(h)/2,f+=c(h)-p,g+=a(h)-p,m-=o(h)-p,v-=l(h)-p,m<f&&(f=m=(f+m)/2),v<g&&(g=v=(g+v)/2),e(h,f,g,m,v))}return u.round=function(h){return arguments.length?(t=!!h,u):t},u.size=function(h){return arguments.length?(n=+h[0],r=+h[1],u):[n,r]},u.tile=function(h){return arguments.length?(e=Qm(h),u):e},u.padding=function(h){return arguments.length?u.paddingInner(h).paddingOuter(h):u.paddingInner()},u.paddingInner=function(h){return arguments.length?(s=typeof h=="function"?h:ii(+h),u):s},u.paddingOuter=function(h){return arguments.length?u.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):u.paddingTop()},u.paddingTop=function(h){return arguments.length?(a=typeof h=="function"?h:ii(+h),u):a},u.paddingRight=function(h){return arguments.length?(o=typeof h=="function"?h:ii(+h),u):o},u.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:ii(+h),u):l},u.paddingLeft=function(h){return arguments.length?(c=typeof h=="function"?h:ii(+h),u):c},u}function Qa(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Tc(t)}function zL(e){return e.innerRadius}function FL(e){return e.outerRadius}function jL(e){return e.startAngle}function WL(e){return e.endAngle}function qL(e){return e&&e.padAngle}function YL(e,t,n,r,i,s,a,o){var l=n-e,c=r-t,u=a-i,d=o-s,h=d*l-u*c;if(!(h*h<ee))return h=(u*(t-s)-d*(e-i))/h,[e+h*l,t+h*c]}function Ja(e,t,n,r,i,s,a){var o=e-n,l=t-r,c=(a?s:-s)/Xr(o*o+l*l),u=c*l,d=-c*o,h=e+u,p=t+d,f=n+u,g=r+d,m=(h+f)/2,v=(p+g)/2,x=f-h,_=g-p,E=x*x+_*_,b=i-s,S=h*g-f*p,$=(_<0?-1:1)*Xr(LM(0,b*b*E-S*S)),k=(S*_-x*$)/E,C=(-S*x-_*$)/E,R=(S*_+x*$)/E,M=(-S*x+_*$)/E,H=k-m,P=C-v,B=R-m,O=M-v;return H*H+P*P>B*B+O*O&&(k=R,C=M),{cx:k,cy:C,x01:-u,y01:-d,x11:k*(i/b-1),y11:C*(i/b-1)}}function gs(){var e=zL,t=FL,n=pt(0),r=null,i=jL,s=WL,a=qL,o=null,l=Qa(c);function c(){var u,d,h=+e.apply(this,arguments),p=+t.apply(this,arguments),f=i.apply(this,arguments)-Ea,g=s.apply(this,arguments)-Ea,m=hf(g-f),v=g>f;if(o||(o=u=l()),p<h&&(d=p,p=h,h=d),!(p>ee))o.moveTo(0,0);else if(m>Oa-ee)o.moveTo(p*dr(f),p*sn(f)),o.arc(0,0,p,f,g,!v),h>ee&&(o.moveTo(h*dr(g),h*sn(g)),o.arc(0,0,h,g,f,v));else{var x=f,_=g,E=f,b=g,S=m,$=m,k=a.apply(this,arguments)/2,C=k>ee&&(r?+r.apply(this,arguments):Xr(h*h+p*p)),R=oc(hf(p-h)/2,+n.apply(this,arguments)),M=R,H=R,P,B;if(C>ee){var O=df(C/h*sn(k)),w=df(C/p*sn(k));(S-=O*2)>ee?(O*=v?1:-1,E+=O,b-=O):(S=0,E=b=(f+g)/2),($-=w*2)>ee?(w*=v?1:-1,x+=w,_-=w):($=0,x=_=(f+g)/2)}var L=p*dr(x),D=p*sn(x),U=h*dr(b),K=h*sn(b);if(R>ee){var W=p*dr(_),j=p*sn(_),X=h*dr(E),ct=h*sn(E),J;if(m<ts)if(J=YL(L,D,X,ct,W,j,U,K)){var Y=L-J[0],et=D-J[1],ut=W-J[0],F=j-J[1],q=1/sn(kM((Y*ut+et*F)/(Xr(Y*Y+et*et)*Xr(ut*ut+F*F)))/2),Z=Xr(J[0]*J[0]+J[1]*J[1]);M=oc(R,(h-Z)/(q-1)),H=oc(R,(p-Z)/(q+1))}else M=H=0}$>ee?H>ee?(P=Ja(X,ct,L,D,p,H,v),B=Ja(W,j,U,K,p,H,v),o.moveTo(P.cx+P.x01,P.cy+P.y01),H<R?o.arc(P.cx,P.cy,H,te(P.y01,P.x01),te(B.y01,B.x01),!v):(o.arc(P.cx,P.cy,H,te(P.y01,P.x01),te(P.y11,P.x11),!v),o.arc(0,0,p,te(P.cy+P.y11,P.cx+P.x11),te(B.cy+B.y11,B.cx+B.x11),!v),o.arc(B.cx,B.cy,H,te(B.y11,B.x11),te(B.y01,B.x01),!v))):(o.moveTo(L,D),o.arc(0,0,p,x,_,!v)):o.moveTo(L,D),!(h>ee)||!(S>ee)?o.lineTo(U,K):M>ee?(P=Ja(U,K,W,j,h,-M,v),B=Ja(L,D,X,ct,h,-M,v),o.lineTo(P.cx+P.x01,P.cy+P.y01),M<R?o.arc(P.cx,P.cy,M,te(P.y01,P.x01),te(B.y01,B.x01),!v):(o.arc(P.cx,P.cy,M,te(P.y01,P.x01),te(P.y11,P.x11),!v),o.arc(0,0,h,te(P.cy+P.y11,P.cx+P.x11),te(B.cy+B.y11,B.cx+B.x11),v),o.arc(B.cx,B.cy,M,te(B.y11,B.x11),te(B.y01,B.x01),!v))):o.arc(0,0,h,b,E,v)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-ts/2;return[dr(d)*u,sn(d)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:pt(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:pt(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:pt(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:pt(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:pt(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:pt(+u),c):s},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:pt(+u),c):a},c.context=function(u){return arguments.length?(o=u??null,c):o},c}function Qc(e){return e[0]}function Jc(e){return e[1]}function vs(e,t){var n=pt(!0),r=null,i=Sa,s=null,a=Qa(o);e=typeof e=="function"?e:e===void 0?Qc:pt(e),t=typeof t=="function"?t:t===void 0?Jc:pt(t);function o(l){var c,u=(l=ga(l)).length,d,h=!1,p;for(r==null&&(s=i(p=a())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(d,c,l),+t(d,c,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:pt(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:pt(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:pt(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function tu(e,t,n){var r=null,i=pt(!0),s=null,a=Sa,o=null,l=Qa(c);e=typeof e=="function"?e:e===void 0?Qc:pt(+e),t=typeof t=="function"?t:pt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Jc:pt(+n);function c(d){var h,p,f,g=(d=ga(d)).length,m,v=!1,x,_=new Array(g),E=new Array(g);for(s==null&&(o=a(x=l())),h=0;h<=g;++h){if(!(h<g&&i(m=d[h],h,d))===v)if(v=!v)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),f=h-1;f>=p;--f)o.point(_[f],E[f]);o.lineEnd(),o.areaEnd()}v&&(_[h]=+e(m,h,d),E[h]=+t(m,h,d),o.point(r?+r(m,h,d):_[h],n?+n(m,h,d):E[h]))}if(x)return o=null,x+""||null}function u(){return vs().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:pt(+d),r=null,c):e},c.x0=function(d){return arguments.length?(e=typeof d=="function"?d:pt(+d),c):e},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:pt(+d),c):r},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:pt(+d),n=null,c):t},c.y0=function(d){return arguments.length?(t=typeof d=="function"?d:pt(+d),c):t},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:pt(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:pt(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(o=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=o=null:o=a(s=d),c):s},c}function XL(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function ZL(e){return e}function KL(){var e=ZL,t=XL,n=null,r=pt(0),i=pt(Oa),s=pt(0);function a(o){var l,c=(o=ga(o)).length,u,d,h=0,p=new Array(c),f=new Array(c),g=+r.apply(this,arguments),m=Math.min(Oa,Math.max(-Oa,i.apply(this,arguments)-g)),v,x=Math.min(Math.abs(m)/c,s.apply(this,arguments)),_=x*(m<0?-1:1),E;for(l=0;l<c;++l)(E=f[p[l]=l]=+e(o[l],l,o))>0&&(h+=E);for(t!=null?p.sort(function(b,S){return t(f[b],f[S])}):n!=null&&p.sort(function(b,S){return n(o[b],o[S])}),l=0,d=h?(m-c*_)/h:0;l<c;++l,g=v)u=p[l],E=f[u],v=g+(E>0?E*d:0)+_,f[u]={data:o[u],index:l,value:E,startAngle:g,endAngle:v,padAngle:x};return f}return a.value=function(o){return arguments.length?(e=typeof o=="function"?o:pt(+o),a):e},a.sortValues=function(o){return arguments.length?(t=o,n=null,a):t},a.sort=function(o){return arguments.length?(n=o,t=null,a):n},a.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:pt(+o),a):r},a.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:pt(+o),a):i},a.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:pt(+o),a):s},a}var QL=lg(Sa);function og(e){this._curve=e}og.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function lg(e){function t(n){return new og(e(n))}return t._curve=e,t}function JL(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(lg(n)):t()._curve},e}function tk(){return JL(vs().curve(QL))}class ek{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function nk(e){return new ek(e,!0)}function rk(e){return e.source}function ik(e){return e.target}function sk(e){let t=rk,n=ik,r=Qc,i=Jc,s=null,a=null,o=Qa(l);function l(){let c;const u=Tw.call(arguments),d=t.apply(this,u),h=n.apply(this,u);if(s==null&&(a=e(c=o())),a.lineStart(),u[0]=d,a.point(+r.apply(this,u),+i.apply(this,u)),u[0]=h,a.point(+r.apply(this,u),+i.apply(this,u)),a.lineEnd(),c)return a=null,c+""||null}return l.source=function(c){return arguments.length?(t=c,l):t},l.target=function(c){return arguments.length?(n=c,l):n},l.x=function(c){return arguments.length?(r=typeof c=="function"?c:pt(+c),l):r},l.y=function(c){return arguments.length?(i=typeof c=="function"?c:pt(+c),l):i},l.context=function(c){return arguments.length?(c==null?s=a=null:a=e(s=c),l):s},l}function ak(){return sk(nk)}let mt=class{constructor(t,n,r){if(this.type="",this.renderType=it.HTML,this.id="",this.parent=void 0,this.configs={},this.model=t,this.services=n,r&&(this.configs=r,this.configs.id)){const i=y(this.model.getOptions(),"style","prefix");this.id=`${i}--${this.configs.id}`}this.parent||this.setParent(I(this.services.domUtils.getMainContainer()))}init(){}render(t=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(t){this.model=t}setServices(t){this.services=t}setParent(t){const n=this.parent;if(this.parent=t,!(n&&n.node()===t.node())&&this.type){const r=y(this.model.getOptions(),"style","prefix");this.parent?.classed(`${de}--${r}--${this.type}`,!0),n&&n.classed(`${de}--${r}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(t={ariaLabel:null,isPresentational:!1,withinChartClip:!1}){if(this.type){const n=y(this.model.getOptions(),"style","prefix"),r=this.id?`#${this.id}`:"",i=N.appendOrSelect(this.parent,`${this.renderType===it.SVG?"svg":"div"}${r}.${de}--${n}--${this.type}`);if(t.ariaLabel&&i.attr("aria-label",t.ariaLabel),t.isPresentational&&i.attr("role","presentation"),t.withinChartClip){const s=this.model.get("chartClipId");if(s){const a=I(`#${s}`).select("rect");if(a.size()!==0){const o=parseFloat(a.attr("height")),l=parseFloat(a.attr("width"));!isNaN(o)&&!isNaN(l)&&o>0&&l>0&&i.attr("clip-path",`url(#${s})`)}}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?at({},this.model.getOptions(),this.configs.options):this.model.getOptions()}};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:cg,setPrototypeOf:ug,isFrozen:ok,getPrototypeOf:lk,getOwnPropertyDescriptor:ck}=Object;let{freeze:oe,seal:Ie,create:hg}=Object,{apply:eu,construct:nu}=typeof Reflect<"u"&&Reflect;oe||(oe=function(e){return e}),Ie||(Ie=function(e){return e}),eu||(eu=function(e,t,n){return e.apply(t,n)}),nu||(nu=function(e,t){return new e(...t)});const to=ce(Array.prototype.forEach),uk=ce(Array.prototype.lastIndexOf),dg=ce(Array.prototype.pop),ys=ce(Array.prototype.push),hk=ce(Array.prototype.splice),eo=ce(String.prototype.toLowerCase),ru=ce(String.prototype.toString),pg=ce(String.prototype.match),bs=ce(String.prototype.replace),dk=ce(String.prototype.indexOf),pk=ce(String.prototype.trim),qe=ce(Object.prototype.hasOwnProperty),le=ce(RegExp.prototype.test),xs=fk(TypeError);function ce(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return eu(e,t,r)}}function fk(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nu(e,n)}}function gt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:eo;ug&&ug(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i=="string"){const s=n(i);s!==i&&(ok(t)||(t[r]=s),i=s)}e[i]=!0}return e}function mk(e){for(let t=0;t<e.length;t++)qe(e,t)||(e[t]=null);return e}function An(e){const t=hg(null);for(const[n,r]of cg(e))qe(e,n)&&(Array.isArray(r)?t[n]=mk(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=An(r):t[n]=r);return t}function _s(e,t){for(;e!==null;){const r=ck(e,t);if(r){if(r.get)return ce(r.get);if(typeof r.value=="function")return ce(r.value)}e=lk(e)}function n(){return null}return n}const fg=oe(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),iu=oe(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),su=oe(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),gk=oe(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),au=oe(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),vk=oe(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mg=oe(["#text"]),gg=oe(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ou=oe(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vg=oe(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),no=oe(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yk=Ie(/\{\{[\w\W]*|[\w\W]*\}\}/gm),bk=Ie(/<%[\w\W]*|[\w\W]*%>/gm),xk=Ie(/\$\{[\w\W]*/gm),_k=Ie(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ek=Ie(/^aria-[\-\w]+$/),yg=Ie(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ok=Ie(/^(?:\w+script|data):/i),Sk=Ie(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bg=Ie(/^html$/i),Tk=Ie(/^[a-z][.\w]*(-[.\w]+)+$/i);var xg=Object.freeze({__proto__:null,ARIA_ATTR:Ek,ATTR_WHITESPACE:Sk,CUSTOM_ELEMENT:Tk,DATA_ATTR:_k,DOCTYPE_NAME:bg,ERB_EXPR:bk,IS_ALLOWED_URI:yg,IS_SCRIPT_OR_DATA:Ok,MUSTACHE_EXPR:yk,TMPLIT_EXPR:xk});const Es={element:1,text:3,progressingInstruction:7,comment:8,document:9},wk=function(){return typeof window>"u"?null:window},$k=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},_g=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Eg(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wk();const t=A=>Eg(A);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==Es.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:p}=e,f=l.prototype,g=_s(f,"cloneNode"),m=_s(f,"remove"),v=_s(f,"nextSibling"),x=_s(f,"childNodes"),_=_s(f,"parentNode");if(typeof a=="function"){const A=n.createElement("template");A.content&&A.content.ownerDocument&&(n=A.content.ownerDocument)}let E,b="";const{implementation:S,createNodeIterator:$,createDocumentFragment:k,getElementsByTagName:C}=n,{importNode:R}=r;let M=_g();t.isSupported=typeof cg=="function"&&typeof _=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:H,ERB_EXPR:P,TMPLIT_EXPR:B,DATA_ATTR:O,ARIA_ATTR:w,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:D,CUSTOM_ELEMENT:U}=xg;let{IS_ALLOWED_URI:K}=xg,W=null;const j=gt({},[...fg,...iu,...su,...au,...mg]);let X=null;const ct=gt({},[...gg,...ou,...vg,...no]);let J=Object.seal(hg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,et=null,ut=!0,F=!0,q=!1,Z=!0,V=!1,dt=!0,ot=!1,It=!1,Ht=!1,rt=!1,Et=!1,Ne=!1,Te=!0,Ts=!1;const ws="user-content-";let xr=!0,Xe=!1,ci={},ui=null;const Vv=gt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Gv=null;const zv=gt({},["audio","video","img","source","image","track"]);let ku=null;const Fv=gt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vo="http://www.w3.org/1998/Math/MathML",yo="http://www.w3.org/2000/svg",kn="http://www.w3.org/1999/xhtml";let hi=kn,Du=!1,Ru=null;const rU=gt({},[vo,yo,kn],ru);let bo=gt({},["mi","mo","mn","ms","mtext"]),xo=gt({},["annotation-xml"]);const iU=gt({},["title","style","font","a","script"]);let $s=null;const sU=["application/xhtml+xml","text/html"],aU="text/html";let Xt=null,di=null;const oU=n.createElement("form"),jv=function(A){return A instanceof RegExp||A instanceof Function},Iu=function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(di&&di===A)){if((!A||typeof A!="object")&&(A={}),A=An(A),$s=sU.indexOf(A.PARSER_MEDIA_TYPE)===-1?aU:A.PARSER_MEDIA_TYPE,Xt=$s==="application/xhtml+xml"?ru:eo,W=qe(A,"ALLOWED_TAGS")?gt({},A.ALLOWED_TAGS,Xt):j,X=qe(A,"ALLOWED_ATTR")?gt({},A.ALLOWED_ATTR,Xt):ct,Ru=qe(A,"ALLOWED_NAMESPACES")?gt({},A.ALLOWED_NAMESPACES,ru):rU,ku=qe(A,"ADD_URI_SAFE_ATTR")?gt(An(Fv),A.ADD_URI_SAFE_ATTR,Xt):Fv,Gv=qe(A,"ADD_DATA_URI_TAGS")?gt(An(zv),A.ADD_DATA_URI_TAGS,Xt):zv,ui=qe(A,"FORBID_CONTENTS")?gt({},A.FORBID_CONTENTS,Xt):Vv,Y=qe(A,"FORBID_TAGS")?gt({},A.FORBID_TAGS,Xt):An({}),et=qe(A,"FORBID_ATTR")?gt({},A.FORBID_ATTR,Xt):An({}),ci=qe(A,"USE_PROFILES")?A.USE_PROFILES:!1,ut=A.ALLOW_ARIA_ATTR!==!1,F=A.ALLOW_DATA_ATTR!==!1,q=A.ALLOW_UNKNOWN_PROTOCOLS||!1,Z=A.ALLOW_SELF_CLOSE_IN_ATTR!==!1,V=A.SAFE_FOR_TEMPLATES||!1,dt=A.SAFE_FOR_XML!==!1,ot=A.WHOLE_DOCUMENT||!1,rt=A.RETURN_DOM||!1,Et=A.RETURN_DOM_FRAGMENT||!1,Ne=A.RETURN_TRUSTED_TYPE||!1,Ht=A.FORCE_BODY||!1,Te=A.SANITIZE_DOM!==!1,Ts=A.SANITIZE_NAMED_PROPS||!1,xr=A.KEEP_CONTENT!==!1,Xe=A.IN_PLACE||!1,K=A.ALLOWED_URI_REGEXP||yg,hi=A.NAMESPACE||kn,bo=A.MATHML_TEXT_INTEGRATION_POINTS||bo,xo=A.HTML_INTEGRATION_POINTS||xo,J=A.CUSTOM_ELEMENT_HANDLING||{},A.CUSTOM_ELEMENT_HANDLING&&jv(A.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(J.tagNameCheck=A.CUSTOM_ELEMENT_HANDLING.tagNameCheck),A.CUSTOM_ELEMENT_HANDLING&&jv(A.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(J.attributeNameCheck=A.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),A.CUSTOM_ELEMENT_HANDLING&&typeof A.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(J.allowCustomizedBuiltInElements=A.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),V&&(F=!1),Et&&(rt=!0),ci&&(W=gt({},mg),X=[],ci.html===!0&&(gt(W,fg),gt(X,gg)),ci.svg===!0&&(gt(W,iu),gt(X,ou),gt(X,no)),ci.svgFilters===!0&&(gt(W,su),gt(X,ou),gt(X,no)),ci.mathMl===!0&&(gt(W,au),gt(X,vg),gt(X,no))),A.ADD_TAGS&&(W===j&&(W=An(W)),gt(W,A.ADD_TAGS,Xt)),A.ADD_ATTR&&(X===ct&&(X=An(X)),gt(X,A.ADD_ATTR,Xt)),A.ADD_URI_SAFE_ATTR&&gt(ku,A.ADD_URI_SAFE_ATTR,Xt),A.FORBID_CONTENTS&&(ui===Vv&&(ui=An(ui)),gt(ui,A.FORBID_CONTENTS,Xt)),xr&&(W["#text"]=!0),ot&&gt(W,["html","head","body"]),W.table&&(gt(W,["tbody"]),delete Y.tbody),A.TRUSTED_TYPES_POLICY){if(typeof A.TRUSTED_TYPES_POLICY.createHTML!="function")throw xs('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof A.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xs('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=A.TRUSTED_TYPES_POLICY,b=E.createHTML("")}else E===void 0&&(E=$k(p,i)),E!==null&&typeof b=="string"&&(b=E.createHTML(""));oe&&oe(A),di=A}},Wv=gt({},[...iu,...su,...gk]),qv=gt({},[...au,...vk]),lU=function(A){let tt=_(A);(!tt||!tt.tagName)&&(tt={namespaceURI:hi,tagName:"template"});const Q=eo(A.tagName),wt=eo(tt.tagName);return Ru[A.namespaceURI]?A.namespaceURI===yo?tt.namespaceURI===kn?Q==="svg":tt.namespaceURI===vo?Q==="svg"&&(wt==="annotation-xml"||bo[wt]):!!Wv[Q]:A.namespaceURI===vo?tt.namespaceURI===kn?Q==="math":tt.namespaceURI===yo?Q==="math"&&xo[wt]:!!qv[Q]:A.namespaceURI===kn?tt.namespaceURI===yo&&!xo[wt]||tt.namespaceURI===vo&&!bo[wt]?!1:!qv[Q]&&(iU[Q]||!Wv[Q]):!!($s==="application/xhtml+xml"&&Ru[A.namespaceURI]):!1},_r=function(A){ys(t.removed,{element:A});try{_(A).removeChild(A)}catch{m(A)}},pi=function(A,tt){try{ys(t.removed,{attribute:tt.getAttributeNode(A),from:tt})}catch{ys(t.removed,{attribute:null,from:tt})}if(tt.removeAttribute(A),A==="is")if(rt||Et)try{_r(tt)}catch{}else try{tt.setAttribute(A,"")}catch{}},Yv=function(A){let tt=null,Q=null;if(Ht)A="<remove></remove>"+A;else{const Vt=pg(A,/^[\r\n\t ]+/);Q=Vt&&Vt[0]}$s==="application/xhtml+xml"&&hi===kn&&(A='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+A+"</body></html>");const wt=E?E.createHTML(A):A;if(hi===kn)try{tt=new h().parseFromString(wt,$s)}catch{}if(!tt||!tt.documentElement){tt=S.createDocument(hi,"template",null);try{tt.documentElement.innerHTML=Du?b:wt}catch{}}const Qt=tt.body||tt.documentElement;return A&&Q&&Qt.insertBefore(n.createTextNode(Q),Qt.childNodes[0]||null),hi===kn?C.call(tt,ot?"html":"body")[0]:ot?tt.documentElement:Qt},Xv=function(A){return $.call(A.ownerDocument||A,A,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Nu=function(A){return A instanceof d&&(typeof A.nodeName!="string"||typeof A.textContent!="string"||typeof A.removeChild!="function"||!(A.attributes instanceof u)||typeof A.removeAttribute!="function"||typeof A.setAttribute!="function"||typeof A.namespaceURI!="string"||typeof A.insertBefore!="function"||typeof A.hasChildNodes!="function")},Zv=function(A){return typeof o=="function"&&A instanceof o};function Dn(A,tt,Q){to(A,wt=>{wt.call(t,tt,Q,di)})}const Kv=function(A){let tt=null;if(Dn(M.beforeSanitizeElements,A,null),Nu(A))return _r(A),!0;const Q=Xt(A.nodeName);if(Dn(M.uponSanitizeElement,A,{tagName:Q,allowedTags:W}),dt&&A.hasChildNodes()&&!Zv(A.firstElementChild)&&le(/<[/\w!]/g,A.innerHTML)&&le(/<[/\w!]/g,A.textContent)||A.nodeType===Es.progressingInstruction||dt&&A.nodeType===Es.comment&&le(/<[/\w]/g,A.data))return _r(A),!0;if(!W[Q]||Y[Q]){if(!Y[Q]&&Jv(Q)&&(J.tagNameCheck instanceof RegExp&&le(J.tagNameCheck,Q)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Q)))return!1;if(xr&&!ui[Q]){const wt=_(A)||A.parentNode,Qt=x(A)||A.childNodes;if(Qt&&wt){const Vt=Qt.length;for(let Rn=Vt-1;Rn>=0;--Rn){const Ze=g(Qt[Rn],!0);Ze.__removalCount=(A.__removalCount||0)+1,wt.insertBefore(Ze,v(A))}}}return _r(A),!0}return A instanceof l&&!lU(A)||(Q==="noscript"||Q==="noembed"||Q==="noframes")&&le(/<\/no(script|embed|frames)/i,A.innerHTML)?(_r(A),!0):(V&&A.nodeType===Es.text&&(tt=A.textContent,to([H,P,B],wt=>{tt=bs(tt,wt," ")}),A.textContent!==tt&&(ys(t.removed,{element:A.cloneNode()}),A.textContent=tt)),Dn(M.afterSanitizeElements,A,null),!1)},Qv=function(A,tt,Q){if(Te&&(tt==="id"||tt==="name")&&(Q in n||Q in oU))return!1;if(!(F&&!et[tt]&&le(O,tt))&&!(ut&&le(w,tt))){if(!X[tt]||et[tt]){if(!(Jv(A)&&(J.tagNameCheck instanceof RegExp&&le(J.tagNameCheck,A)||J.tagNameCheck instanceof Function&&J.tagNameCheck(A))&&(J.attributeNameCheck instanceof RegExp&&le(J.attributeNameCheck,tt)||J.attributeNameCheck instanceof Function&&J.attributeNameCheck(tt))||tt==="is"&&J.allowCustomizedBuiltInElements&&(J.tagNameCheck instanceof RegExp&&le(J.tagNameCheck,Q)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Q))))return!1}else if(!ku[tt]&&!le(K,bs(Q,D,""))&&!((tt==="src"||tt==="xlink:href"||tt==="href")&&A!=="script"&&dk(Q,"data:")===0&&Gv[A])&&!(q&&!le(L,bs(Q,D,"")))&&Q)return!1}return!0},Jv=function(A){return A!=="annotation-xml"&&pg(A,U)},t1=function(A){Dn(M.beforeSanitizeAttributes,A,null);const{attributes:tt}=A;if(!tt||Nu(A))return;const Q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:X,forceKeepAttr:void 0};let wt=tt.length;for(;wt--;){const Qt=tt[wt],{name:Vt,namespaceURI:Rn,value:Ze}=Qt,un=Xt(Vt),Pu=Ze;let ie=Vt==="value"?Pu:pk(Pu);if(Q.attrName=un,Q.attrValue=ie,Q.keepAttr=!0,Q.forceKeepAttr=void 0,Dn(M.uponSanitizeAttribute,A,Q),ie=Q.attrValue,Ts&&(un==="id"||un==="name")&&(pi(Vt,A),ie=ws+ie),dt&&le(/((--!?|])>)|<\/(style|title)/i,ie)){pi(Vt,A);continue}if(Q.forceKeepAttr)continue;if(!Q.keepAttr){pi(Vt,A);continue}if(!Z&&le(/\/>/i,ie)){pi(Vt,A);continue}V&&to([H,P,B],uU=>{ie=bs(ie,uU," ")});const e1=Xt(A.nodeName);if(!Qv(e1,un,ie)){pi(Vt,A);continue}if(E&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Rn)switch(p.getAttributeType(e1,un)){case"TrustedHTML":{ie=E.createHTML(ie);break}case"TrustedScriptURL":{ie=E.createScriptURL(ie);break}}if(ie!==Pu)try{Rn?A.setAttributeNS(Rn,Vt,ie):A.setAttribute(Vt,ie),Nu(A)?_r(A):dg(t.removed)}catch{pi(Vt,A)}}Dn(M.afterSanitizeAttributes,A,null)},cU=function A(tt){let Q=null;const wt=Xv(tt);for(Dn(M.beforeSanitizeShadowDOM,tt,null);Q=wt.nextNode();)Dn(M.uponSanitizeShadowNode,Q,null),Kv(Q),t1(Q),Q.content instanceof s&&A(Q.content);Dn(M.afterSanitizeShadowDOM,tt,null)};return t.sanitize=function(A){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=null,wt=null,Qt=null,Vt=null;if(Du=!A,Du&&(A="<!-->"),typeof A!="string"&&!Zv(A))if(typeof A.toString=="function"){if(A=A.toString(),typeof A!="string")throw xs("dirty is not a string, aborting")}else throw xs("toString is not a function");if(!t.isSupported)return A;if(It||Iu(tt),t.removed=[],typeof A=="string"&&(Xe=!1),Xe){if(A.nodeName){const un=Xt(A.nodeName);if(!W[un]||Y[un])throw xs("root node is forbidden and cannot be sanitized in-place")}}else if(A instanceof o)Q=Yv("<!---->"),wt=Q.ownerDocument.importNode(A,!0),wt.nodeType===Es.element&&wt.nodeName==="BODY"||wt.nodeName==="HTML"?Q=wt:Q.appendChild(wt);else{if(!rt&&!V&&!ot&&A.indexOf("<")===-1)return E&&Ne?E.createHTML(A):A;if(Q=Yv(A),!Q)return rt?null:Ne?b:""}Q&&Ht&&_r(Q.firstChild);const Rn=Xv(Xe?A:Q);for(;Qt=Rn.nextNode();)Kv(Qt),t1(Qt),Qt.content instanceof s&&cU(Qt.content);if(Xe)return A;if(rt){if(Et)for(Vt=k.call(Q.ownerDocument);Q.firstChild;)Vt.appendChild(Q.firstChild);else Vt=Q;return(X.shadowroot||X.shadowrootmode)&&(Vt=R.call(r,Vt,!0)),Vt}let Ze=ot?Q.outerHTML:Q.innerHTML;return ot&&W["!doctype"]&&Q.ownerDocument&&Q.ownerDocument.doctype&&Q.ownerDocument.doctype.name&&le(bg,Q.ownerDocument.doctype.name)&&(Ze="<!DOCTYPE "+Q.ownerDocument.doctype.name+`>
`+Ze),V&&to([H,P,B],un=>{Ze=bs(Ze,un," ")}),E&&Ne?E.createHTML(Ze):Ze},t.setConfig=function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Iu(A),It=!0},t.clearConfig=function(){di=null,It=!1},t.isValidAttribute=function(A,tt,Q){di||Iu({});const wt=Xt(A),Qt=Xt(tt);return Qv(wt,Qt,Q)},t.addHook=function(A,tt){typeof tt=="function"&&ys(M[A],tt)},t.removeHook=function(A,tt){if(tt!==void 0){const Q=uk(M[A],tt);return Q===-1?void 0:hk(M[A],Q,1)[0]}return dg(M[A])},t.removeHooks=function(A){M[A]=[]},t.removeAllHooks=function(){M=_g()},t}var lu=Eg();const ro=e=>lu.sanitize(e,{USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),Mk=e=>lu.sanitize(e,{NAMESPACE:"http://www.w3.org/2000/svg",USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),ln=e=>lu.sanitize(e,{ALLOWED_TAGS:[]}),Og=class r1 extends mt{constructor(){super(...arguments),this.type="toolbar",this.renderType=it.HTML}init(){const t=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(T.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",t)}),this.services.events.addEventListener(T.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",t)})}render(t=!0){const n=this.getComponentContainer({ariaLabel:"toolbar"}).attr("role","group");if(y(this.getOptions(),"data","loading"))n.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=n.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:r,overflowMenuItemList:i}=this.getControlConfigs();i&&r.push(this.getOverflowButtonConfig());const s=n.selectAll("div.toolbar-control").data(r,l=>l.id);s.exit().remove();const a=s.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu"),o=this;a.merge(s).classed("disabled",l=>l.shouldBeDisabled()).attr("role","button").attr("aria-disabled",l=>l.shouldBeDisabled()).attr("aria-label",l=>l.title).html(l=>`
			<button
	 			type="button"
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${ln(l.id)}`)}" aria-label="${ln(l.title)}">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					${Mk(l.iconSVG.content)}
				</svg>
			</button>`).each(function(l,c){I(this).select("svg").style("pointer-events","none").style("will-change","transform").style("width",l.iconSVG.width!==void 0?l.iconSVG.width:"20px").style("height",l.iconSVG.height!==void 0?l.iconSVG.height:"20px"),I(this).select("button").on("mouseover focus",function(u){const d=I(this);d.classed("hovered",!0),o.services.events.dispatchEvent(T.Toolbar.SHOW_TOOLTIP,{event:u,hoveredElement:d,content:l.title,noWrap:!0,placements:["top","bottom"]})}).on("mouseout blur",function(){o.services.events.dispatchEvent(T.Toolbar.HIDE_TOOLTIP)}).on("click",u=>{l.shouldBeDisabled()||o.triggerFunctionAndEvent(l,u,this)}).on("keydown",u=>{u.key&&u.key==="Enter"||u.key===" "?(u.preventDefault(),o.triggerFunctionAndEvent(l,u,this)):u.key&&u.key==="ArrowLeft"?o.focusOnPreviousEnabledToolbarItem(c):u.key&&u.key==="ArrowRight"&&o.focusOnNextEnabledToolbarItem(c)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:t}=this.getControlConfigs(),n=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(t,i=>y(i,"id"));n.exit().remove();const r=n.enter().append("li").attr("id",i=>this.services.domUtils.generateElementIDString(`control-${i.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);r.append("button").attr("type","button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),r.merge(n).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).attr("aria-disabled",i=>i.shouldBeDisabled()).selectAll("button").text(i=>i.title)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(t){this.overflowMenu&&(this.overflowMenu.classed("is-open",t),this.overflowButton&&(this.overflowButton.attr("aria-expanded",t),I(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",t).classed("cds--overflow-menu--open",t)),t?this.services.events.dispatchEvent(T.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(T.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(t){const n=this.getToolbarButtonItems();let r=n.length;for(let i=t-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=I(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnNextEnabledToolbarItem(t){const n=this.getToolbarButtonItems();let r=-1;for(let i=t+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=I(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnPreviousEnabledMenuItem(t){const n=this.getOverflowMenuItems();let r=n.length;for(let i=t-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=I(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}focusOnNextEnabledMenuItem(t){const n=this.getOverflowMenuItems();let r=-1;for(let i=t+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=I(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}toggleOverflowMenu(t){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const n=this;this.getOverflowMenuItems().forEach((r,i)=>{const s=I(`#${this.services.domUtils.generateElementIDString(`control-${r.id}`)}`);s!==null&&(s.on("click",()=>{n.triggerFunctionAndEvent(r,t,s.node()),n.updateOverflowMenu(!1)}),s.on("keydown",a=>{a&&a.key==="Enter"?n.triggerFunctionAndEvent(r,t,s.node()):a&&a.key==="ArrowUp"?n.focusOnPreviousEnabledMenuItem(i):a&&a.key==="ArrowDown"?n.focusOnNextEnabledMenuItem(i):a&&a.key==="Escape"&&n.updateOverflowMenu(!1),a.preventDefault()}))}),n.focusOnNextEnabledMenuItem(-1)}t&&t.stopImmediatePropagation()}triggerFunctionAndEvent(t,n,r){typeof t.shouldBeDisabled=="function"&&t.shouldBeDisabled()||(typeof t.clickFunction=="function"&&t.clickFunction(n),this.services.events.dispatchEvent(T.Toolbar.BUTTON_CLICK,{control:t,event:n,element:r}))}getControlConfigs(){const t=y(this.getOptions(),"toolbar","numberOfIcons")-1,n=y(this.getOptions(),"toolbar","controls"),r=[],i=[],s=[];return n.forEach(a=>{let o=null;if(a.type===xt.CUSTOM)y(a,"id")===null&&(a.id=`toolbar-button-${r1.buttonID++}`),y(a,"shouldBeDisabled")===null&&(a.shouldBeDisabled=()=>!1),o=a;else{const l=this.services.domUtils.isFullScreenMode();a.type===xt.MAKE_FULLSCREEN&&l?a.type=xt.EXIT_FULLSCREEN:a.type===xt.EXIT_FULLSCREEN&&!l&&(a.type=xt.MAKE_FULLSCREEN),o=this.getControlConfigByType(a.type)}o&&(o.text=a.text?a.text:a.type,o.id.indexOf("toolbar-export")!==-1?r.push(o):i.length<t?y(o,"iconSVG","content")===null?s.push(o):i.push(o):s.push(o))}),s.push(...r),s.length?{buttonList:i,overflowMenuItemList:s}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:t,overflowMenuItemList:n}=this.getControlConfigs();return n&&t.push(this.getOverflowButtonConfig()),t||[]}getOverflowMenuItems(){const{overflowMenuItemList:t}=this.getControlConfigs();return t||[]}getOverflowButtonConfig(){const{moreOptions:t}=y(this.model.getOptions(),"locale","translations","toolbar");return{id:"toolbar-overflow-menu",title:t,shouldBeDisabled:()=>!1,iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:n=>this.toggleOverflowMenu(n)}}getControlConfigByType(t){const n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),r=this.model.getDisplayData(),i=this.model.getOptions(),{exportAsCSV:s,exportAsJPG:a,exportAsPNG:o,zoomIn:l,zoomOut:c,resetZoom:u,makeFullScreen:d,exitFullScreen:h,showAsTable:p}=y(i,"locale","translations","toolbar");let f;switch(t){case xt.ZOOM_IN:n&&(f={id:"toolbar-zoomIn",title:l,shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.zoom.zoomIn()});break;case xt.ZOOM_OUT:n&&(f={id:"toolbar-zoomOut",title:c,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.zoom.zoomOut()});break;case xt.RESET_ZOOM:n&&(f={id:"toolbar-resetZoom",title:u,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case xt.MAKE_FULLSCREEN:f={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(t),width:"15px",height:"15px"},title:d,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case xt.EXIT_FULLSCREEN:f={id:"toolbar-exitfullscreen",iconSVG:{content:this.getControlIconByType(t),width:"15px",height:"15px"},title:h,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case xt.SHOW_AS_DATATABLE:f={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(t)},title:p,shouldBeDisabled:()=>r.length===0,clickFunction:()=>this.services.events.dispatchEvent(T.Modal.SHOW)};break;case xt.EXPORT_CSV:f={id:"toolbar-export-CSV",title:s,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.model.exportToCSV()};break;case xt.EXPORT_PNG:f={id:"toolbar-export-PNG",title:o,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case xt.EXPORT_JPG:f={id:"toolbar-export-JPG",title:a,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(t)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+t)}return f}getControlIconByType(t){switch(t){case xt.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case xt.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case xt.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case xt.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case xt.EXIT_FULLSCREEN:return'<polygon points="4 18 4 20 10.586 20 2 28.582 3.414 30 12 21.414 12 28 14 28 14 18 4 18"/><polygon points="30 3.416 28.592 2 20 10.586 20 4 18 4 18 14 28 14 28 12 21.414 12 30 3.416"/>';case xt.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case xt.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case xt.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case xt.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+t)}}};Og.buttonID=0;let io=Og;const Sg=class i1 extends mt{constructor(t,n,r,i){super(t,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=i1.instanceID++,this.init()}init(){this.children.forEach(t=>{t.components.forEach(n=>{n.init()})})}getPreferedAndFixedSizeSum(){const t=this.parent;let n=0;return t.selectAll(`div.layout-child-${this._instanceID}`).filter(r=>{const i=y(r,"growth");return i===lt.PREFERRED||i===lt.FIXED}).each(function(r){n+=r.size}),n}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(t=>y(t,"growth")===lt.STRETCH).size()}render(t=!0){const n=this.model.getOptions(),r=this.parent,{width:i,height:s}=N.getHTMLElementSize(r.node()),a=this.configs.direction===Mt.ROW||this.configs.direction===Mt.ROW_REVERSE,o=y(this.model.getOptions(),"style","prefix"),l=r.classed(`${de}--${o}--layout-row`,this.configs.direction===Mt.ROW).classed(`${de}--${o}--layout-row-reverse`,this.configs.direction===Mt.ROW_REVERSE).classed(`${de}--${o}--layout-column`,this.configs.direction===Mt.COLUMN).classed(`${de}--${o}--layout-column-reverse`,this.configs.direction===Mt.COLUMN_REVERSE).classed(`${de}--${o}--layout-alignitems-center`,this.configs.alignItems===jn.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);l.enter().append("div").merge(r.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",u=>`layout-child layout-child-${this._instanceID} ${u.id}`).each(function(u){u.components.forEach(d=>{const h=I(this),p=y(u,"renderType")===it.SVG;d.setParent(p?N.appendOrSelect(h,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):h),p&&!h.select("svg.layout-svg-wrapper").attr("aria-label")&&h.select("svg.layout-svg-wrapper").attr("aria-label",n?.accessibility?.svgAriaLabel||n?.title);const f=y(u,"growth");(f===lt.PREFERRED||f===lt.FIXED)&&d.render(t)})}),r.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(u){const d=y(u,"growth"),h=y(u,"renderType")===it.SVG?N.getSVGElementSize(I(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):N.getHTMLElementSize(this);if(d===lt.PREFERRED){const p=a?h.width:h.height,f=a?i:s;u.size=p/f*100}}),l.exit().remove(),this.children.filter(u=>y(u,"growth")===lt.STRETCH).forEach(u=>{u.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});const c=r.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);a?c.style("width",u=>`${u.size/100*i}px`).style("height","100%"):c.style("height",u=>`${u.size/100*s}px`).style("width","100%"),c.each(function(u){u.components.forEach(d=>{y(u,"growth")===lt.STRETCH&&d.render(t)})})}setModel(t){super.setModel(t),this.children.forEach(n=>{n.components.forEach(r=>r.setModel(t))})}setServices(t){super.setServices(t),this.children.forEach(n=>{n.components.forEach(r=>r.setServices(t))})}destroy(){this.children.forEach(t=>{t.components.forEach(n=>n.destroy())})}};Sg.instanceID=Math.floor(Math.random()*99999999999);let Oe=Sg;class Ln extends mt{constructor(){super(...arguments),this.type="spacer"}render(t=!1){this.getComponentContainer({isPresentational:!0}).style("width",`${this.configs.size||dp.default.size}px`).style("height",`${this.configs.size||dp.default.size}px`).attr("opacity",0)}}class so extends mt{constructor(t,n,r){super(t,n,r),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{const i=this.services.domUtils.getChartID();this.modal.attr("data-modal",!0).attr("class","cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby",`${i}__modal-title`).attr("aria-describedby",`${i}__modal-description`).attr("tabindex",-1).style("opacity",1).style("visibility","visible"),this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),this.modal.on("click",this.handleHideModal),this.modal.select(".cds--modal-container").on("click",s=>{s.stopPropagation()}),this.modal.select(".cds--modal-close").on("click",this.handleHideModal),typeof window<"u"&&window.addEventListener("keydown",this.handleEscapeKey)},this.handleEscapeKey=i=>{i.key==="Escape"&&this.handleHideModal()},this.handleHideModal=()=>{this.modal.attr("role",null).attr("aria-modal",null).attr("aria-labelledby",null).attr("aria-describedby",null).attr("tabindex",null).style("opacity",0).style("visibility","hidden"),this.modal.on("click",null),this.modal.select(".cds--modal-container").on("click",null),this.modal.select(".cds--modal-close").on("click",null),typeof window<"u"&&window.removeEventListener("keydown",this.handleEscapeKey)},this.init()}addEventListeners(){this.services.events.addEventListener(T.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(T.Modal.SHOW,this.handleShowModal)}getModalHTML(){const t=this.services.domUtils.getChartID(),n=this.model.getOptions(),{title:r,downloadAsCSV:i}=y(n,"locale","translations","tabularRep"),s=y(n,"style","prefix"),a=this.model.getTabularDataArray();return`
		<div class="cds--modal-container">
			<div class="cds--modal-header">

				<p class="cds--modal-header__label cds--type-delta" id="${t}__modal-title">${r}</p>

				<p class="cds--modal-header__heading cds--type-beta" id="${t}__modal-description">${ln(n.title)}</p>

				<button class="cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							${vt(a,0).map(o=>`<th scope="col">
								<div class="cds--table-header-label">${ln(o)}</div>
							</th>`).join("")}
						</tr>
					</thead>

					<tbody>${a.slice(1).map(o=>`
							<tr>
								${o.map(l=>`<td>${ln(l)}</td>`).join("")}
							</tr>`).join("")}
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer">
			  <div class="${de}--${s}-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary" type="button" data-modal-primary-focus>${i}</button>
			</div>
		</div>`}render(t=!1){const n=this.model.getOptions();if(!this.isEventListenerAdded){const r=I(this.services.domUtils.getHolder()),i=y(n,"style","prefix");this.modal=N.appendOrSelect(r,`div.${de}--${i}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class Os extends mt{constructor(){super(...arguments),this.type="title",this.renderType=it.HTML}render(t=!1){const n=this.getComponentContainer(),r=y(this.getOptions(),"title"),i=n.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(s=>ln(s)),i.node()&&i.node().offsetWidth<i.node().scrollWidth){const s=this;i.on("mouseover",function(a){s.services.events.dispatchEvent(T.Tooltip.SHOW,{event:a,hoveredElement:i,content:i.text()})}).on("mousemove",function(a){s.services.events.dispatchEvent(T.Tooltip.MOVE,{event:a})}).on("mouseout",function(){s.services.events.dispatchEvent(T.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(t,n){if(n<=0)return;const r=t.text();if(t.node().getComputedTextLength()>n){t.append("tspan").text("...");const i=N.appendOrSelect(t,"tspan").node().getComputedTextLength(),s=t.text(),a=this.getSubstringIndex(t.node(),0,s.length-1,n-i);t.html(s.substring(0,a-1)).append("tspan").text("...");const o=this;t.on("mouseover",function(l){o.services.events.dispatchEvent(T.Tooltip.SHOW,{event:l,hoveredElement:t,content:r})}).on("mousemove",function(l){o.services.events.dispatchEvent(T.Tooltip.MOVE,{event:l})}).on("mouseout",function(){o.services.events.dispatchEvent(T.Tooltip.HIDE)})}}getMaxTitleWidth(){return N.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(t,n,r,i){const s=Math.floor((r+n)/2);return t.getSubStringLength(0,s)>i?this.getSubstringIndex(t,n,s,i):t.getSubStringLength(0,s)<i?t.getSubStringLength(0,s+1)>i?s:this.getSubstringIndex(t,s,r,i):s}}class cu extends mt{constructor(){super(...arguments),this.type="legend",this.renderType=it.HTML}render(t=!1){const n=this.getOptions(),r=y(n,"legend"),i=y(r,"alignment"),s=y(n,"legend","orientation");let a=this.model.getDataGroups();const{DISABLED:o}=Nt.items.status,l=a.some(x=>x.status===o),c=y(r,"order"),u=this.getComponentContainer().classed("center-aligned",i===Ft.CENTER).classed("right-aligned",i===Ft.RIGHT).classed(s||"horizontal",!0).classed("has-deactivated-items",l).attr("role",ht.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(a=this.sortDataGroups(a,c));const d=u.selectAll("div.legend-item").data(a,x=>x.name),h=d.enter().append("div").attr("class","legend-item");h.merge(u.selectAll("div.legend-item")).classed("active",function(x){return x.status===Nt.items.status.ACTIVE});const p=y(this.getOptions(),"legend","clickable");u.classed("clickable",p&&a.length>1);const f=Nt.checkbox.radius,g=h.append("div").classed("checkbox",!0),m=g.merge(d.select("div.checkbox")).attr("role",ht.CHECKBOX).attr("tabindex",p?0:-1).attr("aria-labelledby",(x,_)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${_}-title`)).attr("aria-checked",({status:x})=>x===Nt.items.status.ACTIVE).attr("width",f*2).attr("height",f*2).attr("class",x=>this.model.getColorClassName({classNameTypes:[st.BACKGROUND],dataGroupName:x.name,originalClassName:"checkbox"})).style("background",x=>x.status===Nt.items.status.ACTIVE?this.model.getFillColor(x.name)||this.model.getStrokeColor(x.name):null).classed("active",function(x){return x.status===Nt.items.status.ACTIVE});g.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),h.append("p").merge(d.select("p"));const v=y(n,"legend","additionalItems");if(v&&a.length){const x=this,_=u.selectAll("div.additional-item").data(v);_.exit().remove();const E=_.enter().append("div").merge(_).classed("legend-item",!0).classed("additional",!0).attr("role","img").attr("aria-labelledby",($,k)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${m.size()+k}-title`));E.selectAll("*").remove();let b,S=1;E.append("svg").classed("icon",!0).each(function($){const k=I(this);!b||b!=$.type?(b=$.type,S=1):S++,x.addAdditionalItem(k,$,S)}),E.append("p").merge(E.select("p")),this.truncateLegendText()}d.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),p&&h.size()>1&&this.addEventListeners()}sortDataGroups(t,n){if(t.sort((r,i)=>n.indexOf(r.name)-n.indexOf(i.name)),n.length<t.length){const r=t.length-n.length;return t.slice(r).concat(t.slice(0,r))}return t}addAdditionalItem(t,n,r){const{width:i,height:s}=Nt.area;if(n.type===Wt.RADIUS?t.style("width",`${s}px`).style("height",`${s}px`):t.style("width",`${i}px`).style("height",`${s}px`),n.type===Wt.RADIUS){const{iconData:a,fill:o,stroke:l}=Nt.radius;t.attr("fill","none").selectAll("circle").data(a).enter().append("circle").classed("radius",!0).attr("role",ht.IMG).attr("aria-label","radius").attr("cx",c=>c.cx).attr("cy",c=>c.cy).attr("r",c=>c.r).style("fill",n.fill?n.fill:o).style("stroke",n.stroke?n.stroke:l)}else if(n.type===Wt.LINE){const a=Nt.line;t.select("line.line").empty()&&t.append("line").classed(`line-${r}`,!0).attr("role",ht.IMG).attr("aria-label","line").attr("x1",0).attr("y1",a.yPosition).attr("x2",i).attr("y2",a.yPosition).style("stroke",n.stroke?n.stroke:a.stroke).style("stroke-width",a.strokeWidth)}else if(n.type===Wt.AREA)t.select("rect.area").empty()&&t.append("rect").classed(`area-${r}`,!0).attr("role",ht.IMG).attr("aria-label","area").attr("width",i).attr("height",s).style("fill",r>3&&!n.fill?Nt.area.fill:n.fill).style("stroke",n.stroke);else if(n.type===Wt.SIZE){const{iconData:a,fill:o,stroke:l}=Nt.size;t.attr("fill","none").attr("role",ht.IMG).attr("aria-label","size").selectAll("rect").data(a).enter().append("rect").classed("size",!0).attr("width",c=>c.width).attr("height",c=>c.height).attr("y",()=>0).style("fill",n.fill?n.fill:o).style("stroke",n.stroke?n.stroke:l).style("stroke-width",1)}else if(n.type===Wt.QUARTILE){const{iconData:a}=Nt.quartile;t.selectAll("rect").attr("role",ht.IMG).attr("aria-label","quartile").data(a).enter().append("rect").attr("class",(o,l)=>`quartile-${l===0?"wrapper":"line"}`).attr("x",o=>o.x).attr("y",o=>o.y).attr("width",o=>o.width).attr("height",o=>o.height)}else if(n.type===Wt.ZOOM){const{iconData:a,color:o}=y(Nt,"zoom"),l=t.attr("role",ht.IMG).attr("aria-label","zoom").selectAll("g.icon").data(a).enter();l.append("g").attr("x",c=>c.x).attr("y",c=>c.y).attr("width",c=>c.width).attr("height",c=>c.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>n.color?n.color:o),l.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>n.color?n.color:o)}}truncateLegendText(){const t=this.getComponentContainer(),n=y(this.getOptions(),"legend","truncation"),r=y(n,"type"),i=y(n,"threshold"),s=y(n,"numCharacter"),a=t.selectAll("div.legend-item p");a.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),r!==we.NONE?a.html(function(o){const l=ln(o.name);return l.length>i&&l.length!==s?qi(l,r,s):l}):a.html(o=>ln(o.name))}addEventListeners(){const t=this,n=this.getComponentContainer(),r=this.getOptions(),i=y(r,"legend"),s=y(i,"truncation");n.selectAll("div.legend-item").on("mouseover",function(a){t.services.events.dispatchEvent(T.Legend.ITEM_HOVER,{hoveredElement:I(this)});const o=I(this);o.select("div.checkbox").classed("hovered",!0);const l=o.datum();l.name.length>s.threshold&&s.numCharacter<l.name.length&&s.type!==we.NONE&&t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:a,hoveredElement:o,content:l.name})}).on("mousemove",function(a){I(this).datum().name.length>s.threshold&&s.type!==we.NONE&&t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:a})}).on("click",function(){t.services.events.dispatchEvent(T.Legend.ITEM_CLICK,{clickedElement:I(this)});const a=I(this).datum();t.model.toggleDataLabel(a.name)}).on("mouseout",function(){const a=I(this);a.select("div.checkbox").classed("hovered",!1),a.datum().name.length>s.threshold&&s.type!==we.NONE&&t.services.events.dispatchEvent(T.Tooltip.HIDE),t.services.events.dispatchEvent(T.Legend.ITEM_MOUSEOUT,{hoveredElement:a})}),n.selectAll("div.legend-item div.checkbox").on("keyup",function(a){a.key&&a.key==="Tab"&&t.services.events.dispatchEvent(T.Legend.ITEM_HOVER,{hoveredElement:I(this)})}),n.selectAll("div.legend-item div.checkbox").on("keydown",function(a,o){a.key&&a.key===" "?(a.preventDefault(),t.model.toggleDataLabel(o.name)):a.key&&a.key==="Tab"&&t.services.events.dispatchEvent(T.Legend.ITEM_MOUSEOUT,{hoveredElement:I(this)})}),n.selectAll("g.additional-item").on("mouseover",function(a){const o=I(this),l=o.datum();l.name.length>s.threshold&&t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:a,hoveredElement:o,content:l.name})})}}class Tg extends mt{constructor(t,n,r){super(t,n,r),this.type="chart-clip",this.renderType=it.SVG,this.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(t=!0){this.createClipPath()}createClipPath(){const t=this.parent,{cartesianScales:n}=this.services;if(!n)throw new Error("Service cartesianScales was undefined");const r=n.getMainXScale(),i=n.getMainYScale(),[s,a]=r.range(),[o,l]=i.range();if(!t)throw new Error("svg is undefined");this.chartClipPath=N.appendOrSelect(t,`clipPath.${this.type}`).attr("id",this.chartClipId);const c=N.appendOrSelect(this.chartClipPath,`rect.${this.type}`);a-s>0&&c.attr("x",s).attr("y",l).attr("width",a-s).attr("height",o-l),this.chartClipPath.merge(c).lower()}}class Ck extends Tg{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999)}createClipPath(){const t=this.parent,{width:n,height:r}=N.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=N.appendOrSelect(t,`clipPath.${this.type}`).attr("id",this.chartClipId);const i=N.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",n).attr("height",r),this.chartClipPath.merge(i).lower()}}var si,Gt;(function(e){e.LEFT="left",e.RIGHT="right",e.TOP="top",e.BOTTOM="bottom"})(Gt||(Gt={}));var wg=(si={},si[Gt.LEFT]=function(e,t,n){return{top:e.top-Math.round(t.offsetHeight/2)+Math.round(n.height/2),left:Math.round(e.left-t.offsetWidth)}},si[Gt.RIGHT]=function(e,t,n){return{top:e.top-Math.round(t.offsetHeight/2)+Math.round(n.height/2),left:Math.round(e.left+n.width)}},si[Gt.TOP]=function(e,t,n){return{top:Math.round(e.top-t.offsetHeight),left:e.left-Math.round(t.offsetWidth/2)+Math.round(n.width/2)}},si[Gt.BOTTOM]=function(e,t,n){return{top:Math.round(e.top+n.height),left:e.left-Math.round(t.offsetWidth/2)+Math.round(n.width/2)}},si),$g=typeof window<"u"?window:{innerHeight:0,innerWidth:0},ao=function(){function e(t){t===void 0&&(t={}),this.positions=wg,this.positions=Object.assign({},wg,t)}return e.prototype.getRelativeOffset=function(t){for(var n={left:t.offsetLeft,top:t.offsetTop};t.offsetParent&&getComputedStyle(t.offsetParent).position==="static";)n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;return n},e.prototype.getAbsoluteOffset=function(t){for(var n=t,r={top:0,left:0};n.offsetParent;){var i=getComputedStyle(n.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),n=n.offsetParent}var s=t.getBoundingClientRect(),a=document.body.getBoundingClientRect();return{top:s.top-a.top+r.top,left:s.left-a.left+r.left}},e.prototype.findRelative=function(t,n,r){var i=this.getRelativeOffset(t),s=t.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},e.prototype.findAbsolute=function(t,n,r){var i=this.getAbsoluteOffset(t),s=t.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},e.prototype.findPosition=function(t,n,r,i){i===void 0&&(i=this.getAbsoluteOffset.bind(this));var s=i(t),a=t.getBoundingClientRect();return this.calculatePosition(s,a,n,r)},e.prototype.findPositionAt=function(t,n,r){return this.calculatePosition(t,{top:0,left:0,height:0,width:0},n,r)},e.prototype.getPlacementBox=function(t,n){var r=t.offsetHeight+n.top,i=t.offsetWidth+n.left;return{top:n.top,bottom:r,left:n.left,right:i}},e.prototype.addOffset=function(t,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),Object.assign({},t,{top:t.top+n,left:t.left+r})},e.prototype.setElement=function(t,n){t.style.top=n.top+"px",t.style.left=n.left+"px"},e.prototype.findBestPlacement=function(t,n,r,i,s){var a=this;i===void 0&&(i=this.defaultContainerFunction.bind(this)),s===void 0&&(s=this.findPosition.bind(this));var o=r.map(function(l){var c=s(t,n,l),u=a.getPlacementBox(n,c),d=0,h=0,p=i();u.top<p.top?d=p.top-u.top:u.bottom>p.height&&(d=u.bottom-p.height),u.left<p.left?h=p.left-u.left:u.right>p.width&&(h=u.right-p.width),d&&!h?h=1:h&&!d&&(d=1);var f=n.offsetHeight*n.offsetWidth,g=d*h,m=f-g,v=m/f;return{placement:l,weight:v}});return o.sort(function(l,c){return c.weight-l.weight}),o[0].placement},e.prototype.findBestPlacementAt=function(t,n,r,i){var s=this;i===void 0&&(i=this.defaultContainerFunction.bind(this));var a=function(o,l,c){return s.findPositionAt(t,l,c)};return this.findBestPlacement(null,n,r,i,a)},e.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:$g.innerHeight,width:$g.innerWidth}},e.prototype.calculatePosition=function(t,n,r,i){return this.positions[i]?this.positions[i](t,r,n):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},e}();new ao;class uu extends mt{constructor(t,n,r){super(t,n,r),this.type="tooltip",this.renderType=it.HTML,this.isEventListenerAdded=!1,this.lastTriggeredEventType="",this.positionService=new ao,this.handleShowTooltip=i=>{const s=i.detail.data||i.detail.items,a=I(i.detail.event.target).datum();let o;const l=this.formatItems(this.getItems(i));i.detail.content?o=`<div class="title-tooltip"><p>${ro(i.detail.content)}</p></div>`:o=ro(this.getTooltipHTML(l));const c=N.appendOrSelect(this.tooltip,"div.content-box");if(y(this.getOptions(),"tooltip","customHTML"))if(i.detail.content){const u=`<div class="title-tooltip"><p>${ro(i.detail.content)}</p></div>`;c.html(u)}else c.html(`<div class="title-tooltip"><p>${ro(this.model.getOptions().tooltip.customHTML(s,o,a))}</p></div>`);else c.html(o);c.selectAll(".datapoint-tooltip").each(function(u,d){const h=l[d];l[d]&&l[d].color&&I(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",h.color)}),this.positionTooltip(i),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1),this.lastTriggeredEventType=i.type},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(T.Tooltip.MOVE,t=>{this.lastTriggeredEventType!==T.Toolbar.SHOW_TOOLTIP&&this.tooltip.classed("hidden")===!1&&this.positionTooltip(t)}),this.services.events.addEventListener(T.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(T.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(T.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.addEventListener(T.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.addEventListener(T.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(T.Tooltip.MOVE,null),this.services.events.removeEventListener(T.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(T.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(T.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.removeEventListener(T.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.removeEventListener(T.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}getItems(t){return t.detail.items?t.detail.items:[]}formatItems(t){const n=this.getOptions(),r=y(n,"tooltip","truncation","type"),i=y(n,"tooltip","truncation","threshold"),s=y(n,"tooltip","truncation","numCharacter");return r!==we.NONE?t.map(a=>{const o=a.labelIcon?12:0;return a.value=this.valueFormatter(a.value,a.label),a.label&&a.label.length+o>i&&(a.label=qi(a.label,r,s)),a.value&&a.value.length>i&&(a.value=qi(a.value,r,s)),a}):t.map(a=>(a.value=this.valueFormatter(a.value,a.label),a))}getTooltipHTML(t){return'<ul class="multi-tooltip">'+t.map(n=>`<li>
					<div class="datapoint-tooltip${n.bold?" bold":""}">
						${n.class||n.color?`<div class="tooltip-color ${n.class}"></div>`:""}
						<div class="label">
						<p>${n.label||""}</p>
						${n.labelIcon?`<span class="label-icon"/>${n.labelIcon}</span>`:""}
						</div>
						${n.value===void 0||n.value===null?"":`<p class="value"/>${n.value}</p>`}
					</div>
				</li>`).join("")+"</ul>"}isDate(t){return t instanceof Date}valueFormatter(t,n){const r=this.getOptions(),i=y(r,"tooltip","valueFormatter"),{code:s,number:a,date:o}=y(r,"locale");if(i)return i(t,n);if(this.isDate(t))return o(t,s,{month:"short",day:"numeric",year:"numeric"});try{if(typeof t=="string"&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(t)){const l=new Date(t);return o(l,s,{month:"short",day:"numeric",year:"numeric"})}}catch{}return a(t,s)}render(t=!1){const n=this.getOptions(),r=y(n,"tooltip","enabled");if(r){const i=I(this.services.domUtils.getHolder()),s=y(n,"style","prefix");this.tooltip=N.appendOrSelect(i,`div.${de}--${s}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}addOffsetByPlacement(t,n,r){const i=Object.assign({},t);return n==Gt.LEFT?i.left-=r:n==Gt.RIGHT?i.left+=r:n==Gt.TOP?i.top-=r:n==Gt.BOTTOM&&(i.top+=r),i}positionTooltip(t){const n=this.services.domUtils.getHolder(),r=n.offsetWidth,i=n.offsetHeight,s=this.tooltip.node(),a=this.getOptions(),o=y(a,"zoomBar","top","enabled"),l=!!y(t,"detail","noWrap"),c=Array.isArray(y(t,"detail","placements")),u=c?y(t,"detail","placements"):[Gt.RIGHT,Gt.LEFT,Gt.TOP,Gt.BOTTOM];let d,{horizontalOffset:h}=pp;const{defaultOffset:p}=pp;if(this.tooltip.select("div.title-tooltip").classed("title-tooltip-nowrap",l),c){const m=y(t,"detail","event","target"),v=this.services.domUtils.getElementOffset(m,!0);d=this.positionService.findBestPlacementAt(v,s,u,()=>({top:0,left:0,width:r,height:i}));let x=this.positionService.findPosition(m,s,d,()=>this.services.domUtils.getElementOffset(m));x=this.addOffsetByPlacement(x,d,p),this.positionService.setElement(s,x);return}let f=y(t,"detail","mousePosition");if(!f)f=er(y(t,"detail","event"),n);else{const m=y(a,"zoomBar","top","type"),v=xe.height[m];o&&(f[1]+=v+xe.spacerHeight)}f[0]/r>.9?d=Gt.LEFT:f[0]/r<.1?d=Gt.RIGHT:d=this.positionService.findBestPlacementAt({left:f[0],top:f[1]},s,u,()=>({top:void 0,left:void 0,width:r,height:i})),d===Gt.LEFT&&(h*=-1);const g=this.positionService.findPositionAt({left:f[0]+h,top:f[1]},s,d);this.positionService.setElement(s,g)}}const Mg=class _o extends mt{constructor(){super(...arguments),this.type="grid-brush",this.renderType=it.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(t=!0){const n=this.parent,r=this.getComponentContainer({isPresentational:!0});if(!n)throw new Error("SVG was not defined");const i=N.appendOrSelect(n,"svg.chart-grid-backdrop"),s=N.appendOrSelect(i,`g.${this.type}`),a=N.appendOrSelect(s,this.selectionSelector),{width:o,height:l}=N.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),d=c.getMainXScale(),[h]=d.range();r.attr("transform",`translate(${h},0)`);const p=N.appendOrSelect(r,this.frontSelectionSelector);if(d&&u===nt.TIME){let f=this.model.get("zoomDomain");f===void 0&&(f=this.services.zoom.getDefaultZoomBarDomain(),f&&this.model.set({zoomDomain:f},{animate:!1}));const g=b=>{const S=b[1]-b[0];let $="0,"+S.toString();const k=Math.floor(l/_o.DASH_LENGTH),C=k*_o.DASH_LENGTH;for(let R=0;R<k;R++)$+=","+_o.DASH_LENGTH;$+=","+(l-C),k%2===1&&($+=",0"),$+=","+S.toString(),$+=","+l.toString(),p.attr("stroke-dasharray",$)},m=b=>{const S=b.selection;S===null||S[0]===S[1]||(p.attr("x",parseFloat(a.attr("x"))+parseFloat(i.attr("x"))).attr("y",a.attr("y")).attr("width",a.attr("width")).attr("height",a.attr("height")).style("cursor","pointer").style("display",null),g(S))},v=(b,S)=>{const $=uf().range([0,o]).domain(f);let k=[$.invert(b),$.invert(S)],C="manual";k[0].valueOf()===k[1].valueOf()?(k=this.services.zoom.getDefaultZoomBarDomain(),C="reset"):C="manual",(f[0].valueOf()!==k[0].valueOf()||f[1].valueOf()!==k[1].valueOf())&&this.services.zoom.handleDomainChange(k,{dispatchEvent:!0,type:C})};let x;const _=b=>{const S=b.selection;S!==null&&(v(S[0],S[1]),s.call(x.move,null),p.style("display","none"))};l!=0&&o!=0&&(x=om().extent([[0,0],[o-1,l]]).on("start brush end",m).on("end.brushed",_),s.call(x));const E=this.services.zoom.getZoomRatio();i.on("click",function(b){if(b.shiftKey){const S=this.services.domUtils.getHolder(),$=er(s.node(),S)[0];let k=$-o*E/2;k<0&&(k=0);let C=$+o*E/2;C>o&&(C=o),v(k,C)}})}}};Mg.DASH_LENGTH=4;let Ak=Mg;class Lk extends mt{constructor(){super(...arguments),this.type="zoom-bar",this.renderType=it.SVG,this.MIN_SELECTION_DIFF=9e-10,this.brushSelector="g.zoom-bar-brush",this.clipId="zoomBarClip-"+Math.floor(Math.random()*99999999999),this.brush=om(),this.highlightStrokeWidth=1}init(){this.services.events.addEventListener(T.ZoomBar.UPDATE,this.render.bind(this));const t=y(this.getOptions(),"zoomBar",G.TOP,"data");this.model.setZoomBarData(t)}render(t=!0){const n=this.getComponentContainer({ariaLabel:"zoom bar"}),r=this.services.zoom.isZoomBarLoading(G.TOP),i=this.services.zoom.isZoomBarLocked(G.TOP),s=y(this.getOptions(),"zoomBar",G.TOP,"type"),a=y(this.getOptions(),"axes",G.BOTTOM,"highlights"),o=xe.height[s],{width:l}=N.getSVGElementSize(this.parent,{useAttrs:!0});if(l===0)return;let c=0;const u=this.model.get("axesMargins");u&&u.left&&(c=u.left);const d=N.appendOrSelect(n,"svg.zoom-container").attr("width","100%").attr("height",o).attr("opacity",1).attr("role","presentation");if(N.appendOrSelect(n,"rect.zoom-spacer").attr("x",0).attr("y",o).attr("width","100%").attr("height",xe.spacerHeight).attr("opacity",1).attr("fill","none"),s===Pe.GRAPH_VIEW?N.appendOrSelect(d,"rect.zoom-bg").attr("x",c).attr("y",0).attr("width",l-c).attr("height","100%").classed("zoom-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null):s===Pe.SLIDER_VIEW&&N.appendOrSelect(d,"rect.zoom-slider-bg").attr("x",c).attr("y",o/2-1).attr("width",l-c).attr("height",2).classed("zoom-slider-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null),r){this.renderSkeleton(d,c,l);return}const{cartesianScales:h}=this.services,p=h.getMainXScale(),f=h.getMainYScale(),g=h.getMainXScaleType();if(p&&g===nt.TIME){let m=this.services.zoom.getZoomBarData();if(He(m)||m.length===1)return;this.xScale=p.copy(),this.yScale=f.copy();const v=this.services.zoom.getDefaultZoomBarDomain(m);m=this.compensateDataForDefaultDomain(m,v);const x=this.model.get("initialZoomDomain"),_=y(this.getOptions(),"zoomBar",G.TOP,"initialZoomDomain");_&&_[0]&&_[1]&&(_[0]=new Date(_[0]),_[1]=new Date(_[1])),_&&!(x&&x[0].valueOf()===_[0].valueOf()&&x[1].valueOf()===_[1].valueOf())?this.model.set({initialZoomDomain:at([],_),zoomDomain:_?at([],_):v},{skipUpdate:!0}):_===null&&x!==null&&this.model.set({initialZoomDomain:null,zoomDomain:at([],v)},{skipUpdate:!0}),this.xScale.range([c,l]).domain(v),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,o-6]).domain(Ve(m,S=>S.value));const E=this.model.get("zoomDomain");if(s===Pe.GRAPH_VIEW&&(this.renderZoomBarArea(d,"path.zoom-graph-area-unselected",m,null),this.updateClipPath(n,this.clipId,0,0,0,0),this.renderZoomBarArea(d,"path.zoom-graph-area",m,this.clipId),this.renderZoomBarBaseline(d,c,l),a)){const S=a.highlightStartMapsTo,$=a.highlightEndMapsTo,k=a.color,C=a.labelMapsTo;a.data.forEach((R,M)=>{N.appendOrSelect(d,`rect.highlight-${M}`).attr("height",o-2*this.highlightStrokeWidth).attr("y",this.highlightStrokeWidth).attr("x",this.xScale(R[S])).attr("width",this.xScale(R[$])-this.xScale(R[S])).style("fill",k&&k.scale[R[C]]?k.scale[R[C]]:null).style("fill-opacity",.1).style("stroke",k&&k.scale[R[C]]?k.scale[R[C]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")})}this.addBrushEventListener(E,c,l);const b=N.appendOrSelect(n,this.brushSelector).call(this.brush);if(E!==void 0)if(E[0].valueOf()===E[1].valueOf())b.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range());else{const S=E.map($=>this.xScale($));S[1]-S[0]<this.MIN_SELECTION_DIFF||(b.call(this.brush.move,S),this.updateBrushHandle(this.getComponentContainer(),S))}i&&(this.brush.filter(()=>!1),b.selectAll("rect").attr("cursor","auto"))}}addBrushEventListener(t,n,r){const i=o=>{const l=o.selection;l===null?this.handleBrushedEvent(o,t,this.xScale,this.xScale.range()):l[0]===l[1]||this.handleBrushedEvent(o,t,this.xScale,l)},s=y(this.getOptions(),"zoomBar",G.TOP,"type"),a=xe.height[s];this.brush.extent([[n,0],[r,a]]).on("start brush end",null).on("start brush end",i)}handleBrushedEvent(t,n,r,i){const s=[r.invert(i[0]),r.invert(i[1])];if(this.updateBrushHandle(this.getComponentContainer(),i),t.sourceEvent!=null&&(t.sourceEvent.type==="mousemove"||t.sourceEvent.type==="mouseup"||t.sourceEvent.type==="mousedown"||t.sourceEvent.type==="touchstart"||t.sourceEvent.type==="touchmove"||t.sourceEvent.type==="touchend")){let a="manual";if(n&&n[0]&&n[1]){const l=this.services.zoom.getDefaultZoomBarDomain();s[0].valueOf()===l[0].valueOf()&&s[1].valueOf()===l[1].valueOf()?a="reset":a="manual"}(n===void 0||n[0]!==s[0]||n[1]!==s[1])&&this.services.zoom.handleDomainChange(s,{dispatchEvent:!1,type:a});let o;t.type==="start"?o=T.ZoomBar.SELECTION_START:t.type==="brush"?o=T.ZoomBar.SELECTION_IN_PROGRESS:t.type==="end"&&(o=T.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(T.ZoomDomain.CHANGE,{newDomain:s,type:a})),this.services.events.dispatchEvent(o,{selection:i,newDomain:s})}}updateBrushHandle(t,n){const r=this,i=xe.handleWidth,s=y(this.getOptions(),"zoomBar",G.TOP,"type"),a=xe.height[s],o=-i/2,l=xe.handleBarWidth,c=s===Pe.GRAPH_VIEW?xe.handleBarHeight:6,u=-l/2,d=(a-c)/2;t.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(p){if(p.type==="w")return Math.max(n[0]+o,r.maxSelectionRange[0]);if(p.type==="e")return Math.min(n[1]+o,r.maxSelectionRange[1]-i)}).attr("y",0).attr("width",i).attr("height",a).attr("cursor","ew-resize").style("display",null);const h=t.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);h.enter().append("rect").attr("class",function(p){return"handle-bar handle-bar--"+p.type}),h.attr("x",function(p){if(p.type==="w")return Math.max(n[0]+u,r.maxSelectionRange[0]-o+u);if(p.type==="e")return Math.min(n[1]+u,r.maxSelectionRange[1]+o+u)}).attr("y",d).attr("width",l).attr("height",c).attr("cursor","ew-resize"),s===Pe.SLIDER_VIEW&&this.updateSliderSelectedArea(n),this.updateClipPath(t,this.clipId,n[0],0,n[1]-n[0],a)}updateSliderSelectedArea(t){const n=y(this.getOptions(),"zoomBar",G.TOP,"type"),r=xe.height[n],i=this.getComponentContainer().select("svg.zoom-container");N.appendOrSelect(i,"rect.zoom-slider-selected-area").attr("x",t[0]).attr("y",r/2-1).attr("width",t[1]-t[0]).attr("height",2)}renderZoomBarArea(t,n,r,i){const{cartesianScales:s}=this.services,a=s.getMainXAxisPosition(),o=s.getMainYAxisPosition(),l=s.getMainXScaleType(),c=s.getMainYScaleType(),u=(v,x,_)=>E=>s.getValueFromScale(v,x,_,E),d=u(this.xScale,l,a),h=u(this.yScale,c,o),p=y(this.getOptions(),"zoomBar",G.TOP,"type"),f=xe.height[p],g=tu().x(v=>d(v)).y0(f).y1(v=>f-h(v)),m=N.appendOrSelect(t,n).datum(r).attr("d",g);i&&m.attr("clip-path",`url(#${i})`)}updateClipPath(t,n,r,i,s,a){const o=N.appendOrSelect(t,"clipPath").attr("id",n);N.appendOrSelect(o,"rect").attr("x",r).attr("y",i).attr("width",s).attr("height",a)}compensateDataForDefaultDomain(t,n){if(!t||t.length<2)return;const r=pn(t),i=this.services.cartesianScales.getDomainIdentifier(),s=this.services.cartesianScales.getRangeIdentifier();if(Number(n[0])<Number(r[0][i])){const a={};a[i]=n[0],a[s]=0,r.unshift(a)}if(Number(n[1])>Number(r[r.length-1][i])){const a={};a[i]=n[1],a[s]=0,r.push(a)}return r}renderZoomBarBaseline(t,n,r,i=!1){const s=y(this.model.getOptions(),"zoomBar",G.TOP,"type"),a=xe.height[s],o=vs()([[n,a],[r,a]]);N.appendOrSelect(t,"path.zoom-bg-baseline").attr("d",o).classed("zoom-bg-baseline-skeleton",i).style("stroke",i?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}renderSkeleton(t,n,r){this.renderZoomBarArea(t,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(t,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),N.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null),y(this.getOptions(),"zoomBar",G.TOP,"type")===Pe.GRAPH_VIEW&&this.renderZoomBarBaseline(t,n,r,!0)}destroy(){this.brush.on("start brush end",null),this.services.events.removeEventListener(T.ZoomBar.UPDATE,this.render.bind(this))}}class kk extends mt{constructor(t,n){super(t,n),this.type="threshold",this.renderType=it.SVG,this.positionService=new ao}render(t=!1){const n=y(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(G).includes(c)){const u=n[c];u.thresholds&&u.thresholds.length>0&&r.push({axisPosition:c,thresholds:u.thresholds,correspondingDatasets:u?.correspondingDatasets,mapsTo:u?.mapsTo})}});const i=this.getComponentContainer({ariaLabel:"threshold lines",withinChartClip:!0}).selectAll("g.axis-thresholds").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-thresholds ${c.axisPosition}`);const a=s.selectAll("g.threshold-group").data(c=>c.thresholds.map(u=>(u.axisPosition=c.axisPosition,u.datum=this.constructDatumObj(c,u),u)));a.exit().attr("opacity",0).remove();const o=a.enter().append("g");o.append("line").attr("class","threshold-line"),o.append("rect").attr("class","threshold-hoverable-area"),o.merge(a).attr("class","threshold-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getScaleByPosition(c),d=l.services.cartesianScales.getScaleTypeByPosition(c);let h=null,p=null;c===G.LEFT||c===G.RIGHT?(p=u,h=l.services.cartesianScales.getMainXScale()):(h=u,p=l.services.cartesianScales.getMainYScale());const f=d===nt.LABELS,[g,m]=h.range(),[v,x]=p.range(),{cartesianScales:_}=l.services,E=_.getOrientation(),b=R=>_.getDomainValue(R),S=R=>_.getRangeValue(R),[$,k]=xn(b,S,E),C=I(this);c===G.TOP||c===G.BOTTOM?(C.selectAll("line.threshold-line").transition().call(R=>l.services.transitions.setupTransition({transition:R,name:"threshold-line-update",animate:t})).attr("y1",x).attr("y2",v).attr("x1",({datum:R})=>$(R)+(f?u.step()/2:0)).attr("x2",({datum:R})=>$(R)+(f?u.step()/2:0)).style("stroke",({fillColor:R})=>R),C.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",({datum:R})=>-$(R)).attr("width",Math.abs(v-x)).classed("rotate",!0)):(C.selectAll("line.threshold-line").transition().call(R=>l.services.transitions.setupTransition({transition:R,name:"threshold-line-update",animate:t})).attr("x1",g).attr("x2",m).attr("y1",({datum:R})=>k(R)+(f?u.step()/2:0)).attr("y2",({datum:R})=>k(R)+(f?u.step()/2:0)).style("stroke",({fillColor:R})=>R),C.selectAll("rect.threshold-hoverable-area").attr("x",g).attr("y",({datum:R})=>k(R)).attr("width",Math.abs(m-g)).classed("rotate",!1))}),this.services.events.addEventListener(T.Threshold.SHOW,c=>{this.setThresholdLabelPosition(c.detail),this.label.classed("hidden",!1)}),this.services.events.addEventListener(T.Threshold.HIDE,()=>{this.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()}getFormattedValue(t){const{value:n,axisPosition:r}=t,i=this.getOptions(),s=this.services.cartesianScales.getScaleTypeByPosition(r),{code:a,number:o}=y(i,"locale");if(s===nt.TIME){const l=[G.LEFT,G.RIGHT].includes(r),c=this.services.cartesianScales.getMainXScale(),u=this.services.cartesianScales.getMainYScale(),d=l?u:c,h=y(i,"timeScale"),p=jl(d.ticks(),y(h,"timeInterval"));return Fl(n,0,d.ticks(),p,h,i.locale)}return o(n,a)}appendThresholdLabel(){const t=I(this.services.domUtils.getHolder()),n=y(this.getOptions(),"style","prefix");this.label=N.appendOrSelect(t,`div.${de}--${n}--threshold--label`).classed("hidden",!0)}setThresholdLabelPosition({event:t,datum:n}){const r=this.services.domUtils.getHolder(),i=er(t,r),s=n.valueFormatter?n.valueFormatter(n.value):this.getFormattedValue(n);this.label.html(ln(`${n.label||"Threshold"}: ${s}`)).style("background-color",n.fillColor);const a=this.label.node(),o=this.positionService.findBestPlacementAt({left:i[0],top:i[1]},a,[Gt.RIGHT,Gt.LEFT,Gt.TOP,Gt.BOTTOM],()=>({top:void 0,left:void 0,width:r.offsetWidth,height:r.offsetHeight})),l=this.positionService.findPositionAt({left:i[0],top:i[1]},a,o);this.positionService.setElement(a,l)}constructDatumObj(t,n){const r={};return t.correspondingDatasets&&(r.group=y(t,"correspondingDatasets",0)),r[t.mapsTo]=n.value,r}addEventListeners(){const t=this;this.getComponentContainer({withinChartClip:!0}).selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(n){I(this.parentNode).select("line.threshold-line").classed("active",!0),t.services.events.dispatchEvent(T.Threshold.SHOW,{event:n,hoveredElement:I(this),datum:I(this).datum()})}).on("mouseout",function(n){I(this.parentNode).select("line.threshold-line").classed("active",!1),t.services.events.dispatchEvent(T.Threshold.HIDE,{event:n,hoveredElement:I(this),datum:I(this).datum()})})}}class Dk extends mt{constructor(t,n){super(t,n),this.type="highlight",this.renderType=it.SVG,this.positionService=new ao,this.highlightStrokeWidth=1}render(t=!1){const n=y(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(G).includes(c)){const u=n[c];u.highlights&&u.highlights.data.length>0&&r.push({axisPosition:c,highlightStartMapsTo:u.highlights.highlightStartMapsTo,highlightEndMapsTo:u.highlights.highlightEndMapsTo,labelMapsTo:u.highlights.labelMapsTo,highlight:u.highlights.data,color:u.highlights.color})}});const i=this.getComponentContainer({ariaLabel:"highlight areas",withinChartClip:!0}).selectAll("g.axis-highlight").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-highlight ${c.axisPosition}`);const a=s.selectAll("g.highlight-group").data(c=>c.highlight.map(u=>(u.axisPosition=c.axisPosition,u.highlightStartMapsTo=c.highlightStartMapsTo,u.labelMapsTo=c.labelMapsTo,u.color=c.color,u.highlightEndMapsTo=c.highlightEndMapsTo,u)));a.exit().attr("opacity",0).remove();const o=a.enter().append("g");o.append("rect").attr("class","highlight-bar"),o.append("line").attr("class","highlight-line"),o.merge(a).attr("class","highlight-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getMainXScale(),d=l.services.cartesianScales.getMainYScale(),[h,p]=u.range(),[f,g]=d.range(),{cartesianScales:m}=l.services,v=m.getOrientation(),x=$=>m.getDomainValue($),_=$=>m.getRangeValue($),[E,b]=xn(x,_,v),S=I(this);c===G.TOP||c===G.BOTTOM?S.selectAll("rect.highlight-bar").transition().call($=>l.services.transitions.setupTransition({transition:$,name:"highlight-bar-update",animate:t})).attr("y",Math.max(g+l.highlightStrokeWidth,0)).attr("height",Math.max(f-2*l.highlightStrokeWidth,0)).attr("x",({highlightStartMapsTo:$,...k})=>E(k[$])).attr("width",({highlightStartMapsTo:$,highlightEndMapsTo:k,...C})=>Math.max(E(C[k])-E(C[$]),0)).style("stroke",({color:$,labelMapsTo:k,...C})=>$&&$.scale[C[k]]?$.scale[C[k]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:$,labelMapsTo:k,...C})=>$&&$.scale[C[k]]?$.scale[C[k]]:null):S.selectAll("rect.highlight-bar").transition().call($=>l.services.transitions.setupTransition({transition:$,name:"highlight-bar-update",animate:t})).attr("x",h).attr("width",Math.max(p-h,0)).attr("y",({highlightEndMapsTo:$,...k})=>b(k[$])).attr("height",({highlightStartMapsTo:$,highlightEndMapsTo:k,...C})=>Math.max(b(C[$])-b(C[k]),0)).style("stroke",({color:$,labelMapsTo:k,...C})=>$&&$.scale[C[k]]?$.scale[C[k]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:$,labelMapsTo:k,...C})=>$&&$.scale[C[k]]?$.scale[C[k]]:null)})}}class Cg extends uu{getItems(t){if(t.detail.items)return t.detail.items;const{data:n}=t.detail;if(!n||!n.length||!n[0])return[];const r=this.getOptions(),{cartesianScales:i}=this.services,s=i.getDomainIdentifier(),a=i.isDualAxes(),{groupMapsTo:o}=r.data,l=i.getDomainLabel();let c=i.getRangeLabel();const u=n[0][s];let d;if(n.length===1){const h=n[0],p=i.getRangeIdentifier(h);if(a){const g=i.getRangeAxisPosition({datum:h,groups:[h[o]]});c=i.getScaleLabel(g)}const f=h[p];d=[{label:l,value:u},...Array.isArray(f)&&f.length===2?[{label:"Start",value:f[0]},{label:"End",value:f[1]}]:[{label:c,value:h[p]}]],t.detail.additionalItems&&t.detail.additionalItems.forEach(g=>d.push({label:g.label,value:g.value})),d.push({label:vt(r,"locale.translations.group")||vt(r,"tooltip.groupLabel"),value:h[o],color:this.model.getFillColor(h[o]),class:this.model.getColorClassName({classNameTypes:[st.TOOLTIP],dataGroupName:h[o]})})}else if(n.length>1&&(d=[{label:l,value:u}],d=d.concat(n.map(h=>{const p=h[i.getRangeIdentifier(h)];return{label:h[o],value:Array.isArray(p)&&p.length===2?`${p[0]} - ${p[1]}`:p,color:this.model.getFillColor(h[o]),class:this.model.getColorClassName({classNameTypes:[st.TOOLTIP],dataGroupName:h[o]})}}).sort((h,p)=>p.value-h.value)),!a&&y(r,"tooltip","showTotal")===!0)){const h=i.getRangeIdentifier(),p=y(r,"tooltip","customTotalCalculation");let f;p?f=p(n):f=n.reduce((g,m)=>g+m[h],0),d.push({label:vt(r,"tooltip.totalLabel")||vt(r,"locale.translations.total")||"Total",value:f,bold:!0})}return d}}function Ag(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Rk(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function hu(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Ik(e){return e.depth}function Nk(e,t){return t-1-e.height}function Lg(e,t){return e.sourceLinks.length?e.depth:t-1}function oo(e){return function(){return e}}function kg(e,t){return lo(e.source,t.source)||e.index-t.index}function Dg(e,t){return lo(e.target,t.target)||e.index-t.index}function lo(e,t){return e.y0-t.y0}function du(e){return e.value}function Pk(e){return e.index}function Uk(e){return e.nodes}function Bk(e){return e.links}function Rg(e,t){const n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Ig({nodes:e}){for(const t of e){let n=t.y0,r=n;for(const i of t.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of t.targetLinks)i.y1=r+i.width/2,r+=i.width}}function Hk(){let e=0,t=0,n=1,r=1,i=24,s=8,a,o=Pk,l=Lg,c,u,d=Uk,h=Bk,p=6;function f(){const O={nodes:d.apply(null,arguments),links:h.apply(null,arguments)};return g(O),m(O),v(O),x(O),b(O),Ig(O),O}f.update=function(O){return Ig(O),O},f.nodeId=function(O){return arguments.length?(o=typeof O=="function"?O:oo(O),f):o},f.nodeAlign=function(O){return arguments.length?(l=typeof O=="function"?O:oo(O),f):l},f.nodeSort=function(O){return arguments.length?(c=O,f):c},f.nodeWidth=function(O){return arguments.length?(i=+O,f):i},f.nodePadding=function(O){return arguments.length?(s=a=+O,f):s},f.nodes=function(O){return arguments.length?(d=typeof O=="function"?O:oo(O),f):d},f.links=function(O){return arguments.length?(h=typeof O=="function"?O:oo(O),f):h},f.linkSort=function(O){return arguments.length?(u=O,f):u},f.size=function(O){return arguments.length?(e=t=0,n=+O[0],r=+O[1],f):[n-e,r-t]},f.extent=function(O){return arguments.length?(e=+O[0][0],n=+O[1][0],t=+O[0][1],r=+O[1][1],f):[[e,t],[n,r]]},f.iterations=function(O){return arguments.length?(p=+O,f):p};function g({nodes:O,links:w}){for(const[D,U]of O.entries())U.index=D,U.sourceLinks=[],U.targetLinks=[];const L=new Map(O.map((D,U)=>[o(D,U,O),D]));for(const[D,U]of w.entries()){U.index=D;let{source:K,target:W}=U;typeof K!="object"&&(K=U.source=Rg(L,K)),typeof W!="object"&&(W=U.target=Rg(L,W)),K.sourceLinks.push(U),W.targetLinks.push(U)}if(u!=null)for(const{sourceLinks:D,targetLinks:U}of O)D.sort(u),U.sort(u)}function m({nodes:O}){for(const w of O)w.value=w.fixedValue===void 0?Math.max(hu(w.sourceLinks,du),hu(w.targetLinks,du)):w.fixedValue}function v({nodes:O}){const w=O.length;let L=new Set(O),D=new Set,U=0;for(;L.size;){for(const K of L){K.depth=U;for(const{target:W}of K.sourceLinks)D.add(W)}if(++U>w)throw new Error("circular link");L=D,D=new Set}}function x({nodes:O}){const w=O.length;let L=new Set(O),D=new Set,U=0;for(;L.size;){for(const K of L){K.height=U;for(const{source:W}of K.targetLinks)D.add(W)}if(++U>w)throw new Error("circular link");L=D,D=new Set}}function _({nodes:O}){const w=Ag(O,U=>U.depth)+1,L=(n-e-i)/(w-1),D=new Array(w);for(const U of O){const K=Math.max(0,Math.min(w-1,Math.floor(l.call(null,U,w))));U.layer=K,U.x0=e+K*L,U.x1=U.x0+i,D[K]?D[K].push(U):D[K]=[U]}if(c)for(const U of D)U.sort(c);return D}function E(O){const w=Rk(O,L=>(r-t-(L.length-1)*a)/hu(L,du));for(const L of O){let D=t;for(const U of L){U.y0=D,U.y1=D+U.value*w,D=U.y1+a;for(const K of U.sourceLinks)K.width=K.value*w}D=(r-D+a)/(L.length+1);for(let U=0;U<L.length;++U){const K=L[U];K.y0+=D*(U+1),K.y1+=D*(U+1)}H(L)}}function b(O){const w=_(O);a=Math.min(s,(r-t)/(Ag(w,L=>L.length)-1)),E(w);for(let L=0;L<p;++L){const D=Math.pow(.99,L),U=Math.max(1-D,(L+1)/p);$(w,D,U),S(w,D,U)}}function S(O,w,L){for(let D=1,U=O.length;D<U;++D){const K=O[D];for(const W of K){let j=0,X=0;for(const{source:J,value:Y}of W.targetLinks){let et=Y*(W.layer-J.layer);j+=P(J,W)*et,X+=et}if(!(X>0))continue;let ct=(j/X-W.y0)*w;W.y0+=ct,W.y1+=ct,M(W)}c===void 0&&K.sort(lo),k(K,L)}}function $(O,w,L){for(let D=O.length,U=D-2;U>=0;--U){const K=O[U];for(const W of K){let j=0,X=0;for(const{target:J,value:Y}of W.sourceLinks){let et=Y*(J.layer-W.layer);j+=B(W,J)*et,X+=et}if(!(X>0))continue;let ct=(j/X-W.y0)*w;W.y0+=ct,W.y1+=ct,M(W)}c===void 0&&K.sort(lo),k(K,L)}}function k(O,w){const L=O.length>>1,D=O[L];R(O,D.y0-a,L-1,w),C(O,D.y1+a,L+1,w),R(O,r,O.length-1,w),C(O,t,0,w)}function C(O,w,L,D){for(;L<O.length;++L){const U=O[L],K=(w-U.y0)*D;K>1e-6&&(U.y0+=K,U.y1+=K),w=U.y1+a}}function R(O,w,L,D){for(;L>=0;--L){const U=O[L],K=(U.y1-w)*D;K>1e-6&&(U.y0-=K,U.y1-=K),w=U.y0-a}}function M({sourceLinks:O,targetLinks:w}){if(u===void 0){for(const{source:{sourceLinks:L}}of w)L.sort(Dg);for(const{target:{targetLinks:L}}of O)L.sort(kg)}}function H(O){if(u===void 0)for(const{sourceLinks:w,targetLinks:L}of O)w.sort(Dg),L.sort(kg)}function P(O,w){let L=O.y0-(O.sourceLinks.length-1)*a/2;for(const{target:D,width:U}of O.sourceLinks){if(D===w)break;L+=U+a}for(const{source:D,width:U}of w.targetLinks){if(D===O)break;L-=U}return L}function B(O,w){let L=w.y0-(w.targetLinks.length-1)*a/2;for(const{source:D,width:U}of w.targetLinks){if(D===O)break;L+=U+a}for(const{target:D,width:U}of O.sourceLinks){if(D===w)break;L-=U}return L}return f}var pu=Math.PI,fu=2*pu,yr=1e-6,Vk=fu-yr;function mu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ng(){return new mu}mu.prototype=Ng.prototype={constructor:mu,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,o=n-e,l=r-t,c=s-e,u=a-t,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>yr)if(!(Math.abs(u*o-l*c)>yr)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var h=n-s,p=r-a,f=o*o+l*l,g=h*h+p*p,m=Math.sqrt(f),v=Math.sqrt(d),x=i*Math.tan((pu-Math.acos((f+d-g)/(2*m*v)))/2),_=x/v,E=x/m;Math.abs(_-1)>yr&&(this._+="L"+(e+_*c)+","+(t+_*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*p)+","+(this._x1=e+E*o)+","+(this._y1=t+E*l)}},arc:function(e,t,n,r,i,s){e=+e,t=+t,n=+n,s=!!s;var a=n*Math.cos(r),o=n*Math.sin(r),l=e+a,c=t+o,u=1^s,d=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>yr||Math.abs(this._y1-c)>yr)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%fu+fu),d>Vk?this._+="A"+n+","+n+",0,1,"+u+","+(e-a)+","+(t-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>yr&&(this._+="A"+n+","+n+",0,"+ +(d>=pu)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Pg(e){return function(){return e}}function Gk(e){return e[0]}function zk(e){return e[1]}var Fk=Array.prototype.slice;function jk(e){return e.source}function Wk(e){return e.target}function qk(e){var t=jk,n=Wk,r=Gk,i=zk,s=null;function a(){var o,l=Fk.call(arguments),c=t.apply(this,l),u=n.apply(this,l);if(s||(s=o=Ng()),e(s,+r.apply(this,(l[0]=c,l)),+i.apply(this,l),+r.apply(this,(l[0]=u,l)),+i.apply(this,l)),o)return s=null,o+""||null}return a.source=function(o){return arguments.length?(t=o,a):t},a.target=function(o){return arguments.length?(n=o,a):n},a.x=function(o){return arguments.length?(r=typeof o=="function"?o:Pg(+o),a):r},a.y=function(o){return arguments.length?(i=typeof o=="function"?o:Pg(+o),a):i},a.context=function(o){return arguments.length?(s=o??null,a):s},a}function Yk(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function Xk(){return qk(Yk)}function Zk(e){return[e.source.x1,e.y0]}function Kk(e){return[e.target.x0,e.y1]}function Qk(){return Xk().source(Zk).target(Kk)}class Jk extends mt{constructor(){super(...arguments),this.type="alluvial",this.renderType=it.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999)}render(t=!0){const n=this.getComponentContainer({ariaLabel:"alluvial graphs",withinChartClip:!0});n.html("");const{width:r,height:i}=N.getSVGElementSize(n,{useAttrs:!0});if(r<1||i<1)return;const s=this.model.getOptions(),a=this.model.getDisplayData(),o=y(this.getOptions(),"color","gradient","enabled");let l=je.minNodePadding;s.alluvial.nodePadding>je.minNodePadding&&(l=s.alluvial.nodePadding);const c=y(s,"alluvial","nodeAlignment");let u=Lg;c===Ft.LEFT?u=Ik:c===Ft.RIGHT&&(u=Nk);const d=Hk().nodeId(x=>x.name).nodeWidth(je.nodeWidth).nodePadding(l).nodeAlign(u).extent([[2,30],[r-2,i]]);this.graph=d({nodes:s.alluvial.nodes.map(x=>Object.assign({},x)),links:a.map(x=>Object.assign({},x))}),this.graph.nodes=this.graph.nodes.filter(x=>x.value!==0);const h={};this.graph.nodes.forEach(x=>{const _=x.x0;x.category&&(h[_]=x?.category)}),n.append("g").classed("header-arrows",!0).selectAll("g").data(Object.keys(h)).join("g").attr("transform",x=>`translate(${x}, 0)`).append("text").attr("id",(x,_)=>this.services.domUtils.generateElementIDString(`alluvial-category-${_}`)).style("font-size","14px").text(x=>h[x]?h[x]:"").attr("y",20).attr("x",(x,_)=>{const E=this.services.domUtils.generateElementIDString(`alluvial-category-${_}`),{width:b}=N.getSVGElementSize(I(`text#${E}`),{useBBox:!0});let S=0;return x+S>=b&&(S=-b+4),S});const p=n.append("g").attr("fill","none").selectAll("g").data(this.graph.links);if(p.exit().remove(),o){const x=y(this.getOptions(),"color","scale");x&&p.enter().append("linearGradient").attr("id",_=>`${this.gradient_id}-link-${_.index}`).attr("gradientUnits","userSpaceOnUse").call(_=>_.append("stop").attr("offset","0%").attr("stop-color",E=>x[E.source.name])).call(_=>_.append("stop").attr("offset","100%").attr("stop-color",E=>x[E.target.name])),p.exit().remove()}p.enter().append("path").classed("link",!0).attr("d",Qk()).attr("id",x=>this.services.domUtils.generateElementIDString(`alluvial-line-${x.index}`)).attr("class",x=>s.alluvial.monochrome?this.model.getColorClassName({classNameTypes:[st.STROKE],dataGroupName:0,originalClassName:"link"}):this.model.getColorClassName({classNameTypes:[st.STROKE],dataGroupName:x.source.index,originalClassName:"link"})).style("stroke",x=>o?`url(#${this.gradient_id}-link-${x.index})`:this.model.getFillColor(x.source.name,null,{...x,source:x.source.name,target:x.target.name})).attr("stroke-width",x=>Math.max(1,x.width)).style("stroke-opacity",je.opacity.default).attr("aria-label",x=>`${x.source.name}  ${x.target.name} (${x.value}${s.alluvial.units?" "+s.alluvial.units:""})`);const f=n.append("g").selectAll("g").data(this.graph.nodes).enter().append("g").attr("id",x=>this.services.domUtils.generateElementIDString(`alluvial-node-${x.index}`)).classed("node-group",!0).attr("transform",x=>`translate(${x.x0}, ${x.y0})`);f.append("rect").classed("node",!0).attr("height",x=>x.y1-x.y0).attr("width",x=>x.x1-x.x0).attr("fill","black");const g=f.append("g").attr("id",x=>this.services.domUtils.generateElementIDString(`alluvial-node-title-${x.index}`)),{code:m,number:v}=y(s,"locale");g.append("text").attr("id",x=>this.services.domUtils.generateElementIDString(`alluvial-node-text-${x.index}`)).attr("class","node-text").style("font-size","12px").attr("text-anchor","start").attr("fill","white").attr("x",4).attr("dy",13).text(x=>`${x.name} (${v(x.value,m)})`).attr("aria-label",x=>`${x.name} (${x.value})`),g.append("rect").classed("node-text-bg",!0).attr("width",(x,_)=>{const E=this.services.domUtils.generateElementIDString(`alluvial-node-text-${_}`),{width:b}=N.getSVGElementSize(I(`text#${E}`),{useBBox:!0});return b+8}).attr("height",18).attr("stroke-width",2).lower(),g.attr("transform",(x,_)=>{const E=this.services.domUtils.generateElementIDString(`alluvial-node-text-${_}`),{width:b}=N.getSVGElementSize(I(`text#${E}`),{useBBox:!0}),S=(x.y1-x.y0)/2-9;let $=x.x1-x.x0;return x.x1>=b?$=$-(b+16):$+=4,`translate(${$}, ${S})`}),this.addLineEventListener(),this.addNodeEventListener()}addLineEventListener(){const t=this.getOptions(),n=this,{number:r,code:i}=y(this.getOptions(),"locale"),s=va((a,o="mouseover")=>{const l=n.parent.selectAll("path.link").transition().call(c=>n.services.transitions.setupTransition({transition:c,name:"alluvial-links-mouse-highlight"}));o==="mouseout"?(I(a).lower(),l.style("stroke-opacity",je.opacity.default)):l.style("stroke-opacity",function(){return a===this?(I(this).raise(),je.opacity.selected):je.opacity.unfocus})},33);this.parent.selectAll("path.link").on("mouseover",function(a,o){const l=I(this);s(this,"mouseover"),l.classed("link-hovered",!0);const c=getComputedStyle(this).getPropertyValue("stroke");n.services.events.dispatchEvent(T.Alluvial.LINE_MOUSEOVER,{event:a,element:l,datum:o}),n.services.events.dispatchEvent(T.Tooltip.SHOW,{event:a,hoveredElement:l,items:[{label:o.target.name,value:(r(o.value,i)?`${r(o.value,i)}`:"-")+(t.alluvial.units?` ${t.alluvial.units}`:""),color:c,labelIcon:n.getRightArrowIcon()}]})}).on("mousemove",function(a,o){n.services.events.dispatchEvent(T.Alluvial.LINE_MOUSEMOVE,{event:a,element:I(this),datum:o}),n.services.events.dispatchEvent(T.Tooltip.MOVE,{event:a})}).on("click",function(a,o){n.services.events.dispatchEvent(T.Alluvial.LINE_CLICK,{event:a,element:I(this),datum:o})}).on("mouseout",function(a,o){const l=I(this);s(this,"mouseout"),l.classed("link-hovered",!1),n.services.events.dispatchEvent(T.Alluvial.LINE_MOUSEOUT,{event:a,element:l,datum:o}),n.services.events.dispatchEvent(T.Tooltip.HIDE,{event:a,hoveredElement:l})})}addNodeEventListener(){const t=this,n=va((r=[],i="mouseover")=>{if(i==="mouseout"||r.length===0){t.parent.selectAll("path.link").classed("link-hovered",!1).data(this.graph.links,s=>s.index).order().style("stroke-opacity",je.opacity.default);return}t.parent.selectAll("path.link").transition().call(s=>this.services.transitions.setupTransition({transition:s,name:"alluvial-link-mouse-highlight"})).style("stroke-opacity",function(s){return r.some(a=>a===s.index)?(I(this).classed("link-hovered",!0).raise(),je.opacity.selected):je.opacity.unfocus})},66);t.parent.selectAll(".node-group").on("mouseover",function(r,i){const s=I(this),a=[];if(t.traverse({link:"sourceLinks",node:"target"},i,a),t.traverse({link:"targetLinks",node:"source"},i,a),a.length){const o=Wi(s.attr("transform"));if(s.attr("transform",`translate(${o.x-2}, ${o.y})`),s.classed("node-hovered",!0).selectAll("rect.node").attr("width",8),i.x0-2===0){const c=t.services.domUtils.generateElementIDString(`alluvial-node-title-${i.index}`),u=t.parent.select(`g#${c}`),d=Wi(u.attr("transform"));u.attr("transform",`translate(${d.x+4},${d.y})`)}const l=t.services.domUtils.generateElementIDString(`alluvial-node-text-${i.index}`);t.parent.select(`text#${l}`).style("font-weight","bold"),n(a,"mouseover"),t.services.events.dispatchEvent(T.Alluvial.NODE_MOUSEOVER,{event:r,element:s,datum:i})}}).on("mousemove",function(r,i){t.services.events.dispatchEvent(T.Alluvial.NODE_MOUSEMOVE,{event:r,element:I(this),datum:i}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:r})}).on("click",function(r,i){t.services.events.dispatchEvent(T.Alluvial.NODE_CLICK,{event:r,element:I(this),datum:i})}).on("mouseout",function(r,i){const s=I(this),a=Wi(s.attr("transform"));if(s.classed("node-hovered",!1).attr("transform",`translate(${a.x+2}, ${a.y})`).select("rect.node").attr("width",je.nodeWidth),i.x0-2===0){const l=t.services.domUtils.generateElementIDString(`alluvial-node-title-${i.index}`),c=t.parent.select(`g#${l}`),u=Wi(c.attr("transform"));c.attr("transform",`translate(${u.x-4},${u.y})`)}const o=t.services.domUtils.generateElementIDString(`alluvial-node-text-${i.index}`);t.parent.select(`text#${o}`).style("font-weight","normal"),n([],"mouseout"),t.services.events.dispatchEvent(T.Alluvial.NODE_MOUSEOUT,{event:r,element:s,datum:i}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:s})})}traverse(t,n,r=[]){n[t.link].map(i=>(r.push(i.index),i[t.node])).forEach(i=>this.traverse(t,i,r))}getRightArrowIcon(){return`
		<svg xmlns="http://www.w3.org/2000/svg" class="arrow-right" width="32" height="32" viewBox="0 0 32 32">
			<polygon points="18 6 16.57 7.393 24.15 15 4 15 4 17 24.15 17 16.57 24.573 18 26 28 16 18 6"/>
			<rect width="32" height="32"/>
		</svg>`}destroy(){this.parent.selectAll("path.line,.node-group").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null)}}class Se extends mt{constructor(){super(...arguments),this.type="grid",this.renderType=it.SVG}render(t=!0){const n=y(this.getOptions(),"grid","x","enabled"),r=y(this.getOptions(),"grid","y","enabled");this.drawBackdrop(n,r),!(!n&&!r)&&(n&&(N.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(t)),r&&(N.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(t)))}drawXGrid(t){const n=this.parent,r=this.backdrop.attr("height"),i=this.services.cartesianScales.getMainXScale(),s=fc(i).tickSizeInner(-r).tickSizeOuter(0);if(y(this.getOptions(),"grid","x","alignWithAxisTicks")){const o=this.services.cartesianScales.getDomainAxisPosition(),l=y(this.getOptions(),"axes",o,"ticks","values");l&&s.tickValues(l)}else{const o=y(this.getOptions(),"grid","x","numberOfTicks");s.ticks(o)}const a=n.select(".x.grid").attr("transform",`translate(${-this.backdrop.attr("x")}, ${r})`);t?a.transition().call(o=>this.services.transitions.setupTransition({transition:o,name:"grid-update",animate:t})).call(s):a.call(s),this.cleanGrid(a)}drawYGrid(t){const n=this.parent,r=this.backdrop.attr("width"),i=this.services.cartesianScales.getMainYScale(),s=tm(i).tickSizeInner(-r).tickSizeOuter(0);if(y(this.getOptions(),"grid","y","alignWithAxisTicks")){const o=this.services.cartesianScales.getRangeAxisPosition(),l=y(this.getOptions(),"axes",o,"ticks","values");l&&s.tickValues(l)}else{const o=y(this.getOptions(),"grid","y","numberOfTicks");s.ticks(o)}const a=n.select(".y.grid").attr("transform",`translate(0, ${-this.backdrop.attr("y")})`);t?a.transition().call(o=>this.services.transitions.setupTransition({transition:o,name:"grid-update",animate:t})).call(s):a.call(s),this.cleanGrid(a)}getGridlineThreshold(t){const n=this.parent,r=n.selectAll(".x.grid .tick").nodes().sort((u,d)=>Number(bn(u).tx)-Number(bn(d).tx));let i=-1;if(!r.length)return;r.forEach(u=>{t[0]>=+bn(u).tx&&i++});const s=i+1<r.length?i+1:r.length,a=r[i],o=r[s];let l;if(!a)l=+bn(o).tx;else if(o)l=+bn(o).tx-+bn(a).tx;else{const u=n.select("rect.chart-grid-backdrop").node();l=N.getSVGElementSize(u).width-+bn(a).tx}const{threshold:c}=this.getOptions().tooltip.gridline;return l*c}getActiveGridline(t){const n=y(this.getOptions,"tooltip","gridline","threshold"),r=n||this.getGridlineThreshold(t);return this.parent.selectAll(".x.grid .tick").filter(function(){const i=bn(this),s={min:Number(i.tx)-r,max:Number(i.tx)+r};return s.min<=t[0]&&t[0]<=s.max})}drawBackdrop(t,n){const r=this.parent,i=this.services.cartesianScales.getMainXScale(),s=this.services.cartesianScales.getMainYScale(),[a,o]=i.range(),[l,c]=s.range();this.backdrop=N.appendOrSelect(r,"svg.chart-grid-backdrop").attr("role","presentation");const u=N.appendOrSelect(this.backdrop,t||n?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(u).attr("x",a).attr("y",c).attr("width",Math.abs(o-a)).attr("height",Math.abs(l-c)).lower(),u.attr("width","100%").attr("height","100%")}cleanGrid(t){t.selectAll("text").remove(),t.select(".domain").remove()}}class Ug extends mt{constructor(){super(...arguments),this.type="area",this.renderType=it.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-area"})).attr("opacity",r=>r.name!==n.datum().name?vn.opacity.unselected:vn.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-area"})).attr("opacity",vn.opacity.selected)}}init(){const t=this.services.events;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const n=this.getComponentContainer({ariaLabel:"area graphs",withinChartClip:!0}),r=this.getOptions();let i=[0,0];const{cartesianScales:s}=this.services,a=s.getOrientation(),o=tu().curve(this.services.curves.getD3Curve()).defined(b=>{const S=s.getRangeIdentifier();return b[S]!=null}),l=this.model.getGroupedData(this.configs.groups),c=y(r,"bounds"),u=c&&l&&l.length===1;!u&&c&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${l.length}`);let d=0;const h=(b,S)=>{y(r,"axes",b,"includeZero")===!1&&S[0]>0&&S[1]>0&&(d=S[0])},p=b=>u?s.getBoundedScaledValues(b)[0]:s.getRangeValue(d),f=b=>u?s.getBoundedScaledValues(b)[1]:s.getRangeValue(b);a===zt.VERTICAL?(i=s.getMainYScale().domain(),h(s.getMainYAxisPosition(),i),o.x(b=>s.getDomainValue(b)).y0(b=>p(b)).y1(b=>f(b))):(i=s.getMainXScale().domain(),h(s.getMainXAxisPosition(),i),o.x0(b=>p(b)).x1(b=>f(b)).y(b=>s.getDomainValue(b)));const g=y(r,"color","gradient","enabled"),m=l&&l.length===1&&g;l.length>1&&g&&console.error("Gradients can only be enabled when having 1 single dataset");const v=n.selectAll("path.area").data(l,b=>b.name),x=I(this.services.domUtils.getMainContainer());if(v.exit().attr("opacity",0).remove(),!l.length)return;if(m){const b=x.select(`path.${this.model.getColorClassName({classNameTypes:[st.STROKE],dataGroupName:l[0].name})}`).node();let S;if(b)S=getComputedStyle(b,null).getPropertyValue("stroke");else{const $=y(this.model.getOptions(),"color","scale");if($!==null){const k=Object.keys($);S=$[k[0]]}}dc.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${l[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:dc.getStops(i,S)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});const _=this,E=v.enter().append("path");m?E.merge(v).style("fill",b=>`url(#${this.services.domUtils.generateElementIDString(`${b.name.replace(" ","")}_${this.gradient_id}`)})`).attr("class","area").attr("class",b=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:b.name,originalClassName:"area"})).attr("d",b=>{const{data:S}=b;return o(S)}):(E.attr("opacity",0).merge(v).attr("class","area").attr("class",b=>this.model.getColorClassName({classNameTypes:[st.FILL,st.STROKE],dataGroupName:b.name,originalClassName:"area"})).style("fill",b=>_.model.getFillColor(b.name,null,b.data)).transition().call(b=>this.services.transitions.setupTransition({transition:b,name:"area-update-enter",animate:t})).attr("opacity",u?1:vn.opacity.selected).attr("d",b=>{const{data:S}=b;return o(S)}),u&&E.attr("fill-opacity",vn.opacity.selected).style("stroke",b=>_.model.getStrokeColor(b.name,null,b.data)).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}destroy(){const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class ai extends mt{constructor(){super(...arguments),this.type="line",this.renderType=it.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-line"})).attr("opacity",r=>r.name!==n.datum().name?yn.opacity.unselected:yn.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-line"})).attr("opacity",yn.opacity.selected)}}init(){const{events:t}=this.services;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,r=this.model.get("zoomDomain")!==void 0,i=n&&r?this.getComponentContainer({ariaLabel:"lines",withinChartClip:!1}):this.getComponentContainer({ariaLabel:"lines",withinChartClip:!0}),{cartesianScales:s,curves:a}=this.services,o=m=>s.getDomainValue(m),l=m=>s.getRangeValue(m),[c,u]=xn(o,l,s.getOrientation()),d=this.getOptions(),h=vs().x(c).y(u).curve(a.getD3Curve()).defined(m=>{const v=s.getRangeIdentifier(m);return m[v]!=null});let p=[];if(this.configs.stacked){const m=Object.keys(d.axes).some(x=>d.axes[x].percentage),{groupMapsTo:v}=d.data;p=this.model.getStackedData({groups:this.configs.groups,percentage:m}).map(x=>{const _=this.services.cartesianScales.getDomainIdentifier(x),E=this.services.cartesianScales.getRangeIdentifier(x);return{name:y(x,0,v),data:x.map(b=>({[_]:b.data.sharedStackKey,[v]:b[v],[E]:b[1]})),hidden:!TC(x,b=>b[0]!==b[1])}})}else p=this.model.getGroupedData(this.configs.groups);const f=i.selectAll("path.line").data(p,m=>m.name);f.exit().attr("opacity",0).remove();const g=f.enter().append("path").classed("line",!0).attr("opacity",0).merge(f).data(p,m=>m.name).attr("class",m=>this.model.getColorClassName({classNameTypes:[st.STROKE],dataGroupName:m.name,originalClassName:"line"})).style("stroke",m=>this.model.getStrokeColor(m.name,null,m.data)).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",m=>{const{data:v}=m;return v.map(x=>{const _=this.services.cartesianScales.getRangeIdentifier(x);return x[_]}).join(",")});if(n&&r){const m=s.getMainXScale(),v=s.getMainYScale();if(m&&v){const[x,_]=m.range(),[E,b]=v.range();i.style("overflow","hidden").style("clip",`rect(${b}px, ${_}px, ${E}px, ${x}px)`)}}g.transition().call(m=>this.services.transitions.setupTransition({transition:m,name:"line-update-enter",animate:t})).attr("opacity",m=>m.hidden?0:1).attr("d",m=>{const{data:v}=m;return h(v)})}destroy(){const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}const Bg=5;function tD(e,t){return e>t-Bg&&e<t+Bg}class Gn extends mt{constructor(){super(...arguments),this.type="ruler",this.renderType=it.SVG,this.isXGridEnabled=y(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=y(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(t=!1){const n=y(this.getOptions(),"ruler","enabled"),r=y(this.getOptions(),"tooltip","alwaysShowRulerTooltip"),i=n||r;this.drawBackdrop(),i&&!this.isEventListenerAdded?this.addBackdropEventListeners():!i&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(t){return t}showRuler(t,[n,r]){const i=this.parent,s=this.services.cartesianScales.getOrientation(),a=this.model.getDisplayData(),o=this.services.cartesianScales.getRangeScale(),[l,c]=o.range(),u=s===zt.HORIZONTAL?r:n,d=N.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),h=N.appendOrSelect(d,"line.ruler-line"),p=i.selectAll("[role=graphics-symbol]"),f=a.map(m=>({domainValue:this.services.cartesianScales.getDomainValue(m),originalData:m})).filter(m=>tD(m.domainValue,u));if(this.pointsWithinLine&&f.length===this.pointsWithinLine.length&&f.map(m=>m.domainValue).join()===this.pointsWithinLine.map(m=>m.domainValue).join())return this.pointsWithinLine=f,this.services.events.dispatchEvent(T.Tooltip.MOVE,{mousePosition:[n,r]});this.pointsWithinLine=f;const g=this.pointsWithinLine.reduce((m,v)=>{if(m.length===0)return m.push(v),m;const x=m[0].domainValue,_=Math.abs(u-v.domainValue),E=Math.abs(u-x);return _>E||(_<E?m=[v]:m.push(v)),m},[]);if(g.length>0){const m=g.map(E=>E.originalData).filter(E=>{const b=this.services.cartesianScales.getRangeIdentifier(E);return E[b]!=null}),v=g.map(E=>E.domainValue),x=p.filter(E=>{const b=this.services.cartesianScales.getDomainValue(E);return v.includes(b)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!Kf(this.elementsToHighlight,x)&&this.hideRuler(),x.dispatch("mouseover"),this.elementsToHighlight=x,this.services.events.dispatchEvent(T.Tooltip.SHOW,{event:t,mousePosition:[n,r],hoveredElement:h,data:this.formatTooltipData(m)}),d.attr("opacity",1);const _=g[0];s==="horizontal"?h.attr("x1",c).attr("x2",l).attr("y1",_.domainValue).attr("y2",_.domainValue):h.attr("y1",c).attr("y2",l).attr("x1",_.domainValue).attr("x2",_.domainValue)}else this.hideRuler()}hideRuler(){const t=this.parent,n=N.appendOrSelect(t,"g.ruler");t.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent(T.Tooltip.HIDE),n.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const t=this,n=this.services.domUtils.getHolder(),r=this.model.getDisplayData();let i=function(s){const a=er(s,t.parent.node());t.showRuler(s,a)};if(r.length>100){const s=r.length%50*12.5;i=KT(function(a){const{mousePosition:o}=this;t.showRuler(a,o)},s,n)}this.backdrop.on("mousemove mouseover",i).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const t=this.parent;this.backdrop=N.appendOrSelect(t,"svg.chart-grid-backdrop")}}let cn=class extends mt{constructor(){super(...arguments),this.type="scatter",this.renderType=it.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(t=>this.services.transitions?.setupTransition({transition:t,name:"chart-holder-hover-scatter"})).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(t=>this.services.transitions?.setupTransition({transition:t,name:"chart-holder-mouseout-scatter"})).attr("opacity",0)},this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,{groupMapsTo:r}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(i=>this.services.transitions?.setupTransition({transition:i,name:"legend-hover-scatter"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(t=>this.services.transitions?.setupTransition({transition:t,name:"legend-mouseout-scatter"})).attr("opacity",1)}}init(){const{events:t}=this.services;if(!t)throw new Error("Services events are undefined.");t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:n}=this.configs;n&&(t.addEventListener(T.Chart.MOUSEOVER,this.handleChartHolderOnHover),t.addEventListener(T.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(t){const{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales are undefined.");const r=n.getDomainIdentifier(t),i=this.model.get("zoomDomain");return i!==void 0?t.filter(s=>s[r].getTime()>=i[0].getTime()&&s[r].getTime()<=i[1].getTime()):t}getScatterData(){const t=this.getOptions(),{stacked:n}=this.configs;let r;if(n){const i=Object.keys(t.axes).some(s=>t.axes[s].percentage);r=this.model.getStackedData({groups:this.configs.groups,percentage:i})}else{const{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");r=this.model.getDisplayData(this.configs.groups).filter(s=>{const a=i.getRangeIdentifier(s);return s[a]!==void 0&&s[a]!==null})}return this.filterBasedOnZoomDomain(r)}render(t){if(!(y(this.getOptions(),"points","enabled")||y(this.getOptions(),"bubble","enabled")))return;const n=this.services.zoom?.isZoomBarEnabled()||!1,r=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:n}),i=this.getOptions(),{groupMapsTo:s}=i.data,{cartesianScales:a}=this.services;if(!a)throw new Error("Services cartesianScales are undefined.");const o=a.getDomainIdentifier(),l=r.selectAll("circle.dot").data(this.getScatterData(),u=>`${u[s]}-${u[o]}`);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l);this.styleCircles(c,t),this.addEventListeners()}isDatapointThresholdAnomaly(t){const{handleThresholds:n}=this.configs;if(!n)return!1;const{cartesianScales:r}=this.services;if(!r)throw new Error("Cartesian scales service is undefined");const i=r.getOrientation(),[s,a]=xn(r.getHighestDomainThreshold(),r.getHighestRangeThreshold(),i),[o,l]=xn(d=>r.getDomainValue(d),d=>r.getRangeValue(d),i),c=o(t),u=l(t);return a&&s?u<=a.scaleValue&&c>=s.scaleValue:a?u<=a.scaleValue:s?c>=s.scaleValue:!1}styleCircles(t,n){const r=this.getOptions(),{filled:i,fillOpacity:s}=r.points,{cartesianScales:a}=this.services;if(!a)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:o}=r.data,l=p=>a.getDomainValue(p),c=p=>a.getRangeValue(p),[u,d]=xn(l,c,a.getOrientation()),{fadeInOnChartHolderMouseover:h}=this.configs;t.raise().classed("dot",!0).attr("class",p=>{const f=a.getDomainIdentifier(p),g=this.model.getIsFilled(p[o],p[f],p,i)?[st.FILL,st.STROKE]:[st.STROKE];return this.model.getColorClassName({classNameTypes:g,dataGroupName:p[o],originalClassName:"dot"})||""}).classed("threshold-anomaly",p=>this.isDatapointThresholdAnomaly(p)).classed("filled",p=>{const f=a.getDomainIdentifier(p);return this.model.getIsFilled(p[o],p[f],p,i)}).classed("unfilled",p=>{const f=a.getDomainIdentifier(p);return!this.model.getIsFilled(p[o],p[f],p,i)}).transition().call(p=>this.services.transitions?.setupTransition({transition:p,name:"scatter-update-enter",animate:n})).attr("cx",u).attr("cy",d).attr("r",r.points.radius).style("fill",p=>{const f=a.getDomainIdentifier(p);if(this.model.getIsFilled(p[o],p[f],p,i))return this.model.getFillColor(p[o],p[f],p)}).style("stroke",p=>{const f=a.getDomainIdentifier(p);return this.model.getStrokeColor(p[o],p[f],p)}).attr("fill-opacity",i?s:1).attr("opacity",h?0:1).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",p=>{const f=a.getRangeIdentifier(p);return p[f]}),this.addEventListeners()}getTooltipAdditionalItems(t){return null}addEventListeners(){const t=this,{groupMapsTo:n}=t.getOptions().data,r=y(this.getOptions(),"tooltip","alwaysShowRulerTooltip");if(!this.parent)throw new Error("Parent not defined");const i=this.parent.selectAll("circle");r?i.style("pointer-events","none"):i.style("pointer-events",null),i.on("mouseover",function(s,a){const o=I(this);o.classed("hovered",!0).attr("class",l=>t.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:l[n],originalClassName:o.attr("class")})).style("fill",l=>{const c=t.services.cartesianScales?.getDomainIdentifier(l);return t.model.getFillColor(l[n],l[c],l)}).classed("unfilled",!1),r||t.services.events?.dispatchEvent(T.Tooltip.SHOW,{event:s,hoveredElement:o,data:[a],additionalItems:t.getTooltipAdditionalItems(a)}),t.services.events?.dispatchEvent(T.Scatter.SCATTER_MOUSEOVER,{event:s,element:o,datum:a})}).on("mousemove",function(s,a){const o=I(this);t.services.events?.dispatchEvent(T.Scatter.SCATTER_MOUSEMOVE,{event:s,element:o,datum:a}),t.services.events?.dispatchEvent(T.Tooltip.MOVE,{event:s})}).on("click",function(s,a){t.services.events?.dispatchEvent(T.Scatter.SCATTER_CLICK,{event:s,element:I(this),datum:a})}).on("mouseout",function(s,a){const o=I(this);if(o.classed("hovered",!1),!t.configs.filled){const{filled:l}=t.getOptions().points,c=t.services.cartesianScales?.getDomainIdentifier(a),u=t.model.getIsFilled(a[n],a[c],a,l);o.classed("unfilled",!u).style("fill",d=>u||l?t.model.getFillColor(d[n],d[c],d):null)}t.services.events?.dispatchEvent(T.Scatter.SCATTER_MOUSEOUT,{event:s,element:o,datum:a}),t.services.events?.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:o})})}destroy(){this.parent?.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:t}=this.services;if(!t)throw new Error("Services events undefined");t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),t.removeEventListener(T.Chart.MOUSEOVER,this.handleChartHolderOnHover),t.removeEventListener(T.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}};class Hg extends mt{constructor(t,n,r){super(t,n,r),this.type="axes",this.renderType=it.SVG,this.truncation={[G.LEFT]:!1,[G.RIGHT]:!1,[G.TOP]:!1,[G.BOTTOM]:!1},r&&(this.configs=r),this.margins=this.configs.margins}render(t=!0){const{position:n}=this.configs,r=this.getOptions(),i=y(r,"axes",n,"visible"),s=this.getComponentContainer({ariaLabel:"axes"}),{width:a,height:o}=N.getSVGElementSize(s,{useAttrs:!0}),l=N.appendOrSelect(s,`g.axis.${n}`);let c,u;if(n===G.BOTTOM||n===G.TOP?(c=this.configs.axes[G.LEFT]?this.margins.left:0,u=this.configs.axes[G.RIGHT]?a-this.margins.right:a):(c=o-this.margins.bottom,u=this.margins.top),!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const d=this.services.cartesianScales.getScaleByPosition(n);this.scaleType===nt.LABELS||this.scaleType===nt.LABELS_RATIO?d.rangeRound([c,u]):d.range([c,u]);let h;switch(n){case G.LEFT:h=tm;break;case G.BOTTOM:h=fc;break;case G.RIGHT:h=RC;break;case G.TOP:h=DC;break}l.attr("aria-label",`${n} axis`);const p=!l.select("g.ticks").empty();let f=N.appendOrSelect(l,"g.ticks");p||(f.attr("role",`${ht.GRAPHICS_OBJECT} ${ht.GROUP}`),f.attr("aria-label",`${n} ticks`));const g=N.appendOrSelect(l,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label",`invisible ${n} ticks`),m=y(r,"axes",n),v=this.scaleType===nt.TIME||m.scaleType===nt.TIME,x=n===G.LEFT||n===G.RIGHT,_=this.model.get("zoomDomain");if(_&&v&&!x&&d.domain(_),!i){f.attr("aria-hidden",!0);return}const E=y(m,"scaleType"),b=y(r,"data","loading"),S=y(m,"ticks","number"),$=y(m,"ticks","values"),k=y(m,"truncation","type"),C=y(m,"truncation","threshold"),R=y(m,"truncation","numCharacter"),M=S!==null,H=y(r,"timeScale"),P=N.appendOrSelect(g,"g.tick"),B=N.appendOrSelect(P,"text").text("0"),O=N.getSVGElementSize(B.node(),{useBBox:!0}).height;P.remove();const w=this.scaleType||m.scaleType||nt.LINEAR,L=h(d).tickSizeOuter(0);if(d.ticks){let Y;if(M?Y=S:(Y=Nn.ticks.number,x&&(Y=this.getNumberOfFittingTicks(o,O,Nn.ticks.verticalSpaceRatio))),d.ticks().length===1&&d.ticks()[0]===0&&(Y=0),L.ticks(Y),v)if(!d.ticks(Y).length)L.tickValues([]);else{const et=y(r,"timeScale","addSpaceOnEdges"),ut=y(r,"axes",n,"domain"),F=d.copy();et&&!ut&&F.nice(Y);const q=F.ticks(Y);et&&q.length>2&&!ut&&(q.splice(q.length-1,1),q.splice(0,1)),L.tickValues(q)}}let D;const U=y(m,"ticks","formatter"),{code:K,number:W}=y(r,"locale");if(v){const Y=jl(L.tickValues(),y(r,"timeScale","timeInterval"));U===null?D=(et,ut)=>Fl(et,ut,L.tickValues(),Y,H,r.locale):D=(et,ut)=>{const F=Fl(et,ut,L.tickValues(),Y,H,r.locale);return U(et,ut,F)}}else U===null?w===nt.LINEAR&&(D=Y=>W(Y,K)):D=U;L.tickFormat(D);const[j,X]=this.services.cartesianScales.getScaleByPosition(n).domain();let ct;if($){if(v)$.forEach((Y,et)=>{Y.getTime===void 0&&($[et]=new Date(Y))}),ct=$.filter(Y=>{const et=Y.getTime();return et>=new Date(j).getTime()&&et<=new Date(X).getTime()});else if(E===nt.LABELS){const Y=this.services.cartesianScales.getScaleByPosition(n).domain();ct=$.filter(et=>Y.includes(et))}else ct=$.filter(Y=>Y>=j&&Y<=X);L.tickValues(ct)}switch(n){case G.LEFT:f.attr("transform",`translate(${this.margins.left}, 0)`);break;case G.BOTTOM:f.attr("transform",`translate(0, ${o-this.margins.bottom})`);break;case G.RIGHT:f.attr("transform",`translate(${a-this.margins.right}, 0)`);break;case G.TOP:f.attr("transform",`translate(0, ${this.margins.top})`);break}const J=this.model.isDataEmpty();if(m.title){const Y=N.appendOrSelect(l,"text.axis-title").html(J||b?"":ln(m.title)),et=y(m,"titleOrientation");let ut;switch(n){case G.LEFT:et===As.RIGHT?Y.attr("transform","rotate(90)").attr("y",0).attr("x",d.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):Y.attr("transform","rotate(-90)").attr("y",0).attr("x",-(d.range()[0]/2)).attr("dy","0.75em").style("text-anchor","middle");break;case G.BOTTOM:const F=o-mp;Y.attr("transform",`translate(${this.margins.left/2+d.range()[1]/2}, ${F})`);break;case G.RIGHT:et===As.LEFT?Y.attr("transform","rotate(-90)").attr("y",a).attr("x",-(d.range()[0]/2)).style("text-anchor","middle"):Y.attr("transform","rotate(90)").attr("y",-a).attr("x",d.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case G.TOP:ut=N.getSVGElementSize(Y,{useBBox:!0}).height,Y.attr("transform",`translate(${this.margins.left/2+d.range()[1]/2}, ${ut/2})`).style("text-anchor","middle");break}}if(v){const Y=jl(L.tickValues(),y(r,"timeScale","timeInterval")),et=H.showDayName,ut=f;t&&(f=f.transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"axis-update",animate:t}))),f=f.call(L),ut.selectAll(".tick").data(L.tickValues(),d).order().select("text").attr("class",(F,q)=>Ip(F,q,L.tickValues(),Y,et)?"tick-label--primary":"tick-label")}else!t||!p?f=f.call(L):f=f.transition().call(Y=>this.services.transitions.setupTransition({transition:Y,name:"axis-update",animate:t})).call(L);if(g.call(L),n===G.BOTTOM||n===G.TOP){let Y=!1;const et=y(m,"ticks","rotation");if(et===gi.ALWAYS)Y=!0;else if(et===gi.NEVER)Y=!1;else if(!et||et===gi.AUTO)if(d.step)Y=g.selectAll("g.tick text").nodes().some(ut=>N.getSVGElementSize(ut,{useBBox:!0}).width>=d.step());else{Y=!1;const ut=g.append("text").text("A"),F=N.getSVGElementSize(ut.node(),{useBBox:!0}).width;let q;g.selectAll("g.tick").each(function(){const Z=I(this),V=parseFloat(y(bn(this),"tx"));V!==null&&q+Z.text().length*F*.8>=V&&(Y=!0),q=V}),ut.remove()}Y?(M||(L.ticks(this.getNumberOfFittingTicks(a,O,Nn.ticks.horizontalSpaceRatio)),g.call(L),f.call(L)),l.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",n===G.TOP?"start":"end")):l.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(b?l.attr("opacity",0):l.attr("opacity",1),f.selectAll("g.tick").attr("aria-label",Y=>Y),g.selectAll("g.tick").attr("aria-label",Y=>Y),k!==we.NONE&&E===nt.LABELS&&!$){const Y=this.services.cartesianScales.getScaleDomain(n);if(Y.length>0){const et=s.select(`g.axis.${n} g.ticks g.tick`).html();l.selectAll("g.ticks g.tick").html(et);const ut=this;l.selectAll("g.tick text").data(Y).text(function(F){return F.length>C?(ut.truncation[n]=!0,qi(F,k,R)):F}),this.getInvisibleAxisRef().selectAll("g.tick text").data(Y).text(function(F){return F.length>C?qi(F,k,R):F}),l.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),l.selectAll("g.tick text").data(Y)}}this.addEventListeners()}addEventListeners(){const t=this.getComponentContainer(),{position:n}=this.configs,r=N.appendOrSelect(t,`g.axis.${n}`),i=this.getOptions(),s=y(i,"axes",n),a=y(s,"scaleType"),o=y(s,"truncation","threshold"),l=this;r.selectAll("g.tick text").on("mouseover",function(c,u){l.services.events.dispatchEvent(T.Axis.LABEL_MOUSEOVER,{event:c,element:I(this),datum:u}),a===nt.LABELS&&u.length>o&&l.services.events.dispatchEvent(T.Tooltip.SHOW,{event:c,hoveredElement:I(this),content:u})}).on("mousemove",function(c,u){l.services.events.dispatchEvent(T.Axis.LABEL_MOUSEMOVE,{event:c,element:I(this),datum:u}),a===nt.LABELS&&u.length>o&&l.services.events.dispatchEvent(T.Tooltip.MOVE,{event:c})}).on("click",function(c,u){l.services.events.dispatchEvent(T.Axis.LABEL_CLICK,{event:c,element:I(this),datum:u})}).on("mouseout",function(c,u){l.services.events.dispatchEvent(T.Axis.LABEL_MOUSEOUT,{event:c,element:I(this),datum:u}),a===nt.LABELS&&l.services.events.dispatchEvent(T.Tooltip.HIDE)})}getInvisibleAxisRef(){const{position:t}=this.configs;return this.getComponentContainer().select(`g.axis.${t} g.ticks.invisible`)}getTitleRef(){const{position:t}=this.configs;return this.getComponentContainer().select(`g.axis.${t} text.axis-title`)}getNumberOfFittingTicks(t,n,r){const i=Math.floor(t/(n*r));return Zf(i,2,Nn.ticks.number)}destroy(){const t=this.getComponentContainer(),{position:n}=this.configs;N.appendOrSelect(t,`g.axis.${n}`).selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)}}class eD extends Hg{constructor(t,n,r){super(t,n,r)}render(t=!0){super.render(t),super.destroy();const n=this.configs.position,r=this.getComponentContainer({ariaLabel:"axes"}),i=N.appendOrSelect(r,`g.axis.${n}`),s=this;i.selectAll("g.tick").each(function(a,o){const l=I(this);l.classed("tick-hover",!0).attr("tabindex",o===0?0:-1);const c=l.select("text"),{width:u,height:d}=N.getSVGElementSize(c,{useBBox:!0}),h=N.appendOrSelect(l,"rect.axis-holder");let p=0,f=0;switch(n){case G.LEFT:p=-u+Number(c.attr("x")),f=-(d/2);break;case G.RIGHT:p=Math.abs(Number(c.attr("x"))),f=-(d/2);break;case G.TOP:p=-(u/2),f=-d+Number(c.attr("y"))/2,s.truncation[n]&&(p=0,h.attr("transform","rotate(-45)"));break;case G.BOTTOM:p=-(u/2),f=d/2-2,s.truncation[n]&&(p=-u,h.attr("transform","rotate(-45)"));break}h.attr("x",p-Nn.hover.rectanglePadding).attr("y",f).attr("width",u+Nn.hover.rectanglePadding*2).attr("height",d).lower()}),this.addEventListeners()}addEventListeners(){const t=this.getComponentContainer(),{position:n}=this.configs,r=N.appendOrSelect(t,`g.axis.${n}`),i=this.getOptions(),s=y(i,"axes",n),a=y(s,"scaleType"),o=y(s,"truncation","threshold"),l=this;r.selectAll("g.tick.tick-hover").on("mouseover",function(c){const u=I(this).select("text"),d=u.datum();l.services.events.dispatchEvent(T.Axis.LABEL_MOUSEOVER,{event:c,element:u,datum:d}),a===nt.LABELS&&d.length>o&&l.services.events.dispatchEvent(T.Tooltip.SHOW,{event:c,element:u,datum:d})}).on("mousemove",function(c){const u=I(this).select("text"),d=u.datum();l.services.events.dispatchEvent(T.Axis.LABEL_MOUSEMOVE,{event:c,element:u,datum:d}),l.services.events.dispatchEvent(T.Tooltip.MOVE,{event:c})}).on("click",function(c){l.services.events.dispatchEvent(T.Axis.LABEL_CLICK,{event:c,element:I(this).select("text"),datum:I(this).select("text").datum()})}).on("mouseout",function(c){l.services.events.dispatchEvent(T.Axis.LABEL_MOUSEOUT,{event:c,element:I(this).select("text"),datum:I(this).select("text").datum()}),a===nt.LABELS&&l.services.events.dispatchEvent(T.Tooltip.HIDE)}).on("focus",function(c){const u={clientX:0,clientY:0};if(c.target){c.target.focus();const d=c.target.getBoundingClientRect();u.clientX=d.x,u.clientY=d.y}l.services.events.dispatchEvent(T.Axis.LABEL_FOCUS,{event:{...c,...u},element:I(this),datum:I(this).select("text").datum()})}).on("blur",function(c){l.services.events.dispatchEvent(T.Axis.LABEL_BLUR,{event:c,element:I(this),datum:I(this).select("text").datum()})}).on("keydown",function(c){c.key&&c.key==="Escape"&&(l.services.events.dispatchEvent(T.Tooltip.HIDE),l.services.events.dispatchEvent(T.Axis.LABEL_BLUR,{event:c,element:I(this),datum:I(this).select("text").datum()})),n===G.LEFT||n===G.RIGHT?c.key&&c.key==="ArrowUp"?l.goNext(this,c):c.key&&c.key==="ArrowDown"&&l.goPrevious(this,c):c.key&&c.key==="ArrowLeft"?l.goPrevious(this,c):c.key&&c.key==="ArrowRight"&&l.goNext(this,c)})}goNext(t,n){t.nextElementSibling&&t.nextElementSibling.tagName!=="path"&&t.nextElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}goPrevious(t,n){t.previousElementSibling&&t.previousElementSibling.tagName!=="path"&&t.previousElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}destroy(){const t=this.getComponentContainer(),{position:n}=this.configs;N.appendOrSelect(t,`g.axis.${n}`).selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)}}class me extends mt{constructor(){super(...arguments),this.type="2D-axes",this.renderType=it.SVG,this.children={},this.thresholds=[],this.margins={top:0,right:0,bottom:0,left:0}}render(t=!1){const n={},r=Object.keys(G),i=y(this.getOptions(),"axes");r.forEach(a=>{i[G[a]]&&(n[G[a]]=!0)}),this.configs.axes=n,r.forEach(a=>{const o=G[a];if(this.configs.axes[o]&&!this.children[o]){const l={position:o,axes:this.configs.axes,margins:this.margins},c=this.model.axisFlavor===yi.DEFAULT?new Hg(this.model,this.services,l):new eD(this.model,this.services,l);c.setModel(this.model),c.setServices(this.services),c.setParent(this.parent),this.children[o]=c}}),Object.keys(this.children).forEach(a=>{this.children[a].render(t)});const s={};Object.keys(this.children).forEach(a=>{const o=this.children[a],l=o.configs.position,c=o.getInvisibleAxisRef(),{width:u,height:d}=N.getSVGElementSize(c,{useBBox:!0});let h=0;if(!o.getTitleRef().empty()){const g=N.getSVGElementSize(o.getTitleRef(),{useBBox:!0}).height;l===G.LEFT||l===G.RIGHT?h=g+5:l===G.BOTTOM?h=g+mp:h=g}const p=u,f=d;switch(l){case G.TOP:s.top=f+h;break;case G.BOTTOM:s.bottom=f+h;break;case G.LEFT:s.left=p+h;break;case G.RIGHT:s.right=p+h;break}}),this.services.events.dispatchEvent(T.Axis.RENDER_COMPLETE),Object.keys(s).some(a=>this.margins[a]!==s[a])&&(this.margins=Object.assign(this.margins,s),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(T.ZoomBar.UPDATE),Object.keys(this.children).forEach(a=>{const o=this.children[a];o.margins=this.margins}),this.render(!0))}}class ue extends mt{constructor(){super(...arguments),this.type="skeleton"}render(t=!0){const n=y(this.getOptions(),"data","loading");n?this.renderSkeleton(n):this.removeSkeleton()}renderSkeleton(t){if(this.configs.skeleton===jt.GRID)this.renderGridSkeleton(t);else if(this.configs.skeleton===jt.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(t);else if(this.configs.skeleton===jt.PIE)this.renderPieSkeleton(t);else if(this.configs.skeleton===jt.DONUT)this.renderDonutSkeleton(t);else throw new Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`)}renderGridSkeleton(t){this.setScales(),this.drawBackdrop(t),this.drawXGrid(t),this.drawYGrid(t),t&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(t){const n=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(t),n===zt.VERTICAL&&this.drawYGrid(t),n===zt.HORIZONTAL&&this.drawXGrid(t),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(t){const n=this.computeOuterRadius();this.drawRing(n,0,t),t&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(t){const n=this.computeOuterRadius(),r=this.computeInnerRadius();this.drawRing(n,r,t),t&&this.setShimmerEffect("shimmer-areas")}setScales(){const t=this.services.cartesianScales.getMainXScale().range(),n=this.services.cartesianScales.getMainYScale().range();this.xScale=Fe().domain([0,1]).range(t),this.yScale=Fe().domain([0,1]).range(n)}drawBackdrop(t){const n=this.parent,{width:r,height:i}=N.getSVGElementSize(n,{useAttrs:!0});this.backdrop=N.appendOrSelect(n,"svg.chart-skeleton.DAII").attr("role","presentation").attr("width",r).attr("height",i);const s=N.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");s.attr("width","100%").attr("height","100%");const[a]=this.xScale.range(),[,o]=this.yScale.range();this.backdrop.merge(s).attr("x",a).attr("y",o),s.classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(t){const n=+this.backdrop.attr("width"),r=y(this.getOptions(),"grid","x","numberOfTicks"),i=this.xScale.ticks(r).map(o=>o*n),s=N.appendOrSelect(this.backdrop,"g.x.skeleton"),a=s.selectAll("line").data(i);a.enter().append("line").merge(a).attr("x1",o=>o).attr("x2",o=>o).attr("y1",0).attr("y2","100%"),s.selectAll("line").classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(t){const n=+this.backdrop.attr("height"),r=this.backdrop.attr("width"),i=y(this.getOptions(),"grid","y","numberOfTicks"),s=this.xScale.ticks(i).map(l=>l*n),a=N.appendOrSelect(this.backdrop,"g.y.skeleton"),o=a.selectAll("line").data(s);o.enter().append("line").merge(o).attr("x1",0).attr("x2",r).attr("y1",l=>l).attr("y2",l=>l),a.selectAll("line").classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(t,n,r=!0){const i=this.parent,{width:s,height:a}=N.getSVGElementSize(i,{useAttrs:!0}),o=N.appendOrSelect(i,"svg.chart-skeleton").attr("width",s).attr("height",a).attr("role","presentation"),l=n===0?"pie":"donut",c=y(this.getOptions(),l,"alignment");N.appendOrSelect(o,"rect.chart-skeleton-area-container").attr("width",s).attr("height",a).attr("fill","none");const u=gs().innerRadius(n).outerRadius(t).startAngle(0).endAngle(Math.PI*2),d=t+Math.abs(Lt.radiusOffset),h=t+(Math.min(s,a)-t*2)/2,p=N.appendOrSelect(o,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${d}, ${h})`).attr("d",u).classed("shimmer-effect-areas",r).classed("empty-state-areas",!r).style("fill",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null);let f=t+Lt.xOffset;c===Ft.CENTER?f=s/2:c===Ft.RIGHT&&(f=s-t-Lt.xOffset);const g=t+Lt.yOffset;p.attr("transform",`translate(${f}, ${g})`)}computeOuterRadius(){const{width:t,height:n}=N.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(t,n)/2+Lt.radiusOffset}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(t){const n="stop-bg-shimmer",r="stop-shimmer",i=this.parent.select(".chart-skeleton"),{width:s}=N.getSVGElementSize(this.parent,{useAttrs:!0}),a=0,o=s,l=N.appendOrSelect(i,"defs").lower(),c=N.appendOrSelect(l,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(t)).attr("class",t).attr("x1",a-3*.2*s).attr("x2",o).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),u=`
			<stop class="${n}" offset="${a}"></stop>
			<stop class="${r}" offset="${a+.2}"></stop>
			<stop class="${n}" offset="${a+2*.2}"></stop>
		`;c.html(u),d();function d(){c.attr("gradientTransform",`translate(${a-3*.2*s}, 0)`).transition().duration(2e3).delay(1e3).ease(UC).attr("gradientTransform",`translate(${o+3*.2*s}, 0)`).on("end",d)}}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class nD extends mt{constructor(){super(...arguments),this.type="boxplot",this.renderType=it.SVG}render(t){const n=this.getComponentContainer({ariaLabel:"box plots",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.model.getDataGroupNames(),a=this.services.cartesianScales.getMainXScale(),o=this.services.cartesianScales.getMainYScale(),[l,c]=a.range(),[u,d]=o.range(),h=c-l,p=u-d;if(h===0)return;const{cartesianScales:f}=this.services,g=f.getOrientation(),m=g===zt.VERTICAL,[v,x]=xn(M=>this.services.cartesianScales.getDomainValue(M),M=>this.services.cartesianScales.getRangeValue(M),g),_=Math.floor((m?h:p)/s.length),E=Math.min(_/2,16),b=this.model.getBoxplotData(),S=n.selectAll(".box-group").data(b);S.exit().remove();const $=S.enter().append("g").attr("class","box-group"),k=S.merge($);$.append("path").merge(S.select("path.vertical-line.start")).attr("class",()=>this.model.getColorClassName({classNameTypes:[st.STROKE],originalClassName:"vertical-line start"})).attr("stroke-width",Le.strokeWidth.default).attr("fill","none").transition().call(M=>this.services.transitions.setupTransition({transition:M,name:"boxplot-update-verticalstartline",animate:t})).attr("d",M=>{const H=f.getDomainValue(M[i]),P=H,B=f.getRangeValue(M.whiskers.min),O=f.getRangeValue(M.quartiles.q_25);return se({x0:H,x1:P,y0:B,y1:O},g)}),$.append("path").merge(S.select("path.vertical-line.end")).attr("class",()=>this.model.getColorClassName({classNameTypes:[st.STROKE],originalClassName:"vertical-line end"})).attr("stroke-width",Le.strokeWidth.default).attr("fill","none").transition().call(M=>this.services.transitions.setupTransition({transition:M,name:"boxplot-update-verticalendline",animate:t})).attr("d",M=>{const H=f.getDomainValue(M[i]),P=H,B=f.getRangeValue(M.whiskers.max),O=f.getRangeValue(M.quartiles.q_75);return se({x0:H,x1:P,y0:B,y1:O},g)}),$.append("path").merge(S.select("path.box")).attr("class",()=>this.model.getColorClassName({classNameTypes:[st.FILL,st.STROKE],originalClassName:"box"})).attr("fill-opacity",Le.box.opacity.default).attr("stroke-width",Le.strokeWidth.default).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","box").attr("aria-label",M=>M[i]).transition().call(M=>this.services.transitions.setupTransition({transition:M,name:"boxplot-update-quartiles",animate:t})).attr("d",M=>{const H=f.getDomainValue(M[i])-E/2,P=H+E,B=f.getRangeValue(Math[m?"max":"min"](M.quartiles.q_75,M.quartiles.q_25)),O=B+Math.abs(f.getRangeValue(M.quartiles.q_75)-f.getRangeValue(M.quartiles.q_25));return se({x0:H,x1:P,y0:B,y1:O},g)}),$.append("path").merge(S.select("path.highlight-area")).attr("class","highlight-area").attr("opacity",0).attr("d",M=>{const H=f.getDomainValue(M[i])-E/2,P=H+E,B=f.getRangeValue(M.whiskers.min),O=f.getRangeValue(M.whiskers.max);return se({x0:H,x1:P,y0:B,y1:O},g)}),$.append("path").merge(S.select("path.whisker.start")).attr("class",()=>this.model.getColorClassName({classNameTypes:[st.STROKE],originalClassName:"whisker start"})).attr("stroke-width",Le.strokeWidth.thicker).attr("fill","none").transition().call(M=>this.services.transitions.setupTransition({transition:M,name:"boxplot-update-startingwhisker",animate:t})).attr("d",M=>{const H=f.getDomainValue(M[i])-E/4,P=H+E/2,B=f.getRangeValue(M.whiskers.min),O=f.getRangeValue(M.whiskers.min);return se({x0:H,x1:P,y0:B,y1:O},g)}),$.append("path").merge(S.select("path.median")).attr("fill","none").attr("class",()=>this.model.getColorClassName({classNameTypes:[st.STROKE],originalClassName:"median"})).attr("stroke-width",2).transition().call(M=>this.services.transitions.setupTransition({transition:M,name:"boxplot-update-median",animate:t})).attr("d",M=>{const H=f.getDomainValue(M[i])-E/2,P=H+E,B=f.getRangeValue(M.quartiles.q_50);return se({x0:H,x1:P,y0:B,y1:B},g)}),$.append("path").merge(S.select("path.whisker.end")).attr("class",()=>this.model.getColorClassName({classNameTypes:[st.STROKE],originalClassName:"whisker end"})).attr("stroke-width",Le.strokeWidth.thicker).attr("fill","none").transition().call(M=>this.services.transitions.setupTransition({transition:M,name:"boxplot-update-endingwhisker",animate:t})).attr("d",M=>{const H=f.getDomainValue(M[i])-E/4,P=H+E/2,B=f.getRangeValue(M.whiskers.max),O=f.getRangeValue(M.whiskers.max);return se({x0:H,x1:P,y0:B,y1:O},g)});const C=k.selectAll("circle.outlier").data(M=>M.outliers.map(H=>({min:M.whiskers.min,max:M.whiskers.max,[i]:M[i],value:H})));C.exit().remove();const R=C.enter().append("circle");C.merge(R).attr("r",Le.circle.radius).attr("class",()=>this.model.getColorClassName({classNameTypes:[st.FILL,st.STROKE],originalClassName:"outlier"})).attr("fill-opacity",Le.circle.opacity.default).attr("cx",v).transition().call(M=>this.services.transitions.setupTransition({transition:M,name:"boxplot-update-circles",animate:t})).attr("cy",x),this.addBoxEventListeners(),this.addCircleEventListeners()}addBoxEventListeners(){const t=this,n=this.getOptions(),{groupMapsTo:r}=n.data;this.parent.selectAll("path.highlight-area").on("mouseover",function(i,s){const a=I(this);I(this.parentNode).select("path.box").classed("hovered",!0).attr("fill-opacity",Le.box.opacity.hovered),t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:i,hoveredElement:a,items:[{label:y(n,"locale","translations","group")||y(n,"tooltip","groupLabel")||"Group",value:s[r],class:t.model.getColorClassName({classNameTypes:[st.TOOLTIP]})},{label:"Minimum",value:s.whiskers.min},{label:"Q1",value:s.quartiles.q_25},{label:"Median",value:s.quartiles.q_50},{label:"Q3",value:s.quartiles.q_75},{label:"Maximum",value:s.whiskers.max},{label:"IQR",value:s.quartiles.q_75-s.quartiles.q_25}]}),t.services.events.dispatchEvent(T.Boxplot.BOX_MOUSEOVER,{event:i,element:a,datum:s})}).on("mousemove",function(i,s){const a=I(this);t.services.events.dispatchEvent(T.Boxplot.BOX_MOUSEMOVE,{event:i,element:a,datum:s}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:i})}).on("click",function(i,s){t.services.events.dispatchEvent(T.Boxplot.BOX_CLICK,{event:i,element:I(this),datum:s})}).on("mouseout",function(i,s){const a=I(this);I(this.parentNode).select("path.box").classed("hovered",!1).attr("fill-opacity",Le.box.opacity.default),t.services.events.dispatchEvent(T.Boxplot.BOX_MOUSEOUT,{event:i,element:a,datum:s}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:a})})}addCircleEventListeners(){const t=this,n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("circle").on("mouseover",function(s,a){const o=I(this);o.classed("hovered",!0).attr("fill-opacity",Le.circle.opacity.hovered).classed("unfilled",!1),t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:s,hoveredElement:o,items:[{label:y(n,"locale","translations","group")||y(n,"tooltip","groupLabel")||"Group",value:a[r],class:t.model.getColorClassName({classNameTypes:[st.TOOLTIP]})},{label:"Outlier",value:a[i]}]}),t.services.events.dispatchEvent(T.Boxplot.OUTLIER_MOUSEOVER,{event:s,element:o,datum:a})}).on("mousemove",function(s,a){const o=I(this);t.services.events.dispatchEvent(T.Boxplot.OUTLIER_MOUSEMOVE,{event:s,element:o,datum:a}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:s})}).on("click",function(s,a){t.services.events.dispatchEvent(T.Boxplot.OUTLIER_CLICK,{event:s,element:I(this),datum:a})}).on("mouseout",function(s,a){const o=I(this);o.classed("hovered",!1).attr("fill-opacity",Le.circle.opacity.default),t.services.events.dispatchEvent(T.Boxplot.OUTLIER_MOUSEOUT,{event:s,element:o,datum:a}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:o})})}}class oi extends mt{constructor(){super(...arguments),this.type="zero-line",this.renderType=it.SVG}render(t){const n=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),r=this.services.cartesianScales.getScaleByPosition(n),[i,s]=r.domain(),a=i>0&&s<0||i<0&&s>0,o=this.getComponentContainer({isPresentational:!0});if(!a){o.selectAll("line.domain").remove();return}const[l,c]=this.services.cartesianScales.getDomainScale().range();let u=+r(0)+.5;u||(u=r.range()[0]);const d=Sp({x0:l,x1:c,y0:u,y1:u},this.services.cartesianScales.getOrientation());N.appendOrSelect(o,"line.domain").transition().call(h=>this.services.transitions.setupTransition({transition:h,name:"zero-line-update",animate:t})).attr("y1",d.y0).attr("y2",d.y1).attr("x1",d.x0).attr("x2",d.x1)}}class rD extends cn{constructor(){super(...arguments),this.type="bubble",this.renderType=it.SVG}getRadiusScale(t){const n=this.getOptions(),{radiusMapsTo:r}=n.bubble,i=t.data(),s=i.map(c=>c[r]).filter(c=>c),a=N.getHTMLElementSize(this.services.domUtils.getMainContainer()),o=s.length>0,l=o?Ve(s):[1,1];return Fe().domain(l).range(o?n.bubble.radiusRange(a,i):[4,4])}styleCircles(t,n){const r=this.getOptions(),{radiusMapsTo:i}=r.bubble,s=this.getRadiusScale(t),{groupMapsTo:a}=r.data,{cartesianScales:o}=this.services,l=h=>o.getDomainValue(h),c=h=>o.getRangeValue(h),[u,d]=xn(l,c,o.getOrientation());t.raise().classed("dot",!0).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-label",h=>{const p=o.getRangeIdentifier(h);return h[p]}).transition().call(h=>this.services.transitions.setupTransition({transition:h,name:"bubble-update-enter",animate:n})).attr("cx",u).attr("cy",d).attr("r",h=>s(h[i]||1)).attr("class",h=>this.model.getColorClassName({classNameTypes:[st.FILL,st.STROKE],dataGroupName:h[a],originalClassName:"dot"})).style("fill",h=>{const p=this.services.cartesianScales.getDomainIdentifier(h);return this.model.getFillColor(h[a],h[p],h)}).style("stroke",h=>{const p=this.services.cartesianScales.getDomainIdentifier(h);return this.model.getStrokeColor(h[a],h[p],h)}).attr("fill-opacity",r.bubble.fillOpacity).attr("opacity",1)}getTooltipAdditionalItems(t){const n=y(this.getOptions(),"bubble");return[{label:y(n,"radiusLabel"),value:t[y(n,"radiusMapsTo")]}]}}class iD extends mt{constructor(){super(...arguments),this.type="bullet",this.renderType=it.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({ariaLabel:"bullet graphs",withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),a=this.services.cartesianScales.getRangeScale(),o=this.services.cartesianScales.getRangeIdentifier(),[l,c]=a.range(),[,u]=a.domain(),d=()=>{const g=[];s.forEach(v=>{v.ranges?v.ranges.forEach((x,_)=>{x!=null&&x<u&&g.push({datum:v,value:x,order:_+1})}):g.push({datum:v,order:1})});const m=N.appendOrSelect(i,"g.range-boxes").selectAll("path.range-box").data(g,v=>`${v[r]}-${v.order}`);m.exit().attr("opacity",0).remove(),m.enter().append("path").attr("opacity",0).merge(m).attr("class",v=>`range-box order-${v.order}`).transition().call(v=>this.services.transitions.setupTransition({transition:v,name:"bullet-range-box-update-enter",animate:t})).attr("d",v=>{let x,_,E,b;return v.order===1?(x=this.services.cartesianScales.getDomainValue(v.datum)-16/2,_=x+16,E=c-2,b=l+1):(x=this.services.cartesianScales.getDomainValue(v.datum)-16/2,_=x+16,E=this.services.cartesianScales.getRangeValue(v.value),b=c),se({x0:x,x1:_,y0:E,y1:b},this.services.cartesianScales.getOrientation())}).attr("opacity",1)},h=()=>{const g=N.appendOrSelect(i,"g.bars").selectAll("path.bar").data(s,m=>m[r]);g.exit().attr("opacity",0).remove(),g.enter().append("path").attr("opacity",0).merge(g).classed("bar",!0).transition().call(m=>this.services.transitions.setupTransition({transition:m,name:"bullet-bar-update-enter",animate:t})).attr("class",m=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:m[r],originalClassName:"bar"})).style("fill",m=>{const v=this.services.cartesianScales.getDomainIdentifier(m);return this.model.getFillColor(m[r],m[v],m)}).attr("d",m=>{const v=this.services.cartesianScales.getDomainValue(m)-4,x=v+8,_=this.services.cartesianScales.getRangeValue(0)+1,E=this.services.cartesianScales.getRangeValue(m);return se({x0:v,x1:x,y0:_,y1:E},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",m=>m.value)},p=()=>{const g=N.appendOrSelect(i,"g.markers").selectAll("path.marker").data(s.filter(m=>y(m,"marker")!==null),m=>m[r]);g.exit().attr("opacity",0).remove(),g.enter().append("path").attr("opacity",0).merge(g).classed("marker",!0).transition().call(m=>this.services.transitions.setupTransition({transition:m,name:"bullet-marker-update-enter",animate:t})).attr("d",m=>{const v=this.services.cartesianScales.getDomainValue(m)-12,x=v+24,_=this.services.cartesianScales.getRangeValue(m.marker);return se({x0:v,x1:x,y0:_,y1:_},this.services.cartesianScales.getOrientation())}).attr("opacity",1)},f=()=>{let g=[];s.filter(v=>y(v,"marker")!==null).forEach(v=>{const x=v.marker,_=v[o];g=g.concat([{datum:v,value:x*.25,barValue:_},{datum:v,value:x*.5,barValue:_},{datum:v,value:x*.75,barValue:_}])});const m=N.appendOrSelect(i,"g.quartiles").selectAll("path.quartile").data(g,v=>v[r]);m.exit().attr("opacity",0).remove(),m.enter().append("path").attr("opacity",0).merge(m).attr("class",v=>`quartile ${v.value<=v.barValue?"over-bar":""}`).transition().call(v=>this.services.transitions.setupTransition({transition:v,name:"bullet-quartile-update-enter",animate:t})).attr("d",({datum:v,value:x})=>{let _=4;v.ranges&&v.ranges.indexOf(x)!==-1&&(_=8);const E=this.services.cartesianScales.getDomainValue(v)-_/2,b=E+_,S=this.services.cartesianScales.getRangeValue(x);return se({x0:E,x1:b,y0:S,y1:S},this.services.cartesianScales.getOrientation())}).attr("opacity",1)};d(),h(),p(),f(),this.addEventListeners()}addEventListeners(){const t=this,n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.services.cartesianScales.getRangeIdentifier(),{code:s,number:a}=y(n,"locale");this.parent.selectAll("path.bar").on("mouseover",function(o,l){const c=I(this);c.classed("hovered",!0),t.services.events.dispatchEvent(T.Bar.BAR_MOUSEOVER,{event:o,element:c,datum:l});const u=y(n,"bullet","performanceAreaTitles"),d=t.model.getMatchingRangeIndexForDatapoint(l);t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:o,hoveredElement:c,items:[{label:y(n,"locale","translations","group")||y(n,"tooltip","groupLabel")||"Group",value:l[r],class:t.model.getColorClassName({classNameTypes:[st.TOOLTIP],dataGroupName:l[r]})},{label:"Value",value:l[i]},{label:"Target",value:l.marker},{label:"Percentage",value:`${a(Math.floor(l[i]/l.marker*100),s)}%`},{label:"Performance",value:u[d]}]})}).on("mousemove",function(o,l){t.services.events.dispatchEvent(T.Bar.BAR_MOUSEMOVE,{event:o,element:I(this),datum:l}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:o})}).on("click",function(o,l){t.services.events.dispatchEvent(T.Bar.BAR_CLICK,{event:o,element:I(this),datum:l})}).on("mouseout",function(o,l){const c=I(this);c.classed("hovered",!1),t.services.events.dispatchEvent(T.Bar.BAR_MOUSEOUT,{event:o,element:c,datum:l}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:c})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}function sD(e){return e}function aD(e){if(e==null)return sD;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],a=e.translate[1];return function(o,l){l||(t=n=0);var c=2,u=o.length,d=new Array(u);for(d[0]=(t+=o[0])*r+s,d[1]=(n+=o[1])*i+a;c<u;)d[c]=o[c],++c;return d}}function oD(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function lD(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Vg(e,n)})}:Vg(e,t)}function Vg(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=gu(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function gu(e,t){var n=aD(e.transform),r=e.arcs;function i(u,d){d.length&&d.pop();for(var h=r[u<0?~u:u],p=0,f=h.length;p<f;++p)d.push(n(h[p],p));u<0&&oD(d,f)}function s(u){return n(u)}function a(u){for(var d=[],h=0,p=u.length;h<p;++h)i(u[h],d);return d.length<2&&d.push(d[0]),d}function o(u){for(var d=a(u);d.length<4;)d.push(d[0]);return d}function l(u){return u.map(o)}function c(u){var d=u.type,h;switch(d){case"GeometryCollection":return{type:d,geometries:u.geometries.map(c)};case"Point":h=s(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(s);break;case"LineString":h=a(u.arcs);break;case"MultiLineString":h=u.arcs.map(a);break;case"Polygon":h=l(u.arcs);break;case"MultiPolygon":h=u.arcs.map(l);break;default:return null}return{type:d,coordinates:h}}return c(t)}function cD(e,t){var n={},r={},i={},s=[],a=-1;t.forEach(function(c,u){var d=e.arcs[c<0?~c:c],h;d.length<3&&!d[1][0]&&!d[1][1]&&(h=t[++a],t[a]=c,t[u]=h)}),t.forEach(function(c){var u=o(c),d=u[0],h=u[1],p,f;if(p=i[d])if(delete i[p.end],p.push(c),p.end=h,f=r[h]){delete r[f.start];var g=f===p?p:p.concat(f);r[g.start=p.start]=i[g.end=f.end]=g}else r[p.start]=i[p.end]=p;else if(p=r[h])if(delete r[p.start],p.unshift(c),p.start=d,f=i[d]){delete i[f.end];var m=f===p?p:f.concat(p);r[m.start=f.start]=i[m.end=p.end]=m}else r[p.start]=i[p.end]=p;else p=[c],r[p.start=d]=i[p.end=h]=p});function o(c){var u=e.arcs[c<0?~c:c],d=u[0],h;return e.transform?(h=[0,0],u.forEach(function(p){h[0]+=p[0],h[1]+=p[1]})):h=u[u.length-1],c<0?[h,d]:[d,h]}function l(c,u){for(var d in c){var h=c[d];delete u[h.start],delete h.start,delete h.end,h.forEach(function(p){n[p<0?~p:p]=1}),s.push(h)}}return l(i,r),l(r,i),t.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}function uD(e){for(var t=-1,n=e.length,r,i=e[n-1],s=0;++t<n;)r=i,i=e[t],s+=r[0]*i[1]-r[1]*i[0];return Math.abs(s)}function hD(e){return gu(e,dD.apply(this,arguments))}function dD(e,t){var n={},r=[],i=[];t.forEach(s);function s(l){switch(l.type){case"GeometryCollection":l.geometries.forEach(s);break;case"Polygon":a(l.arcs);break;case"MultiPolygon":l.arcs.forEach(a);break}}function a(l){l.forEach(function(c){c.forEach(function(u){(n[u=u<0?~u:u]||(n[u]=[])).push(l)})}),r.push(l)}function o(l){return uD(gu(e,{type:"Polygon",arcs:[l]}).coordinates[0])}return r.forEach(function(l){if(!l._){var c=[],u=[l];for(l._=1,i.push(c);l=u.pop();)c.push(l),l.forEach(function(d){d.forEach(function(h){n[h<0?~h:h].forEach(function(p){p._||(p._=1,u.push(p))})})})}}),r.forEach(function(l){delete l._}),{type:"MultiPolygon",arcs:i.map(function(l){var c=[],u;if(l.forEach(function(g){g.forEach(function(m){m.forEach(function(v){n[v<0?~v:v].length<2&&c.push(v)})})}),c=cD(e,c),(u=c.length)>1)for(var d=1,h=o(c[0]),p,f;d<u;++d)(p=o(c[d]))>h&&(f=c[0],c[0]=c[d],c[d]=f,h=p);return c}).filter(function(l){return l.length>0})}}class pD extends Gn{constructor(){super(...arguments),this.type="ruler-binned",this.renderType=it.SVG}showRuler(t,[n,r]){const i=this.parent,s=this.model.getOptions(),{cartesianScales:a}=this.services,o=a.getOrientation(),l=a.getRangeScale(),[c,u]=l.range(),d=a.getDomainScale(),h=d.invert(o===zt.VERTICAL?n:r),p=N.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),f=N.appendOrSelect(p,"line.ruler-line"),g=i.selectAll("[role=graphics-symbol]").filter(m=>{if(parseFloat(vt(m,"data.x0"))<=h&&parseFloat(vt(m,"data.x1"))>=h)return!0});if(g.size()>0){this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!Kf(this.elementsToHighlight,g)&&this.hideRuler(),g.dispatch("mouseover"),this.elementsToHighlight=g;const m=I(g.nodes()[0]).datum(),v=parseFloat(vt(m,"data.x0")),x=parseFloat(vt(m,"data.x1")),_=this.model.getActiveDataGroupNames(),E=_.reverse().map(b=>({label:b,value:vt(m,`data.${b}`),class:this.model.getColorClassName({classNameTypes:[st.TOOLTIP],dataGroupName:b})})).filter(b=>b.value!==0);if(E.length>0){this.services.events.dispatchEvent(T.Tooltip.SHOW,{event:t,mousePosition:[n,r],hoveredElement:f,items:[{label:vt(s,"bins.rangeLabel")||"Range",value:`${v}  ${x}`},...E,...y(s,"tooltip","showTotal")===!0?[{label:vt(s,"tooltip.totalLabel")||vt(s,"locale.translations.total")||"Total",value:(()=>{const S=y(s,"tooltip","customTotalCalculation");if(S){const $=_.map(k=>({[k]:parseFloat(vt(m,`data.${k}`))}));return S($)}else return _.reduce(($,k)=>$+parseFloat(vt(m,`data.${k}`)),0)})()}]:[]]}),p.attr("opacity",1);const b=d((v+x)/2);o==="horizontal"?f.attr("x1",u).attr("x2",c).attr("y1",b).attr("y2",b):f.attr("y1",u).attr("y2",c).attr("x1",b).attr("x2",b)}else this.hideRuler()}else this.hideRuler()}}class co extends Gn{formatTooltipData(t){return t.reverse()}}const fD=(e,t)=>{const n=e.x,r=e.y,i=t.x,s=t.y,a=cm();return a.moveTo(n,r),a.lineTo(i,s),a.toString()},mD={d:"M7 0v8L0 4z"},gD={d:"M0 0v8l7-4z"},vD={d:"M5.32 9.513a4.75 4.75 0 100-9.5 4.75 4.75 0 000 9.5z"},yD={d:"M5.03517654-1e-7l4.99999996 5-4.99999996 5-5-5L2.4517844 2.58339204z"},bD={d:"M0 .44974747h8v8H0v-3.6830331z"},xD={d:"M0 0h1.5v8H0z"};class Gg extends cu{constructor(t,n,r){super(t,n,r),this.type="color-legend",this.renderType=it.SVG,this.gradient_id=`gradient-id-${Math.floor(Math.random()*99999999999)}`,this.handleAxisCompleteEvent=()=>{const i=this.getComponentContainer(),{width:s}=N.getSVGElementSize(i,{useAttrs:!0}),a=y(this.getOptions(),"data","loading");if(s>Nt.color.barWidth&&!a){const o=y(this.getOptions(),"heatmap","colorLegend","title"),{cartesianScales:l}=this.services,c=l.getMainXScale().range();if(c[0]>1&&(i.select("g.legend").attr("transform",`translate(${c[0]}, 0)`),o)){const{width:u}=N.getSVGElementSize(i.select("g.legend-title").select("text"),{useBBox:!0}),d=c[0]-u-9;d>1?i.select("g.legend-title").attr("transform",`translate(${d}, 0)`):(i.select("g.legend").attr("transform",`translate(${c[0]}, 16)`),i.select("g.legend-title").attr("transform",`translate(${c[0]}, 0)`))}}else i.select("g.legend-title").attr("transform","translate(0, 0)")},this.chartType=r.chartType}init(){this.chartType==="heatmap"&&this.services.events.addEventListener(T.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}render(t=!1){const n=this.getOptions(),r=this.getComponentContainer({ariaLabel:"legend"}),{width:i}=N.getSVGElementSize(r,{useAttrs:!0}),s=y(n,"color","gradient","colors"),a=y(n,this.chartType,"colorLegend","type");let o=y(n,"color","pairing","option");const l=y(n,"heatmap","colorLegend","title");if(y(this.getOptions(),"data","loading")){r.html("");return}const c=!He(s),u=Pp(this.model.getDisplayData()),d=!(i<=Nt.color.barWidth),h=d?Nt.color.barWidth:i,p=N.appendOrSelect(r,"g.legend"),f=N.appendOrSelect(p,"g.legend-axis");if(l){const C=N.appendOrSelect(r,"g.legend-title");N.appendOrSelect(C,"text").text(l).attr("dy","0.7em"),p.attr("transform","translate(0, 16)")}const g=u[0]<0&&u[1]>0?"diverge":"mono";(o<1&&o>4&&g==="mono"||o<1&&o>2&&g==="diverge")&&(o=1);let m=[];const v=g==="diverge"?17:11;if(c)m=s;else for(let C=1;C<v+1;C++)m.push(a===vi.LINEAR?`stop-color-${g}-${o}-${C}`:`fill-${g}-${o}-${C}`);const x=be(u[0],u[1]),_=PC(x,3),E=Fe().domain(u).range([0,h]),b=fc(E).tickSize(0).tickValues(_),{code:S,number:$}=y(n,"locale");b.tickFormat(C=>$(C,S));let k;switch(a){case vi.LINEAR:this.drawLinear(m,p,h);break;case vi.QUANTIZE:k=this.drawQuantize(m,g,c,p,h),E.range([k,h]);break;default:throw Error("Entered color legend type is not supported.")}f.attr("transform",`translate(0,${Nt.color.axisYTranslation})`).call(b),f.select(".domain").remove(),f.select("g.tick:last-of-type text").style("text-anchor",d?"middle":"end"),f.select("g.tick:first-of-type text").style("text-anchor",d&&this.chartType!=="choropleth"?"middle":"start")}drawLinear(t,n,r){const i=100/(t.length-1);N.appendOrSelect(n,"linearGradient").attr("id",`${this.gradient_id}-legend`).selectAll("stop").data(t).enter().append("stop").attr("offset",(s,a)=>`${a*i}%`).attr("class",(s,a)=>t[a]).attr("stop-color",s=>s),N.appendOrSelect(n,"rect").attr("width",r).attr("height",Nt.color.barHeight).style("fill",`url(#${this.gradient_id}-legend)`)}drawQuantize(t,n,r,i,s){!r&&n==="diverge"&&t.splice(t.length/2,1);const a=Fr().domain(t).range([0,s]);return N.appendOrSelect(i,"g.quantized-rect").selectAll("rect").data(a.domain()).join("rect").attr("x",o=>a(o)).attr("y",0).attr("width",Math.max(0,a.bandwidth()-1)).attr("height",Nt.color.barHeight).attr("class",o=>o).attr("fill",o=>o),(!r&&n)==="mono"?a.bandwidth()-1:0}destroy(){this.chartType==="heatmap"&&this.services.events.removeEventListener(T.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}}class _D extends Os{constructor(){super(...arguments),this.type="meter-title",this.renderType=it.SVG}render(t=!1){const n=y(this.model.getDisplayData(),0),r=this.getOptions(),i=this.getComponentContainer({ariaLabel:"meter title"}),{groupMapsTo:s}=r.data,a=r.locale.translations.meter.title;if(y(r,"meter","proportional"))this.displayTotal(),this.displayBreakdownTitle();else{const c=i.selectAll("text.meter-title").data(a?[a]:[n[s]]);c.enter().append("text").classed("meter-title",!0).merge(c).attr("x",0).attr("y","1em").text(u=>u),c.exit().remove(),this.appendPercentage()}this.displayStatus();const o=this.getMaxTitleWidth(),l=N.appendOrSelect(i,"text.meter-title");o>0&&l.node().getComputedTextLength()>o&&this.truncateTitle(l,o)}displayBreakdownTitle(){const t=this.getComponentContainer(),n=this.getOptions(),r=this.model.getMaximumDomain(this.model.getDisplayData()),i=y(n,"meter","proportional","total"),s=y(n,"meter","proportional","unit")?y(n,"meter","proportional","unit"):"";let a;if(r===i)a=null;else{const u=i!==null?i-r:r,d=y(n,"meter","proportional","breakdownFormatter"),{code:h,number:p}=y(n,"locale");a=d!==null?d({datasetsTotal:r,total:i}):`${p(r,h)} ${s} used (${p(u,h)} ${s} available)`}const o=t.selectAll("text.proportional-meter-title").data([a]);o.enter().append("text").classed("proportional-meter-title",!0).merge(o).attr("x",0).attr("y","1em").text(u=>u),o.exit().remove();const l=this.getMaxTitleWidth(),c=N.appendOrSelect(t,"text.proportional-meter-title");l>0&&c.node().getComputedTextLength()>l&&this.truncateTitle(c,l)}displayTotal(){const t=this.getComponentContainer(),n=this.getOptions(),r=y(n,"meter","proportional","total"),i=r?y(n,"meter","proportional","total"):this.model.getMaximumDomain(this.model.getDisplayData()),s=y(n,"meter","proportional","unit")?y(n,"meter","proportional","unit"):"",a=y(n,"meter","proportional","totalFormatter"),{code:o,number:l}=y(n,"locale"),c=a!==null?a(i):`${l(r,o)} ${s} total`,u=N.getHTMLElementSize(this.parent.node()).width,d=t.selectAll("text.proportional-meter-total").data([c]);d.enter().append("text").classed("proportional-meter-total",!0).merge(d).attr("x",this.model.getStatus()&&typeof u!="string"?u-Kt.total.paddingRight:u).attr("y","1em").attr("text-anchor","end").text(h=>h),d.exit().remove()}displayStatus(){const t=this,n=this.getComponentContainer(),r=N.getHTMLElementSize(this.parent.node()).width||0,i=this.model.getStatus(),s=Kt.status.indicatorSize/2,a=N.appendOrSelect(n,"g.status-indicator").attr("class",i!==null?`status-indicator status--${i}`:"").attr("transform",`translate(${r-s}, 0)`),o=i?[i]:[],l=a.selectAll("circle.status").data(o);l.enter().append("circle").merge(l).attr("class","status").attr("r",s).attr("cx",0).attr("cy",8);const c=a.selectAll("path.innerFill").data(o);c.enter().append("path").merge(c).attr("d",t.getStatusIconPathString(i)).attr("transform",`translate(-${s}, 0)`).attr("class","innerFill"),c.exit().remove(),l.exit().remove()}appendPercentage(){const t=y(this.model.getDisplayData(),0,"value"),{code:n,number:r}=y(this.getOptions(),"locale"),i=this.getComponentContainer(),s=N.appendOrSelect(i,"text.meter-title"),a=y(this.getOptions(),"meter","statusBar","percentageIndicator","enabled")===!0?[t]:[],o=i.selectAll("text.percent-value").data(a),l=Kt.statusBar.paddingRight;o.enter().append("text").classed("percent-value",!0).merge(o).text(c=>`${c!=null?r(c,n):0}%`).attr("x",+s.attr("x")+s.node().getComputedTextLength()+l).attr("y",s.attr("y")),o.exit().remove()}truncateTitle(t,n){super.truncateTitle(t,n);const r=N.appendOrSelect(this.parent,"tspan"),i=Kt.statusBar.paddingRight,s=Math.ceil(r.node().getComputedTextLength());N.appendOrSelect(this.parent,"text.percent-value").attr("x",+t.attr("x")+t.node().getComputedTextLength()+s+i)}getMaxTitleWidth(){const t=y(this.getOptions(),"meter","proportional"),n=N.getHTMLElementSize(this.parent.node()).width;if(t!==null){const r=N.appendOrSelect(this.parent,"text.proportional-meter-total").node(),i=N.getSVGElementSize(r,{useBBox:!0}).width;return n-i-Kt.total.paddingLeft}else{const r=N.appendOrSelect(this.parent,"text.percent-value"),i=Kt.statusBar.paddingRight,s=r.node().getComputedTextLength(),a=N.appendOrSelect(this.parent,"g.status-indicator").node(),o=N.getSVGElementSize(a,{useBBox:!0}).width+Kt.status.paddingLeft;return n-s-i-o}}getStatusIconPathString(t){switch(t){case mi.SUCCESS:return"M6.875 11.3125 3.75 8.1875 4.74375 7.25 6.875 9.34375 11.50625 4.75 12.5 5.7375 Z";case mi.DANGER:return"M10.7 11.5 4.5 5.3 5.3 4.5 11.5 10.7 Z";case mi.WARNING:return"M7.9375,11.125 C7.41973305,11.125 7,11.544733 7,12.0625 C7,12.580267 7.41973305,13 7.9375,13 C8.45526695,13 8.875,12.580267 8.875,12.0625 C8.875,11.544733 8.45526695,11.125 7.9375,11.125 M7.3125, 3 8.5625, 3 8.5625, 9.875 7.3125, 9.875, 7.3125, 3 Z"}}}class vu extends mt{getBarWidth(){const t=this.getOptions();if(t.bars.width)return t.bars.width;const n=this.model.getDisplayData().length,r=this.services.cartesianScales.getMainXScale(),i=N.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!r.step){const s=y(t,"bars","spacingFactor");return Math.min(t.bars.maxWidth,i*s/n)}return Math.min(t.bars.maxWidth,r.step()/2)}isOutsideZoomedDomain(t,n){if(this.model.getDisplayData().length<=1)return!1;const r=this.model.get("zoomDomain");if(r!==void 0){const i=this.services.cartesianScales.getDomainScale();return t<i(r[0])||n>i(r[1])}return!1}}class ED extends mt{constructor(){super(...arguments),this.type="circle-pack",this.renderType=it.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail;this.parent.selectAll("circle.node").transition("legend-hover-circlepack").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-circlepack"})).attr("opacity",r=>r.data.dataGroupName===n.datum().name?1:Hr.circles.fillOpacity)},this.handleLegendMouseOut=()=>{this.parent.selectAll("circle.node").transition("legend-mouseout-circlepack").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-circlepack"})).attr("opacity",1)}}render(t=!0){const n=this.getComponentContainer({ariaLabel:"circle packs",withinChartClip:!0}),{width:r,height:i}=N.getSVGElementSize(this.parent,{useAttrs:!0});if(r<1||i<1)return;let s=this.model.getDisplayData();const a=this.model.hasParentNode(),o=this.model.getHierarchyLevel(),l=this.getOptions(),c=y(l,"canvasZoom","enabled");a&&y(s,0,"children")&&(s=y(s,0,"children"));const u=ps({children:s}).sum(f=>f.value).sort((f,g)=>g.value-f.value),d=CL().size([r,i]).padding(f=>f.depth>=1?Hr.padding.children+3:Hr.padding.mainGroup+3)(u).descendants().splice(1).filter(f=>f.depth<=o),h=n.selectAll("circle.node").data(d);h.exit().attr("width",0).attr("height",0).remove();const p=h.enter().append("circle").classed("node",!0);p.merge(h).attr("class",f=>{const g=c&&o===3?this.getZoomClass(f):"";return this.model.getColorClassName({classNameTypes:[st.FILL,st.STROKE],dataGroupName:f.data.dataGroupName,originalClassName:f.children?`node ${g}`:`node node-leaf ${g}`})}).style("fill",f=>this.model.getFillColor(f.data.dataGroupName,null,f.data)).style("stroke",f=>this.model.getFillColor(f.data.dataGroupName,null,f.data)).attr("cx",f=>f.x).attr("cy",f=>f.y).transition("circlepack-leaf-update-enter").call(f=>this.services.transitions.setupTransition({transition:f,name:"circlepack-leaf-update-enter"})).attr("r",f=>f.r).attr("opacity",1).attr("fill-opacity",Hr.circles.fillOpacity),c===!0&&this.focal&&(this.services.canvasZoom.zoomIn(this.focal,p,Br),this.setBackgroundListeners()),a||this.addLegendListeners(),this.addEventListeners()}unhighlightChildren(t){const n=t.map(r=>r.data);this.parent.selectAll("circle.node").filter(r=>n.some(i=>i===r.data)&&r.depth>1).style("stroke",r=>this.model.getFillColor(r.data.dataGroupName,null,r.data))}highlightChildren(t){const n=t.map(r=>r.data);this.parent.selectAll("circle.node").filter(r=>n.some(i=>i===r.data)&&r.depth>1).style("stroke",Hr.circles.hover.stroke)}getZoomClass(t){return this.model.getHierarchyLevel()===3&&this.focal&&(t.data===this.focal.data||this.focal.children.some(n=>n.data===t.data))?"focal":"non-focal"}addLegendListeners(){const{events:t}=this.services;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}removeBackgroundListeners(){I(this.services.domUtils.getMainContainer()).on("click",()=>null)}setBackgroundListeners(){const t=I(this.services.domUtils.getMainContainer()),n=this,r=this.parent.selectAll("circle.node");t.on("click",()=>{n.focal=null,n.model.updateHierarchyLevel(2),t.classed("zoomed-in",!1),n.services.canvasZoom.zoomOut(r,Br)})}getZoomIcon(){return`
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10">
			<polygon points="5.93 3.71 4.45 3.71 4.45 2.23 3.71 2.23 3.71 3.71 2.23 3.71 2.23 4.45 3.71 4.45 3.71 5.93 4.45 5.93 4.45 4.45 5.93 4.45 5.93 3.71"/>
			<path d="M7.2,6.67a4,4,0,0,0,1-2.59A4.08,4.08,0,1,0,4.07,8.15h0a4,4,0,0,0,2.59-1L9.48,10,10,9.48Zm-3.12.77A3.34,3.34,0,1,1,7.41,4.08,3.34,3.34,0,0,1,4.08,7.44Z"/>
		</svg>`}addEventListeners(){const t=this;this.parent.selectAll("circle.node").on("mouseover",function(n,r){const i=I(this);i.classed("hovered",!0);const s=t.model.getHierarchyLevel(),a=s>2&&!i.classed("focal"),o=y(t.model.getOptions(),"canvasZoom","enabled");let l=!1;if(!a){let c=[],u=[],d=null;if(r.children){r.depth>1&&o&&(l=!0,i.classed("clickable",!0)),c=r.children.map(f=>{if(f!==null)return typeof f.data.value=="number"?{label:f.data.name,value:f.data.value}:{label:f.data.name,labelIcon:o&&s<=2?t.getZoomIcon():null,value:f.value}});const p=t.model.getOptions();u=[{label:vt(p,"locale.translations.total")||vt(p,"tooltip.totalLabel")||"Total",value:r.value,bold:!0}],t.highlightChildren(r.children)}else d=r.value;const h=getComputedStyle(this,null).getPropertyValue("fill");t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{color:h,label:r.data.name,labelIcon:l&&o&&s<=2?t.getZoomIcon():null,value:d},...c,...u]})}t.services.events.dispatchEvent(T.CirclePack.CIRCLE_MOUSEOVER,{event:n,element:i,datum:r})}).on("mousemove",function(n,r){const i=I(this);t.services.events.dispatchEvent(T.CirclePack.CIRCLE_MOUSEMOVE,{event:n,element:i,datum:r}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:n})}).on("mouseout",function(n,r){const i=I(this);i.classed("hovered",!1),r.children&&t.unhighlightChildren(r.children),t.services.events.dispatchEvent(T.CirclePack.CIRCLE_MOUSEOUT,{event:n,element:i,datum:r}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:i})}).on("click",function(n,r){const i=I(this),s=i.classed("non-focal"),a=y(t.model.getOptions(),"canvasZoom","enabled");if(a&&t.model.getHierarchyLevel()>2){const o=t.parent.selectAll("circle.node");I(t.services.domUtils.getMainContainer()).classed("zoomed-in",!1),t.focal=null,t.model.updateHierarchyLevel(2),t.services.canvasZoom.zoomOut(o,Br)}else if(r.depth===2&&r.children&&!s&&a){const o=t.parent.selectAll("circle.node");I(t.services.domUtils.getMainContainer()).classed("zoomed-in",!0),t.focal=r,t.model.updateHierarchyLevel(3),t.services.canvasZoom.zoomIn(r,o,Br),n.stopPropagation()}t.services.events.dispatchEvent(T.CirclePack.CIRCLE_CLICK,{event:n,element:i,datum:r})})}destroy(){this.parent.selectAll("circle.node").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null);const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),this.removeBackgroundListeners()}}function OD(e,t){const n=Ui(this._current,e);return r=>(this._current=n(r),t(this._current))}class zg extends mt{constructor(){super(...arguments),this.type="pie",this.renderType=it.SVG,this.isRendering=!1,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.slice").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i.data[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.slice").transition("legend-mouseout-bar").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getInnerRadius(){return Lt.innerRadius}render(t=!0){const n=this,r=this.getComponentContainer({ariaLabel:"pie graph"}),i=this.getOptions(),{groupMapsTo:s}=i.data,{valueMapsTo:a}=i.pie;this.isRendering=!0;const o=this.model.getDisplayData().filter(C=>C[a]>0),l=this.computeRadius();this.arc=gs().innerRadius(this.getInnerRadius()).outerRadius(l),this.hoverArc=gs().innerRadius(this.getInnerRadius()).outerRadius(l+Lt.hoverArc.outerRadiusOffset);const c=KL().value(C=>C[a]).sort(y(i,"pie","sortFunction")).padAngle(Lt.padAngle)(o),u=N.appendOrSelect(r,"g.slices").attr("role",ht.GROUP).attr("data-name","slices").selectAll("path.slice").data(c,C=>C.data[s]);u.exit().attr("opacity",0).remove(),u.enter().append("path").classed("slice",!0).attr("opacity",0).merge(u).attr("class",C=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:C.data[s],originalClassName:"slice"})).style("fill",C=>n.model.getFillColor(C.data[s],null,C.data)).attr("d",this.arc).transition().call(C=>this.services.transitions.setupTransition({transition:C,name:"pie_slice_enter_update",animate:t})).attr("opacity",1).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","slice").attr("aria-label",C=>[C[a],Hl(C.data[a],o,a)+"%",C.data[s]].filter(Boolean).join(", ")).attrTween("d",function(C){return OD.bind(this)(C,n.arc)}).on("end",()=>{n.isRendering=!1});const{code:d,number:h}=y(i,"locale"),p=i.pie.labels.enabled,f=p?c.filter(C=>C.data[a]>0):[],g=N.appendOrSelect(r,"g.labels").attr("role",ht.GROUP).attr("data-name","labels").selectAll("text.pie-label").data(f,C=>C.data[s]);g.exit().attr("opacity",0).remove();const m=g.enter().append("text").classed("pie-label",!0),v=[];m.merge(g).style("text-anchor","middle").text(C=>i.pie.labels.formatter?i.pie.labels.formatter({...C,percentageValue:Hl(C.data[a],o,a,!0)}):h(Hl(C.data[a],o,a),d)+"%").datum(function(C){const R=l+7,M=(C.endAngle-C.startAngle)/2+C.startAngle,H=M/Math.PI*180,P=this.getComputedTextLength();return C.textOffsetX=P/2,C.textOffsetY=H>90&&H<270?10:0,C.xPosition=(C.textOffsetX+R)*Math.sin(M),C.yPosition=(C.textOffsetY+R)*-Math.cos(M),C}).attr("transform",function(C,R){const M=f.length,H=(C.endAngle-C.startAngle)*(180/Math.PI);if(R>=M-2&&H<Lt.callout.minSliceDegree){let P,B;return C.index===M-1?(P=C.xPosition+Lt.callout.offsetX+Lt.callout.textMargin+C.textOffsetX,B=C.yPosition-Lt.callout.offsetY,C.direction=fi.RIGHT,v.push(C)):(P=C.xPosition-Lt.callout.offsetX-C.textOffsetX-Lt.callout.textMargin,B=C.yPosition-Lt.callout.offsetY,C.direction=fi.LEFT,v.push(C)),`translate(${P}, ${B})`}return`translate(${C.xPosition}, ${C.yPosition})`}),this.renderCallouts(v);const x=y(i,"donut")?"donut":"pie",_=y(i,x,"alignment"),{width:E}=N.getSVGElementSize(this.getParent(),{useAttrs:!0}),b=p?Lt.xOffset:0,S=p?Lt.yOffset:0;let $=l+b;_===Ft.CENTER?$=E/2:_===Ft.RIGHT&&($=E-l-Lt.xOffset);let k=l+S;v.length>0&&(k+=Lt.yOffsetCallout),r.attr("x",$+7).attr("y",k),this.addEventListeners()}renderCallouts(t){const n=N.appendOrSelect(this.getComponentContainer(),"g.callouts").attr("role",ht.GROUP).attr("data-name","callouts"),r=n.selectAll("g.callout").data(t);r.exit().remove();const i=r.enter().append("g").classed("callout",!0).attr("role",ht.GROUP).attr("aria-roledescription","label callout");i.merge(r).datum(function(s){const{xPosition:a,yPosition:o,direction:l}=s;return l===fi.RIGHT?(s.startPos={x:a,y:o+s.textOffsetY},s.endPos={x:a+Lt.callout.offsetX,y:o-Lt.callout.offsetY+s.textOffsetY},s.intersectPointX=s.endPos.x-Lt.callout.horizontalLineLength):(s.startPos={x:a,y:o+s.textOffsetY},s.endPos={x:a-Lt.callout.offsetX,y:o-Lt.callout.offsetY+s.textOffsetY},s.intersectPointX=s.endPos.x+Lt.callout.horizontalLineLength),s}),i.append("line").classed("vertical-line",!0).merge(n.selectAll("line.vertical-line")).datum(function(){return I(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",s=>s.startPos.x).attr("y1",s=>s.startPos.y).attr("x2",s=>s.intersectPointX).attr("y2",s=>s.endPos.y),i.append("line").classed("horizontal-line",!0).merge(n.selectAll("line.horizontal-line")).datum(function(){return I(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",s=>s.intersectPointX).attr("y1",s=>s.endPos.y).attr("x2",s=>s.endPos.x).attr("y2",s=>s.endPos.y)}addEventListeners(){const t=this;this.parent.selectAll("path.slice").on("mouseover",function(n,r){const i=I(this);t.isRendering||i.classed("hovered",!0).transition("pie_slice_mouseover").call(o=>t.services.transitions.setupTransition({transition:o,name:"pie_slice_mouseover"})).attr("d",t.hoverArc),t.services.events.dispatchEvent(T.Pie.SLICE_MOUSEOVER,{event:n,element:I(this),datum:r});const{groupMapsTo:s}=t.getOptions().data,{valueMapsTo:a}=t.getOptions().pie;t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{label:r.data[s],value:r.data[a]}]})}).on("mousemove",function(n,r){const i=I(this);t.services.events.dispatchEvent(T.Pie.SLICE_MOUSEMOVE,{event:n,element:i,datum:r}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:n})}).on("click",function(n,r){t.services.events.dispatchEvent(T.Pie.SLICE_CLICK,{event:n,element:I(this),datum:r})}).on("mouseout",function(n,r){const i=I(this);bC(()=>{t.isRendering||i.classed("hovered",!1).transition("pie_slice_mouseout").call(s=>t.services.transitions.setupTransition({transition:s,name:"pie_slice_mouseout"})).attr("d",t.arc)},100),t.services.events.dispatchEvent(T.Pie.SLICE_MOUSEOUT,{event:n,element:i,datum:r}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:i})})}computeRadius(){const{width:t,height:n}=N.getSVGElementSize(this.parent,{useAttrs:!0}),r=this.getOptions(),i=Math.min(t,n)/2;return r.pie.labels.enabled?i+Lt.radiusOffset:i}}class SD extends zg{constructor(){super(...arguments),this.type="donut",this.renderType=it.SVG}render(t=!0){super.render(t);const n=this;if(this.model.isDataEmpty()){this.getComponentContainer({ariaLabel:"donut graph"}).select("g.center").remove();return}const r=N.appendOrSelect(this.getComponentContainer({ariaLabel:"donut graph"}),"g.center"),i=this.getOptions(),s=this.computeRadius(),a=y(i,"donut","center","label");N.appendOrSelect(r,"text.donut-figure").attr("text-anchor","middle").style("dominant-baseline",()=>a===null||a===""?"central":"initial").style("font-size",()=>i.donut.center.numberFontSize(s)).transition().call(o=>this.services.transitions.setupTransition({transition:o,name:"donut-figure-enter-update",animate:t})).tween("text",function(){return n.centerNumberTween(I(this))}),a!==null&&a!==""&&N.appendOrSelect(r,"text.donut-title").attr("text-anchor","middle").style("font-size",()=>i.donut.center.titleFontSize(s)).attr("y",i.donut.center.titleYPosition(s)).text(a)}getInnerRadius(){return this.computeRadius()*(3/4)}centerNumberTween(t){const n=this.getOptions();let r=y(n,"donut","center","number");r===null&&(r=this.model.getDisplayData().reduce((o,l)=>o+l[n.pie.valueMapsTo],0));const i=parseInt(t.text().replace(/[, ]+/g,""),10)||0;let s;i%1===0&&r%1===0?s=Id:s=be;const a=s(i,r);return o=>{const{numberFormatter:l}=n.donut.center;if(l)t.text(l(a(o)));else{const{code:c,number:u}=y(n,"locale");t.text(u(Math.floor(a(o)),c))}}}}const Fg="4,10 8,6 12,10",jg="12,6 8,10 4,6";class TD extends mt{constructor(){super(...arguments),this.type="gauge",this.renderType=it.SVG}getValue(){return this.model.getData().find(t=>t.group==="value")?.value??null}getValueRatio(){return Zf(this.getValue(),0,100)/100}getDelta(){return this.model.getData().find(t=>t.group==="delta")?.value??null}getArcRatio(){const t=this.getOptions();return y(t,"gauge","type")===Wn.FULL?1:.5}getArcSize(){return this.getArcRatio()*Math.PI*2}getStartAngle(){const t=this.getArcSize();return t===2*Math.PI?0:-t/2}getArrow(t){const n=this.getOptions();switch(y(n,"gauge","deltaArrow","direction")){case Cs.UP:return Fg;case Cs.DOWN:return jg;default:return t>0?Fg:jg}}render(t=!0){const n=this.getComponentContainer({ariaLabel:"gauge graph"}).attr("width","100%").attr("height","100%"),r=this.getOptions(),i=this.getValue(),s=this.getValueRatio(),a=this.getArcSize(),o=this.getStartAngle(),l=s*a,c=o+l,u=o+a,d=this.computeRadius(),h=this.getInnerRadius();this.backgroundArc=gs().innerRadius(h).outerRadius(d).startAngle(c).endAngle(u),this.arc=gs().innerRadius(h).outerRadius(d).startAngle(o).endAngle(c),N.appendOrSelect(n,"path.arc-background").attr("d",this.backgroundArc);const p=n.selectAll("path.arc-foreground").data([i]);p.enter().append("path").merge(p).attr("class",this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:"value",originalClassName:"arc-foreground"})).style("fill",()=>y(this.getOptions(),"color","scale","value")).attr("d",this.arc).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",v=>v),this.drawValueNumber(),this.drawDelta(),p.exit().remove();const f=y(r,"gauge","alignment"),{width:g}=N.getSVGElementSize(this.getParent(),{useAttrs:!0});let m=d;f===Ft.CENTER?m=g/2:f===Ft.RIGHT&&(m=g-d),n.attr("x",m).attr("y",d),this.addEventListeners()}drawValueNumber(){const t=this.getComponentContainer(),n=this.getOptions(),r=y(n,"gauge","type"),i=this.getValue(),s=this.getDelta(),a=this.computeRadius(),o=y(n,"gauge","valueFontSize"),l=y(n,"gauge","deltaFontSize"),c=y(n,"gauge","numberSpacing"),u=y(n,"gauge","showPercentageSymbol");let d=0;r===Wn.FULL&&!s?d=l(a):r===Wn.SEMI&&s&&(d=-(l(a)+c));const h=N.appendOrSelect(t,"g.gauge-numbers").attr("transform",`translate(0, ${d})`),p=o(a),f=N.appendOrSelect(h,"g.gauge-value-number"),{code:g,number:m}=y(n,"locale"),v=y(n,"gauge","numberFormatter"),x=f.selectAll("text.gauge-value-number").data([i]);x.enter().append("text").attr("class","gauge-value-number").merge(x).style("font-size",`${p}px`).attr("text-anchor","middle").text(C=>{let R;return C!=null?R=Number(C.toFixed(2))%1!==0?C.toFixed(2):C.toFixed():R=0,v?v(R):m(Number(R),g)});const{width:_}=N.getSVGElementSize(N.appendOrSelect(t,"text.gauge-value-number"),{useBBox:!0}),E=p/2,b=u?"%":"",S=N.appendOrSelect(f,"text.gauge-value-symbol").style("font-size",`${E}px`).attr("x",_/2).text(b),{width:$,height:k}=N.getSVGElementSize(S,{useBBox:!0});S.attr("y",`-${k/2}px`),f.attr("transform",`translate(-${$/2}, 0)`)}drawDelta(){const t=this,n=this.getComponentContainer(),r=this.getOptions(),i=this.getDelta(),{code:s,number:a}=y(r,"locale");if(i){const o=this.computeRadius(),l=i?y(r,"gauge","deltaFontSize"):()=>0,c=i?y(r,"gauge","numberFormatter"):()=>null,u=y(r,"gauge","deltaArrow","size"),d=y(r,"gauge","numberSpacing"),h=y(r,"gauge","showPercentageSymbol"),p=N.appendOrSelect(n,"g.gauge-numbers"),f=N.appendOrSelect(p,"g.gauge-delta").attr("transform",`translate(0, ${l(o)+d})`),g=N.appendOrSelect(f,"text.gauge-delta-number"),m=h?"%":"";g.data(i===null?[]:[i]),g.enter().append("text").classed("gauge-delta-number",!0).merge(g).attr("text-anchor","middle").style("font-size",`${l(o)}px`).text(E=>{let b;return E!=null?b=Number(E.toFixed(2))%1!==0?E.toFixed(2):E.toFixed():b=0,c?`${c(b)}${m}`:`${a(Number(b),s)}${m}`});const{width:v}=N.getSVGElementSize(N.appendOrSelect(n,".gauge-delta-number"),{useBBox:!0}),x=y(r,"gauge","deltaArrow","enabled"),_=f.selectAll("svg.gauge-delta-arrow").data(i!==null&&x?[i]:[]);_.enter().append("svg").merge(_).attr("class","gauge-delta-arrow").attr("x",-u(o)-v/2).attr("y",-u(o)/2-l(o)*.35).attr("width",u(o)).attr("height",u(o)).attr("viewBox","0 0 16 16").each(function(){const E=I(this);N.appendOrSelect(E,"rect.gauge-delta-arrow-backdrop").attr("width","16").attr("height","16").attr("fill","none");const b=y(r,"gauge","status");N.appendOrSelect(E,"polygon.gauge-delta-arrow").attr("class",b!==null?`gauge-delta-arrow status--${b}`:"").attr("points",t.getArrow(i))}),_.exit().remove(),g.exit().remove()}else{const o=n.select("g.gauge-delta");o.empty()||o.remove()}}getInnerRadius(){const t=this.computeRadius(),n=y(this.getOptions(),"gauge","arcWidth");return t-n}addEventListeners(){const t=this;this.parent.selectAll("path.arc-foreground").on("mouseover",function(n,r){t.services.events.dispatchEvent(T.Gauge.ARC_MOUSEOVER,{event:n,element:I(this),datum:r})}).on("mousemove",function(n,r){const i=I(this);t.services.events.dispatchEvent(T.Gauge.ARC_MOUSEMOVE,{event:n,element:i,datum:r})}).on("click",function(n,r){t.services.events.dispatchEvent(T.Gauge.ARC_CLICK,{event:n,element:I(this),datum:r})}).on("mouseout",function(n,r){const i=I(this);t.services.events.dispatchEvent(T.Gauge.ARC_MOUSEOUT,{event:n,element:i,datum:r})})}computeRadius(){const t=this.getOptions(),n=y(t,"gauge","type"),{width:r,height:i}=N.getSVGElementSize(this.parent,{useAttrs:!0});return n===Wn.SEMI?Math.min(r/2,i):Math.min(r/2,i/2)}}class Wg extends vu{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=it.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const n=this.model.getDisplayData(this.configs.groups),r=this.getOptions(),{groupMapsTo:i}=r.data;this.setGroupScale();const s=this.getComponentContainer({ariaLabel:"grouped bar graphs",withinChartClip:!0}),a=Di(n.map(u=>{const d=this.services.cartesianScales.getDomainIdentifier(u);return u[d]&&typeof u[d].toString=="function"?u[d].toString():u[d]})),o=s.selectAll("g.bars").data(a,u=>u);o.exit().attr("opacity",0).remove();const l=o.enter().append("g").classed("bars",!0).attr("role",ht.GROUP).attr("data-name","bars").merge(o);l.transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-group-update-enter",animate:t})).attr("transform",u=>{const d=this.services.cartesianScales.getDomainValue(u)-this.getGroupWidth(u)/2;return this.services.cartesianScales.getOrientation()===zt.VERTICAL?`translate(${d}, 0)`:`translate(0, ${d})`});const c=l.selectAll("path.bar").data(u=>this.getDataCorrespondingToLabel(u),u=>u[i]);c.exit().attr("opacity",0).remove(),c.enter().append("path").attr("opacity",0).merge(c).classed("bar",!0).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-update-enter",animate:t})).attr("class",u=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:u[i],originalClassName:"bar"})).style("fill",u=>{const d=this.services.cartesianScales.getDomainIdentifier(u);return this.model.getFillColor(u[i],u[d],u)}).attr("d",u=>{const d=this.services.cartesianScales.getDomainIdentifier(u),h=u[d]&&typeof u[d].toString=="function"?u[d].toString():u[d],p=this.getGroupScaleForLabel(h)(u[i]),f=this.getBarWidth(),g=p,m=p+f,v=this.services.cartesianScales.getRangeAxisPosition({datum:u}),x=this.services.cartesianScales.getDomainLowerBound(v),_=this.services.cartesianScales.getValueThroughAxisPosition(v,x),E=this.services.cartesianScales.getRangeValue(u),b=this.services.cartesianScales.getDomainValue(u)-f/2,S=b+f;if(!this.isOutsideZoomedDomain(b,S))return se({x0:g,x1:m,y0:_,y1:E},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>u.value),this.addEventListeners()}addEventListeners(){const t=this,n=y(this.getOptions(),"tooltip","alwaysShowRulerTooltip"),r=this.parent.selectAll("path.bar");n?r.style("pointer-events","none"):r.style("pointer-events",null),r.on("mouseover",function(i,s){const a=I(this);a.classed("hovered",!0),t.services.events.dispatchEvent(T.Bar.BAR_MOUSEOVER,{event:i,element:a,datum:s}),n||t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:i,hoveredElement:a,data:[s]})}).on("mousemove",function(i,s){const a=I(this);t.services.events.dispatchEvent(T.Bar.BAR_MOUSEMOVE,{event:i,element:a,datum:s}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:i})}).on("click",function(i,s){t.services.events.dispatchEvent(T.Bar.BAR_CLICK,{event:i,element:I(this),datum:s})}).on("mouseout",function(i,s){const a=I(this);a.classed("hovered",!1),t.services.events.dispatchEvent(T.Bar.BAR_MOUSEOUT,{event:i,element:a,datum:s}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:a})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(t){return this.model.getDisplayData(this.configs.groups).filter(n=>{const r=this.services.cartesianScales.getDomainIdentifier(n);return n[r].toString()===t})}getGroupWidth(t){const n=this.getOptions();if(y(n,"bars","preserveSpaceForMissingBars")===!1&&t){const s=this.getDataCorrespondingToLabel(t),a=this.getTotalGroupPadding(s.length);return this.getBarWidth()*s.length+a}const r=this.model.getGroupedData(this.configs.groups),i=this.getTotalGroupPadding();return this.getBarWidth()*r.length+i}getDomainScaleStep(){const t=this.services.cartesianScales.getDomainScale(),n=this.model.getGroupedData(this.configs.groups);let r=this.defaultStepFactor;if(typeof t.step=="function")r=t.step();else if(n.length>0){const i=n.find(s=>s.data?.length>1);if(i){const s=this.services.cartesianScales.getDomainIdentifier(i.data[0]);r=Math.abs(t(i.data[1][s])-t(i.data[0][s]))}}return r}getTotalGroupPadding(t){const n=this.model.getGroupedData(this.configs.groups),r=t!==void 0?t:n.length;return r===1?0:Math.min(5,5*(this.getDomainScaleStep()/this.defaultStepFactor))*(r-1)}getBarWidth(){const t=this.getOptions(),n=y(t,"bars","width"),r=y(t,"bars","maxWidth");if(n!==null&&(r===null||n<=r))return n;const i=this.model.getGroupedData(this.configs.groups).length,s=this.getTotalGroupPadding();return Math.min(r,(this.getDomainScaleStep()-s)/i)}setGroupScale(){const t=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=Fr().domain(t).rangeRound([0,this.getGroupWidth()])}getGroupScaleForLabel(t){const n=this.getOptions();if(y(n,"bars","preserveSpaceForMissingBars")===!1){const r=this.getDataCorrespondingToLabel(t),{groupMapsTo:i}=n.data,s=r.map(a=>a[i]);return Fr().domain(s).rangeRound([0,this.getGroupWidth(t)])}return this.groupScale}}class wD extends mt{constructor(){super(...arguments),this.type="heatmap",this.renderType=it.SVG,this.matrix={},this.xBandwidth=0,this.yBandwidth=0,this.translationUnits={x:0,y:0},this.handleAxisOnHover=t=>{const{detail:n}=t,{datum:r}=n,i=this.model.getUniqueRanges(),s=this.model.getUniqueDomain(),a=this.services.cartesianScales.getDomainLabel(),o=this.services.cartesianScales.getRangeLabel(),l=this.services.cartesianScales.getMainXScale(),c=this.services.cartesianScales.getMainYScale();let u="",d=null,h=null,p=null;this.matrix[r]!==void 0?(u=a,i.forEach(f=>{if(typeof this.matrix[r][f].value=="number"){const g=this.matrix[r][f].value;if(d===null){d=g,h=g,p=g;return}d+=g,h=g<h?g:h,p=g>p?g:p}})):(u=o,s.forEach(f=>{if(typeof this.matrix[f][r].value=="number"){const g=this.matrix[f][r].value;if(d===null){d=g,h=g,p=g;return}d+=g,h=g<h?g:h,p=g>p?g:p}})),l(r)!==void 0?this.parent.select("g.multi-cell.column-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${l(r)}, ${In(c.range())})`):c(r)!==void 0&&this.parent.select("g.multi-cell.row-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${In(l.range())},${c(r)})`),this.services.events.dispatchEvent(T.Tooltip.SHOW,{event:n.event,hoveredElement:I(t.detail.element),items:[{label:u,value:r,bold:!0},{label:"Min",value:h!==null?h:"-"},{label:"Max",value:p!==null?p:"-"},{label:"Average",value:d!==null?d/s.length:"-"}]})},this.handleAxisMouseOut=t=>{this.parent.selectAll("g.multi-cell").classed("highlighter-hidden",!0),this.services.events.dispatchEvent(T.Tooltip.HIDE,{event:t})}}init(){const t=this.services.events;t.addEventListener(T.Axis.LABEL_MOUSEOVER,this.handleAxisOnHover),t.addEventListener(T.Axis.LABEL_MOUSEOUT,this.handleAxisMouseOut),t.addEventListener(T.Axis.LABEL_FOCUS,this.handleAxisOnHover),t.addEventListener(T.Axis.LABEL_BLUR,this.handleAxisMouseOut)}render(t=!0){const n=this.getComponentContainer({ariaLabel:"heatmap",withinChartClip:!0});n.lower();const{cartesianScales:r}=this.services;if(this.matrix=this.model.getMatrix(),n.html(""),y(this.getOptions(),"data","loading"))return;const i=r.getMainXScale(),s=r.getMainYScale(),a=r.getDomainIdentifier(),o=r.getRangeIdentifier(),l=this.model.getUniqueDomain(),c=this.model.getUniqueRanges(),u=this.model.getMatrixAsArray(),d=i.range(),h=s.range();this.xBandwidth=Math.abs((d[1]-d[0])/l.length),this.yBandwidth=Math.abs((h[1]-h[0])/c.length);const p=this.services.domUtils.generateElementIDString("heatmap-pattern-stripes");n.append("defs").append("pattern").attr("id",p).attr("width",3).attr("height",3).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").classed("pattern-fill",!0).attr("width",.5).attr("height",8);const f=n.selectAll().data(u).enter().append("g").attr("class",g=>`heat-${g.index}`).classed("cell",!0).attr("transform",g=>`translate(${i(g[a])}, ${s(g[o])})`).append("rect").attr("class",g=>this.model.getColorClassName({value:g.value,originalClassName:`heat-${g.index}`})).classed("heat",!0).classed("null-state",g=>g.index===-1||g.value===null).attr("width",this.xBandwidth).attr("height",this.yBandwidth).style("fill",g=>{const m=this.services.cartesianScales.getDomainIdentifier(g);return g.index===-1||g.value===null?`url(#${p})`:this.model.getFillColor(Number(g.value),g[m],g)}).attr("aria-label",g=>g.value);this.createOuterBox("g.cell-highlight",this.xBandwidth,this.yBandwidth),this.createOuterBox("g.multi-cell.column-highlight",this.xBandwidth,Math.abs(h[1]-h[0])),this.createOuterBox("g.multi-cell.row-highlight",Math.abs(d[1]-d[0]),this.yBandwidth),this.determineDividerStatus()&&(f.style("stroke-width","1px"),this.parent.select("g.cell-highlight").classed("cell-2",!0)),this.addEventListener()}createOuterBox(t,n,r){const i=N.appendOrSelect(this.parent,t).classed("shadows",!0).classed("highlighter-hidden",!0);N.appendOrSelect(i,"line.top").attr("x1",-1).attr("x2",n+1),N.appendOrSelect(i,"line.left").attr("x1",0).attr("y1",-1).attr("x2",0).attr("y2",r+1),N.appendOrSelect(i,"line.down").attr("x1",-1).attr("x2",n+1).attr("y1",r).attr("y2",r),N.appendOrSelect(i,"line.right").attr("x1",n).attr("x2",n).attr("y1",-1).attr("y2",r+1)}determineDividerStatus(){const t=y(this.getOptions(),"heatmap","divider","state");return t!==wr.OFF&&(t===wr.AUTO&&hp.minCellDividerDimension<=this.xBandwidth&&hp.minCellDividerDimension<=this.yBandwidth||t===wr.ON)}addEventListener(){const t=this,{cartesianScales:n}=this.services,r=this.getOptions(),i=vt(r,"locale.translations.total")||vt(r,"tooltip.totalLabel")||"Total",s=n.getDomainIdentifier(),a=n.getRangeIdentifier(),o=n.getDomainLabel(),l=n.getRangeLabel();this.parent.selectAll("g.cell").on("mouseover",function(c,u){const d=I(this),h=d.select("rect.heat");if(!h.classed("null-state")){const p=Wi(d.attr("transform"));t.parent.select("g.cell-highlight").attr("transform",`translate(${p.x+t.translationUnits.x}, ${p.y+t.translationUnits.y})`).classed("highlighter-hidden",!1),t.services.events.dispatchEvent(T.Heatmap.HEATMAP_MOUSEOVER,{event:c,element:h,datum:u}),t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:c,items:[{label:o,value:u[s]},{label:l,value:u[a]},{label:i,value:u.value,color:h.style("fill")}]})}}).on("mousemove",function(c,u){t.services.events.dispatchEvent(T.Heatmap.HEATMAP_MOUSEMOVE,{event:c,element:I(this),datum:u}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:c})}).on("click",function(c,u){t.services.events.dispatchEvent(T.Heatmap.HEATMAP_CLICK,{event:c,element:I(this),datum:u})}).on("mouseout",function(c,u){const d=I(this).select("rect.heat"),h=d.classed("null-state");t.parent.select("g.cell-highlight").classed("highlighter-hidden",!0),h||(t.services.events.dispatchEvent(T.Heatmap.HEATMAP_MOUSEOUT,{event:c,element:d,datum:u}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{event:c,hoveredElement:d}))})}destroy(){this.parent.selectAll("rect.heat").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleAxisOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleAxisMouseOut)}}class $D extends mt{constructor(){super(...arguments),this.type="histogram",this.renderType=it.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(s=>this.services.transitions.setupTransition({transition:s,name:"legend-hover-bar"})).attr("opacity",s=>s[i]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const n=this.getComponentContainer({ariaLabel:"histogram bars"}),r=this.model.getOptions(),{groupIdentifier:i}=r,{groupMapsTo:s}=r.data,a=this.model.getBinnedStackedData(),o=this.services.cartesianScales.getMainXScale(),l=n.selectAll("g.bars").data(a,u=>vt(u,`0.${s}`));l.exit().attr("opacity",0).remove(),l.enter().append("g").classed("bars",!0).attr("role",ht.GROUP);const c=n.selectAll("g.bars").selectAll("path.bar").data(u=>u);c.exit().remove(),c.enter().append("path").merge(c).classed("bar",!0).attr(i,(u,d)=>d).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"histogram-bar-update-enter",animate:t})).attr("class",u=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:u[s],originalClassName:"bar"})).style("fill",u=>this.model.getFillColor(u[s],null,u)).attr("d",u=>{const d=vt(u,"data");if(!d)return;const h=o(d.x1)-o(d.x0)-1,p=this.services.cartesianScales.getDomainValue(d.x0),f=p+h,g=this.services.cartesianScales.getRangeValue(u[0]);let m=this.services.cartesianScales.getRangeValue(u[1]);return Math.abs(m-g)>0&&Math.abs(m-g)>r.bars.dividerSize&&(this.services.cartesianScales.getOrientation()===zt.VERTICAL?m+=1:m-=1),se({x0:p,x1:f,y0:g,y1:m},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>y(u,"data",u[s])),this.addEventListeners()}addEventListeners(){const t=this.model.getOptions(),{groupMapsTo:n}=t.data,{code:r,number:i}=y(t,"locale"),s=y(t,"tooltip","alwaysShowRulerTooltip"),a=this.parent.selectAll("path.bar");s?a.style("pointer-events","none"):a.style("pointer-events",null);const o=this;a.on("mouseover",function(l,c){const u=I(this);u.classed("hovered",!0);const d=i(parseFloat(vt(c,"data.x0")),r),h=i(parseFloat(vt(c,"data.x1")),r),p=o.services.cartesianScales.getRangeAxisPosition(),f=o.services.cartesianScales.getScaleLabel(p);s||o.services.events.dispatchEvent(T.Tooltip.SHOW,{event:l,hoveredElement:u,items:[{label:vt(t,"bins.rangeLabel")||"Range",value:`${d}  ${h}`},{label:t.tooltip.groupLabel||"Group",value:c[n],class:o.model.getColorClassName({classNameTypes:[st.TOOLTIP],dataGroupName:c[n]})},{label:f,value:vt(c,`data.${c[n]}`)}]})}).on("mousemove",function(l){o.services.events.dispatchEvent(T.Tooltip.MOVE,{event:l})}).on("mouseout",function(){I(this).classed("hovered",!1),o.services.events.dispatchEvent(T.Tooltip.HIDE)})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class MD extends cn{constructor(){super(...arguments),this.type="lollipop",this.renderType=it.SVG,this.handleScatterOnHover=t=>{const n=t.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("line.line").attr("stroke-width",s=>s[i]!==n.datum[i]?yn.weight.unselected:yn.weight.selected)},this.handleScatterOnMouseOut=()=>{this.parent.selectAll("line.line").attr("stroke-width",yn.weight.unselected)},this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("line.line").transition("legend-hover-line").call(s=>this.services.transitions.setupTransition({transition:s,name:"legend-hover-line"})).attr("opacity",s=>s[i]!==n.datum().name?yn.opacity.unselected:yn.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("line.line").transition("legend-mouseout-line").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-line"})).attr("opacity",yn.opacity.selected)}}init(){const{events:t}=this.services;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const n=this.getComponentContainer({ariaLabel:"lines",withinChartClip:!0}),r=this.model.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:s}=this.services,a=s.getMainXScale(),o=s.getMainYScale(),l=s.getDomainIdentifier(),c=m=>s.getDomainValue(m),u=m=>s.getRangeValue(m),d=s.getOrientation(),[h,p]=xn(c,u,d),f=n.selectAll("line.line").data(this.getScatterData(),m=>`${m[i]}-${m[l]}`);f.exit().attr("opacity",0).remove();const g=f.enter().append("line").attr("opacity",0).merge(f).classed("line",!0).attr("class",m=>this.model.getColorClassName({classNameTypes:[st.STROKE],dataGroupName:m[i],originalClassName:"line"})).transition().call(m=>this.services.transitions.setupTransition({transition:m,name:"lollipop-line-update-enter",animate:t})).style("stroke",m=>this.model.getFillColor(m[i],m[l],m)).attr("opacity",1);d===zt.HORIZONTAL?g.attr("y1",p).attr("y2",p).attr("x1",a.range()[0]).attr("x2",m=>h(m)-r.points.radius):g.attr("x1",h).attr("x2",h).attr("y1",o.range()[0]).attr("y2",m=>p(m)+r.points.radius),this.addScatterPointEventListeners()}addScatterPointEventListeners(){this.services.events.addEventListener(T.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),this.services.events.addEventListener(T.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)}destroy(){const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),t.removeEventListener(T.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),t.removeEventListener(T.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)}}class CD extends mt{constructor(){super(...arguments),this.type="meter",this.renderType=it.SVG}getStackedBounds(t,n){let r=0;return t.map((i,s)=>s!==0?(r+=n(i.value),{...i,width:Math.abs(n(i.value)-Kt.dividerWidth),x:r-n(i.value)}):(r=n(i.value),{...i,width:Math.abs(n(i.value)-Kt.dividerWidth),x:0}))}render(t=!0){const n=this,r=this.getComponentContainer({ariaLabel:"meter lines"}),i=this.getOptions(),s=y(i,"meter","proportional"),a=this.model.getDisplayData(),o=this.model.getStatus(),{width:l}=N.getSVGElementSize(r,{useAttrs:!0}),{groupMapsTo:c}=i.data;let u;y(i,"meter","proportional")===null?u=100:u=y(i,"meter","proportional","total")||this.model.getMaximumDomain(this.model.getDisplayData());const d=Fe().domain([0,u]).range([0,l]),h=this.getStackedBounds(a,d),p=y(i,"meter","height");N.appendOrSelect(r,"rect.container").attr("x",0).attr("y",0).attr("width",l).attr("height",p||(s?Kt.height.proportional:Kt.height.default)),N.appendOrSelect(r,"line.rangeIndicator").attr("x1",l).attr("x2",l).attr("y1",0).attr("y2",p||(s?Kt.height.proportional:Kt.height.default));const f=r.selectAll("rect.value").data(h),g=o!=null&&!n.model.isUserProvidedColorScaleValid()&&!s?`value status--${o}`:"value";f.enter().append("rect").classed("value",!0).merge(f).attr("x",_=>_.x).attr("y",0).attr("height",()=>p||(s?Kt.height.proportional:Kt.height.default)).attr("class",_=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:_[c],originalClassName:g})).transition().call(_=>this.services.transitions.setupTransition({transition:_,name:"meter-bar-update",animate:t})).attr("width",_=>_.value>u?d(u):Math.max(_.width,2)).style("fill",_=>n.model.getFillColor(_[c],null,_)).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",_=>_.value),f.exit().remove();const m=y(i,"meter","peak");let v=m;m!==null&&(m>u?v=u:m<0&&(v=0));const x=r.selectAll("line.peak").data(v==null?[]:[v]);x.enter().append("line").classed("peak",!0).merge(x).attr("y1",0).attr("y2",()=>p||(s?Kt.height.proportional:Kt.height.default)).transition().call(_=>this.services.transitions.setupTransition({transition:_,name:"peak-line-update",animate:t})).attr("x1",_=>d(_)).attr("x2",_=>d(_)).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","peak").attr("aria-label",_=>_),x.exit().remove(),this.services.domUtils.setSVGMaxHeight(),this.addEventListeners()}addEventListeners(){const t=this.getOptions(),{groupMapsTo:n}=t.data,r=this,i=y(t,"meter","proportional");this.parent.selectAll("rect.value").on("mouseover",function(s,a){const o=I(this);r.services.events.dispatchEvent(T.Meter.METER_MOUSEOVER,{event:s,element:o,datum:a}),i&&(o.classed("hovered",!0),r.services.events.dispatchEvent(T.Tooltip.SHOW,{event:s,hoveredElement:o,items:[{label:a[n],value:a.value}]}))}).on("mousemove",function(s,a){const o=I(this);r.services.events.dispatchEvent(T.Meter.METER_MOUSEMOVE,{event:s,element:o,datum:a}),i&&r.services.events.dispatchEvent(T.Tooltip.MOVE,{event:s})}).on("click",function(s,a){r.services.events.dispatchEvent(T.Meter.METER_CLICK,{event:s,element:I(this),datum:a})}).on("mouseout",function(s,a){const o=I(this);r.services.events.dispatchEvent(T.Meter.METER_MOUSEOUT,{event:s,element:o,datum:a}),i&&(o.classed("hovered",!1),r.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:o}))})}destroy(){this.parent.selectAll("rect.value").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null)}}class AD extends mt{constructor(){super(...arguments),this.type="radar",this.renderType=it.SVG,this.getLabelDimensions=t=>{const n=N.appendOrSelect(this.getComponentContainer(),"g.tmp-tick"),r=N.appendOrSelect(n,"text").text(t),{width:i,height:s}=N.getSVGElementSize(r.node(),{useBBox:!0});return n.remove(),{width:i,height:s}},this.normalizeFlatData=t=>{const n=this.getOptions(),{angle:r,value:i}=y(n,"radar","axes"),s=y(n,"data","groupMapsTo"),a=OC(this.uniqueKeys.map(o=>this.uniqueGroups.map(l=>({[r]:o,[s]:l,[i]:null}))));return at(a,t)},this.normalizeGroupedData=t=>{const n=this.getOptions(),{angle:r,value:i}=y(n,"radar","axes"),s=y(n,"data","groupMapsTo");return t.map(({name:a,data:o})=>{const l=this.uniqueKeys.map(c=>({[s]:a,[r]:c,[i]:null}));return{name:a,data:at(l,o)}})},this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail;this.parent.selectAll("g.blobs path").transition("legend-hover-blob").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-blob"})).style("fill-opacity",r=>r.name!==n.datum().name?sr.opacity.unselected:sr.opacity.selected).style("stroke-opacity",r=>r.name!==n.datum().name?sr.opacity.unselected:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("g.blobs path").transition("legend-mouseout-blob").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-blob"})).style("fill-opacity",sr.opacity.selected).style("stroke-opacity",1)}}init(){const{events:t}=this.services;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const n=this.getComponentContainer({ariaLabel:"radar graph"}),{width:r,height:i}=N.getSVGElementSize(n,{useAttrs:!0}),s=this.model.getData(),a=this.model.getGroupedData(),o=this.getOptions(),l=y(o,"data","groupMapsTo"),c=y(o,"radar","axes","value"),{angle:u,value:d}=y(o,"radar","axes"),{xLabelPadding:h,yLabelPadding:p,yTicksNumber:f,minRange:g,xAxisRectHeight:m}=sr;this.uniqueKeys=Array.from(new Set(s.map(O=>O[u]))),this.uniqueGroups=Array.from(new Set(s.map(O=>O[l]))),this.fullDataNormalized=this.normalizeFlatData(s),this.groupedDataNormalized=this.normalizeGroupedData(a);const v=2*(this.getLabelDimensions(this.uniqueKeys[0]).height+p),x=(Math.min(r,i)-v)/2;if(x<=0)return;const _=Fr().domain(this.fullDataNormalized.map(O=>O[u])).range([0,2*Math.PI].map(O=>O-Math.PI/2)),E=In(this.fullDataNormalized.map(O=>O[d])),b=Fe().domain([E>=0?0:E,tr(this.fullDataNormalized.map(O=>O[d]))]).range([g,x]).nice(f),S=b.ticks(f),$=(O,w,L)=>this.model.getFillColor(O,w,L),k=tk().angle(O=>_(O[u])+Math.PI/2).radius(O=>b(O[d])).curve(mf),C=this.uniqueKeys.map(O=>{const w=this.getLabelDimensions(O).width,L=$2(_(O),x);return w+L}),R={x:tr(C)+h,y:i/2},M=N.appendOrSelect(n,"g.y-axes").attr("role",ht.GROUP).selectAll("path").data(S,O=>O),H=O=>this.uniqueKeys.map(w=>({[u]:w,[d]:O}));M.join(O=>O.append("path").attr("opacity",0).attr("transform",`translate(${R.x}, ${R.y})`).attr("fill","none").call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_y_axes_enter",animate:t})).attr("opacity",1).attr("d",L=>k(H(L)))),O=>O.call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_y_axes_update",animate:t})).attr("opacity",1).attr("transform",`translate(${R.x}, ${R.y})`).attr("d",L=>k(H(L)))),O=>O.call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_y_axes_exit",animate:t})).attr("d",L=>k(H(L))).attr("opacity",0).remove())),N.appendOrSelect(n,"g.x-axes").attr("role",ht.GROUP).selectAll("line").data(this.uniqueKeys,O=>O).join(O=>O.append("line").attr("opacity",0).attr("class",w=>`x-axis-${Kr(w)}`).attr("stroke-dasharray","0").attr("x1",w=>Ut(_(w),0,R).x).attr("y1",w=>Ut(_(w),0,R).y).attr("x2",w=>Ut(_(w),0,R).x).attr("y2",w=>Ut(_(w),0,R).y).call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_x_axes_enter",animate:t})).attr("opacity",1).attr("x1",L=>Ut(_(L),b.range()[0],R).x).attr("y1",L=>Ut(_(L),b.range()[0],R).y).attr("x2",L=>Ut(_(L),b.range()[1],R).x).attr("y2",L=>Ut(_(L),b.range()[1],R).y)),O=>O.call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_x_axes_update",animate:t})).attr("opacity",1).attr("x1",L=>Ut(_(L),b.range()[0],R).x).attr("y1",L=>Ut(_(L),b.range()[0],R).y).attr("x2",L=>Ut(_(L),b.range()[1],R).x).attr("y2",L=>Ut(_(L),b.range()[1],R).y)),O=>O.call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_x_axes_exit",animate:t})).attr("opacity",0).remove())),N.appendOrSelect(n,"g.x-labels").attr("role",ht.GROUP).selectAll("text").data(this.uniqueKeys).join(O=>O.append("text").text(w=>w).attr("opacity",0).attr("x",w=>Ut(_(w),b.range()[1]+h,R).x).attr("y",w=>Ut(_(w),b.range()[1]+h,R).y).style("text-anchor",w=>Af(_(w)).textAnchor).style("dominant-baseline",w=>Af(_(w)).dominantBaseline).call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_x_labels_enter",animate:t})).attr("opacity",1)),O=>O.call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_x_labels_update",animate:t})).attr("opacity",1).attr("x",L=>Ut(_(L),b.range()[1]+h,R).x).attr("y",L=>Ut(_(L),b.range()[1]+h,R).y).end().finally(()=>{const L=y(o,"radar","alignment"),D=this.getAlignmentXOffset(L,n,this.getParent());n.attr("x",D)})),O=>O.call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_x_labels_exit",animate:t})).attr("opacity",0).remove())),N.appendOrSelect(n,"g.blobs").attr("role",ht.GROUP).selectAll("path").data(this.groupedDataNormalized,O=>O.name).join(O=>O.append("path").attr("class",w=>this.model.getColorClassName({classNameTypes:[st.FILL,st.STROKE],dataGroupName:w.name,originalClassName:"blob"})).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-label",w=>w.name).attr("opacity",0).attr("transform",t?()=>`translate(${R.x}, ${R.y}) scale(${1+Math.random()*.35})`:`translate(${R.x}, ${R.y})`).style("fill",w=>$(w.name,null,w.data)).style("fill-opacity",sr.opacity.selected).style("stroke",w=>$(w.name,null,w.data)).call(w=>{const L=w.transition().call(D=>this.services.transitions.setupTransition({transition:D,name:"radar_blobs_enter",animate:t}));t&&L.delay(()=>Math.random()*30).attr("transform",`translate(${R.x}, ${R.y})`),L.attr("opacity",1).attr("d",D=>k(D.data))}),O=>(O.attr("class",w=>this.model.getColorClassName({classNameTypes:[st.FILL,st.STROKE],dataGroupName:w.name,originalClassName:"blob"})).style("fill",w=>$(w.name,null,w.data)).style("stroke",w=>$(w.name,null,w.data)),O.call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_blobs_update",animate:t})).attr("opacity",1).attr("transform",`translate(${R.x}, ${R.y})`).attr("d",L=>k(L.data))),O),O=>O.call(w=>{const L=w.transition().call(D=>this.services.transitions.setupTransition({transition:D,name:"radar_blobs_exit",animate:t}));t&&L.delay(()=>Math.random()*30).attr("transform",()=>`translate(${R.x}, ${R.y}) scale(${1+Math.random()*.35})`),L.attr("opacity",0).remove()})),N.appendOrSelect(n,"g.dots").attr("role",ht.GROUP).selectAll("circle").data(this.fullDataNormalized.filter(O=>y(O,d)!==null)).join(O=>O.append("circle").attr("role",ht.GRAPHICS_SYMBOL).attr("aria-label",w=>w[c]),O=>O,O=>O.remove()).attr("class",O=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:O[l],originalClassName:Kr(O[u])})).attr("cx",O=>Ut(_(O[u]),b(O[d]),R).x).attr("cy",O=>Ut(_(O[u]),b(O[d]),R).y).attr("r",0).attr("opacity",0).style("fill",O=>$(O[l])),N.appendOrSelect(n,"g.x-axes-rect").attr("role",ht.GROUP).selectAll("rect").data(this.uniqueKeys).join(O=>O.append("rect"),O=>O,O=>O.remove()).attr("x",R.x).attr("y",R.y-m/2).attr("width",b.range()[1]).attr("height",m).style("fill","red").style("fill-opacity",0).attr("transform",O=>`rotate(${Lf(_(O))}, ${R.x}, ${R.y})`);const{code:P,number:B}=y(o,"locale");N.appendOrSelect(n,"g.y-labels").attr("role",ht.GROUP).selectAll("text").data(Ve(S)).join(O=>O.append("text").attr("opacity",0).text(w=>B(w,P)).attr("x",w=>Ut(-Math.PI/2,b(w),R).x+p).attr("y",w=>Ut(-Math.PI/2,b(w),R).y).style("text-anchor","start").style("dominant-baseline","middle").call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_y_labels_enter",animate:t})).attr("opacity",1)),O=>O.call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_y_labels_update",animate:t})).text(L=>L).attr("opacity",1).attr("x",L=>Ut(-Math.PI/2,b(L),R).x+p).attr("y",L=>Ut(-Math.PI/2,b(L),R).y)),O=>O.call(w=>w.transition().call(L=>this.services.transitions.setupTransition({transition:L,name:"radar_y_labels_exit",animate:t})).attr("opacity",0).remove())),this.addEventListeners()}getAlignmentXOffset(t,n,r){const i=N.getSVGElementSize(n,{useBBox:!0}),{width:s}=N.getSVGElementSize(r,{useAttrs:!0});let a=0;return t===Ft.CENTER?a=Math.floor((s-i.width)/2):t===Ft.RIGHT&&(a=s-i.width),a}destroy(){this.parent.selectAll(".x-axes-rect > rect").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}addEventListeners(){const t=this,{axes:{angle:n}}=y(this.getOptions(),"radar");this.parent.selectAll(".x-axes-rect > rect").on("mouseover",function(r,i){const s=I(this);t.services.events.dispatchEvent(T.Radar.X_AXIS_MOUSEOVER,{event:r,element:s,datum:i});const a=t.parent.select(`.x-axes .x-axis-${Kr(i)}`),o=t.parent.selectAll(`.dots circle.${Kr(i)}`),l=t.model.getActiveDataGroupNames(),c=t.getOptions(),{groupMapsTo:u}=c.data,d=y(c,"radar","axes","value");a.classed("hovered",!0).attr("stroke-dasharray","4 4"),o.classed("hovered",!0).attr("opacity",p=>l.indexOf(p[u])!==-1?1:0).attr("r",sr.dotsRadius);const h=t.fullDataNormalized.filter(p=>p[n]===i&&l.indexOf(p[u])!==-1);t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:r,hoveredElement:s,items:h.filter(p=>typeof p[d]=="number").map(p=>({label:p[u],value:p[d],color:t.model.getFillColor(p[u],null,p),class:t.model.getColorClassName({classNameTypes:[st.TOOLTIP],dataGroupName:p[u]})}))})}).on("mousemove",function(r,i){const s=I(this);t.services.events.dispatchEvent(T.Radar.X_AXIS_MOUSEMOVE,{event:r,element:s,datum:i}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:r})}).on("click",function(r,i){t.services.events.dispatchEvent(T.Radar.X_AXIS_CLICK,{event:r,element:I(this),datum:i})}).on("mouseout",function(r,i){const s=I(this),a=t.parent.select(`.x-axes .x-axis-${Kr(i)}`),o=t.parent.selectAll(`.dots circle.${Kr(i)}`);a.classed("hovered",!1).attr("stroke-dasharray","0"),o.classed("hovered",!1).attr("opacity",0).attr("r",0),t.services.events.dispatchEvent(T.Radar.X_AXIS_MOUSEOUT,{event:r,element:s,datum:i}),t.services.events.dispatchEvent(T.Tooltip.HIDE)})}}class qg extends vu{constructor(){super(...arguments),this.type="simple-bar",this.renderType=it.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({ariaLabel:"bar graphs",withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),a=this.services.cartesianScales.getOrientation(),o=i.selectAll("path.bar").data(s,l=>l[r]);o.exit().attr("opacity",0).remove(),o.enter().append("path").attr("opacity",0).merge(o).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(l=>this.services.transitions.setupTransition({transition:l,name:"bar-update-enter",animate:t})).attr("class",l=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:l[r],originalClassName:"bar"})).style("fill",l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return this.model.getFillColor(l[r],l[c],l)}).attr("d",l=>{const c=this.services.cartesianScales.getRangeIdentifier(),u=this.getBarWidth(),d=l[c],h=this.services.cartesianScales.getDomainValue(l)-u/2,p=h+u;let f,g;if(Array.isArray(d)&&d.length===2)f=this.services.cartesianScales.getRangeValue(d[0]),g=this.services.cartesianScales.getRangeValue(d[1]);else{const v=this.services.cartesianScales.getRangeScale().domain()[0];f=this.services.cartesianScales.getRangeValue(Math.max(0,v)),g=this.services.cartesianScales.getRangeValue(l)}const m=Math.abs(g-f);if(m!==0&&m<2&&(d>0&&a===zt.VERTICAL||d<0&&a===zt.HORIZONTAL?g=f-2:g=f+2),!this.isOutsideZoomedDomain(h,p))return se({x0:h,x1:p,y0:f,y1:g},a)}).attr("opacity",1).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",l=>l.value),this.addEventListeners()}addEventListeners(){const t=this,n=y(this.getOptions(),"tooltip","alwaysShowRulerTooltip"),r=this.parent.selectAll("path.bar");n?r.style("pointer-events","none"):r.style("pointer-events",null),r.on("mouseover",function(i,s){const a=I(this);a.classed("hovered",!0),t.services.events.dispatchEvent(T.Bar.BAR_MOUSEOVER,{event:i,element:a,datum:s}),n||t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:i,hoveredElement:a,data:[s]})}).on("mousemove",function(i,s){t.services.events.dispatchEvent(T.Bar.BAR_MOUSEMOVE,{event:i,element:I(this),datum:s}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:i})}).on("click",function(i,s){t.services.events.dispatchEvent(T.Bar.BAR_CLICK,{event:i,element:I(this),datum:s})}).on("mouseout",function(i,s){const a=I(this);a.classed("hovered",!1),t.services.events.dispatchEvent(T.Bar.BAR_MOUSEOUT,{event:i,element:a,datum:s}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:a})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class LD extends ue{constructor(){super(...arguments),this.type="skeleton-lines"}render(t=!0){const n=y(this.getOptions(),"data","loading"),r=!y(this.getOptions(),"grid","x","enabled")&&!y(this.getOptions(),"grid","y","enabled")&&!y(this.getOptions(),"axes","bottom","visible")&&!y(this.getOptions(),"axes","left","visible");n&&!r?super.renderGridSkeleton(n):n&&r?this.renderSparklineSkeleton(n):this.removeSkeleton()}renderSparklineSkeleton(t){this.setScales(),this.drawBackdrop(t),this.drawSparkline(t),this.updateBackdropStyle(),t&&this.setShimmerEffect("shimmer-lines")}drawSparkline(t){const n=this.backdrop.attr("width"),r=[100],i=N.appendOrSelect(this.backdrop,"g.y.skeleton"),s=i.selectAll("line").data(r);s.enter().append("line").merge(s).attr("x1",0).attr("x2",n).attr("y1",a=>a).attr("y2",a=>a),i.selectAll("line").classed("shimmer-effect-lines",t).classed("empty-state-lines",!t).style("stroke",t?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}updateBackdropStyle(){const t=this.parent;this.backdrop=N.appendOrSelect(t,"svg.chart-skeleton.DAII").attr("role","presentation"),N.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop").classed("shimmer-effect-lines",!1).classed("shimmer-effect-sparkline",!0).style("stroke",null)}}class Yg extends mt{constructor(){super(...arguments),this.type="area-stacked",this.renderType=it.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.area").transition("legend-hover-area").call(s=>this.services.transitions.setupTransition({transition:s,name:"legend-hover-area"})).attr("opacity",s=>y(s,0,i)!==n.datum().name?vn.opacity.unselected:vn.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-area"})).attr("opacity",vn.opacity.selected)}}init(){const t=this.services.events;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const n=this.getComponentContainer({ariaLabel:"stacked area graphs",withinChartClip:!0}),r=this,i=this.getOptions(),{groupMapsTo:s}=i.data,a=Object.keys(i.axes).some(p=>i.axes[p].percentage),o=this.model.getStackedData({percentage:a,groups:this.configs.groups}),l=y(o,0,0),c=this.services.cartesianScales.getDomainAxisPosition({datum:l}),u=this.services.cartesianScales.getRangeAxisPosition({datum:l}),d=this.services.cartesianScales.getScaleByPosition(u),h=n.selectAll("path.area").data(o,p=>y(p,0,s));this.areaGenerator=tu().x(p=>this.services.cartesianScales.getValueThroughAxisPosition(c,p.data.sharedStackKey)).y0(p=>d(p[0])).y1(p=>d(p[1])).curve(this.services.curves.getD3Curve()),h.exit().attr("opacity",0).remove(),h.enter().append("path").attr("opacity",0).merge(h).data(o,p=>y(p,0,s)).attr("class","area").attr("class",p=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:y(p,0,s),originalClassName:"area"})).style("fill",p=>r.model.getFillColor(y(p,0,s),null,p)).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",p=>y(p,0,s)).transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"area-update-enter",animate:t})).attr("opacity",vn.opacity.selected).attr("d",this.areaGenerator)}}class Xg extends vu{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=it.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,{groupMapsTo:r}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t){const n=this.getComponentContainer({ariaLabel:"stacked bar graphs",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),a=this.model.getActiveDataGroupNames(),o=n.selectAll("g.bars").data(s,c=>y(c,0,i));o.exit().attr("opacity",0).remove(),o.enter().append("g").classed("bars",!0).attr("role",ht.GROUP).attr("data-name","bars");const l=n.selectAll("g.bars").selectAll("path.bar").data(c=>c,c=>c.data.sharedStackKey);l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).transition().call(c=>this.services.transitions.setupTransition({transition:c,name:"bar-update-enter",animate:t})).attr("class",c=>this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:c[i],originalClassName:"bar"})).style("fill",c=>this.model.getFillColor(c[i],c.data.sharedStackKey,c.data)).attr("d",c=>{const u=c.data.sharedStackKey,d=this.getBarWidth(),h=this.services.cartesianScales.getDomainValue(u)-d/2,p=h+d,f=this.services.cartesianScales.getRangeValue(c[0]);let g=this.services.cartesianScales.getRangeValue(c[1]);if(!this.isOutsideZoomedDomain(h,p)){if(Math.abs(g-f)>0&&Math.abs(g-f)>r.bars.dividerSize){const m=c[0]<0&&c[1]<=0;m&&a.length>1?this.services.cartesianScales.getOrientation()===zt.VERTICAL?g+=c[1]===0?2:1:g-=1:m||(this.services.cartesianScales.getOrientation()===zt.VERTICAL?g+=1:g-=1)}return se({x0:h,x1:p,y0:f,y1:g},this.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",ht.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",c=>c[1]-c[0]),this.addEventListeners()}addEventListeners(){const t=this.getOptions(),{groupMapsTo:n}=t.data,r=y(t,"tooltip","alwaysShowRulerTooltip"),i=this.parent.selectAll("path.bar");r?i.style("pointer-events","none"):i.style("pointer-events",null);const s=this;i.on("mouseover",function(a,o){const l=I(this);l.classed("hovered",!0),s.services.events.dispatchEvent(T.Bar.BAR_MOUSEOVER,{event:a,element:l,datum:o});let c=s.model.getDisplayData(s.configs.groups).find(u=>{const d=s.services.cartesianScales.getDomainIdentifier(u),h=s.services.cartesianScales.getRangeIdentifier(u);return u[h]===o.data[o[n]]&&u[d].toString()===o.data.sharedStackKey&&u[n]===o[n]});if(c===void 0){const u=s.services.cartesianScales.getDomainIdentifier(),d=s.services.cartesianScales.getRangeIdentifier();c={[u]:o.data.sharedStackKey,[d]:o.data[o[n]],[n]:o[n]}}r||s.services.events.dispatchEvent(T.Tooltip.SHOW,{event:a,hoveredElement:l,data:[c]})}).on("mousemove",function(a,o){const l=I(this);s.services.events.dispatchEvent(T.Bar.BAR_MOUSEMOVE,{event:a,element:l,datum:o}),s.services.events.dispatchEvent(T.Tooltip.MOVE,{event:a})}).on("click",function(a,o){s.services.events.dispatchEvent(T.Bar.BAR_CLICK,{event:a,element:I(this),datum:o})}).on("mouseout",function(a,o){const l=I(this);l.classed("hovered",!1),s.services.events.dispatchEvent(T.Bar.BAR_MOUSEOUT,{event:a,element:l,datum:o}),s.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:l})})}getBarWidth(){const t=this.getOptions();if(y(t,"bars","width"))return t.bars.width;const n=this.services.cartesianScales.getMainXScale(),r=N.getSVGElementSize(this.parent,{useAttrs:!0}).width,i=this.model.getStackKeys().length,s=y(t,"bars","spacingFactor");return n.step?Math.min(t.bars.maxWidth,n.step()/2):Math.min(t.bars.maxWidth,r*s/i)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const t=this.services.events;t.removeEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.removeEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class Zg extends cn{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=it.SVG}render(t){if(!y(this.getOptions(),"points","enabled"))return;const n=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(u=>r.axes[u].percentage),a=this.model.getStackedData({groups:this.configs.groups,percentage:s}),o=n.selectAll("g.dots").data(a,u=>y(u,0,i));o.exit().attr("opacity",0).remove();const l=o.enter().append("g").classed("dots",!0).attr("role",ht.GROUP).merge(o).selectAll("circle.dot").data(u=>u);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l).datum(u=>{const d=u[i],h=this.services.cartesianScales.getDomainIdentifier(u),p=this.services.cartesianScales.getRangeIdentifier(u);return{[i]:d,[h]:u.data.sharedStackKey,[p]:u[1]}});this.styleCircles(c,t),this.addEventListeners()}getTooltipData(t,n){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(l=>r.axes[l].percentage),a=this.model.getStackedData({groups:this.configs.groups,percentage:s}),o=[];return a.forEach((l,c)=>{l.forEach((u,d)=>{const h=u[i],p=u.data.sharedStackKey;let f=u.data[h];const g=u[1],m=this.services.cartesianScales.getDomainIdentifier(u),v=this.services.cartesianScales.getRangeIdentifier(u);f!=null&&t===this.services.cartesianScales.getDomainValue(p)&&n===this.services.cartesianScales.getRangeValue(g)&&(s&&(f=this.model.getStackedData({groups:this.configs.groups})[c][d].data[h]),f!==null&&o.push({[i]:h,[m]:p,[v]:f}))})}),this.model.getDisplayData(this.configs.groups).filter(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l),u=this.services.cartesianScales.getRangeIdentifier(l);return o.find(d=>d[i]==l[i]&&d[c]==l[c]&&d[u]==l[u])!==void 0})}}const li=6;class kD extends mt{constructor(){super(...arguments),this.type="tree",this.renderType=it.SVG}getLongestLabel(t){let n="";return t.forEach(r=>{const i=r.children?this.getLongestLabel(r.children):"";(i.length>n.length||r.name.length>n.length)&&(n=i.length>r.name.length?i:r.name)}),n}getMockLabelWidth(t,n){const r=t.append("text").attr("dy","0.31em").attr("x",0).attr("text-anchor","end").text(n),{width:i}=N.getSVGElementSize(r.node(),{useBBox:!0});return r.remove(),i}render(t=!0){const n=this.getComponentContainer({ariaLabel:"tree diagram"});n.html("");const{width:r,height:i}=N.getSVGElementSize(this.parent,{useAttrs:!0});if(r<1||i<1)return;const s=this.model.getOptions(),a=this.model.getDisplayData(),o=y(s,"tree","rootTitle")||"Tree",l=this.getMockLabelWidth(n,o),c=this.getLongestLabel(a),u=this.getMockLabelWidth(n,c),d={left:l>0?l+li:30-li},h=ps({name:o,children:a}),p=10,f=r/6,g=S=>{const $=h.descendants().reverse(),k=h.links();let C=h,R=h;h.eachBefore(D=>{D.x<C.x&&(C=D),D.x>R.x&&(R=D)});const M=R.x-C.x,H=n.transition().call(D=>this.services.transitions.setupTransition({transition:D,name:"tree-update-viewbox",animate:!0})).attr("viewBox",[-d.left,C.x,r,M].join(" ")),P=b.selectAll("g").data($,D=>D.id),B=this,O=P.enter().append("g").attr("transform",()=>`translate(${S.y0},${S.x0})`).attr("class",D=>D.depth!==0&&D.children&&D.children.length>0?"clickable":null).on("mouseover",function(D,U){B.services.events.dispatchEvent(T.Tree.NODE_MOUSEOVER,{event:D,element:I(this),datum:U})}).on("click",function(D,U){U.depth!==0&&(U.children=U.children?null:U._children,g(U)),B.services.events.dispatchEvent(T.Tree.NODE_CLICK,{event:D,element:I(this),datum:U})}).on("mouseout",function(D,U){B.services.events.dispatchEvent(T.Tree.NODE_MOUSEOUT,{event:D,element:I(this),datum:U})});O.append("circle").attr("r",2.5).attr("class",D=>D._children?"parent":"child").attr("stroke-width",10),O.append("text").attr("dy","0.31em").attr("x",D=>D._children?-li:li).attr("text-anchor",D=>D._children?"end":"start").text(D=>D.data.name).clone(!0).attr("class","text-stroke").lower(),P.merge(O).transition(H).attr("transform",D=>`translate(${D.y},${D.x})`).attr("fill-opacity",1).attr("stroke-opacity",1),P.exit().transition(H).remove().attr("transform",()=>`translate(${S.y},${S.x})`).attr("fill-opacity",0).attr("stroke-opacity",0);const w=E.selectAll("path").data(k,D=>D.target.id),L=w.enter().append("path").attr("d",()=>{const D={x:S.x0,y:S.y0};return _({source:D,target:D})});w.merge(L).transition(H).attr("d",_),w.exit().transition(H).remove().attr("d",()=>{const D={x:S.x,y:S.y};return _({source:D,target:D})}),h.eachBefore(D=>{D.x0=D.x,D.y0=D.y})},m=h.descendants(),v=m[m.length-1].depth,x=y(s,"tree","type")===Ms.DENDROGRAM?ZA().size([i,r-u-v*li-l]):PL().nodeSize([p,f]).size([i,r-u-v*li-l]),_=ak().x(S=>S.y).y(S=>S.x);h.x0=f/2,h.y0=0,h.descendants().forEach((S,$)=>{S.id=$,S._children=S.children}),x(h),n.attr("viewBox",[-d.left,-0,r,p]).style("user-select","none");const E=n.append("g").attr("class","links"),b=n.append("g").attr("class","nodes");g(h)}}var DD="#000000",RD="#ffffff",ID="#fcf4d6",ND="#fddc69",PD="#f1c21b",UD="#d2a106",BD="#b28600",HD="#8e6a00",VD="#684e00",GD="#483700",zD="#302400",FD="#1c1500",jD={10:ID,20:ND,30:PD,40:UD,50:BD,60:HD,70:VD,80:GD,90:zD,100:FD},WD="#fff2e8",qD="#ffd9be",YD="#ffb784",XD="#ff832b",ZD="#eb6200",KD="#ba4e00",QD="#8a3800",JD="#5e2900",tR="#3e1a00",eR="#231000",nR={10:WD,20:qD,30:YD,40:XD,50:ZD,60:KD,70:QD,80:JD,90:tR,100:eR},rR="#fff1f1",iR="#ffd7d9",sR="#ffb3b8",aR="#ff8389",oR="#fa4d56",lR="#da1e28",cR="#a2191f",uR="#750e13",hR="#520408",dR="#2d0709",pR={10:rR,20:iR,30:sR,40:aR,50:oR,60:lR,70:cR,80:uR,90:hR,100:dR},fR="#fff0f7",mR="#ffd6e8",gR="#ffafd2",vR="#ff7eb6",yR="#ee5396",bR="#d02670",xR="#9f1853",_R="#740937",ER="#510224",OR="#2a0a18",SR={10:fR,20:mR,30:gR,40:vR,50:yR,60:bR,70:xR,80:_R,90:ER,100:OR},TR="#f6f2ff",wR="#e8daff",$R="#d4bbff",MR="#be95ff",CR="#a56eff",AR="#8a3ffc",LR="#6929c4",kR="#491d8b",DR="#31135e",RR="#1c0f30",IR={10:TR,20:wR,30:$R,40:MR,50:CR,60:AR,70:LR,80:kR,90:DR,100:RR},NR="#edf5ff",PR="#d0e2ff",UR="#a6c8ff",BR="#78a9ff",HR="#4589ff",VR="#0f62fe",GR="#0043ce",zR="#002d9c",FR="#001d6c",jR="#001141",WR={10:NR,20:PR,30:UR,40:BR,50:HR,60:VR,70:GR,80:zR,90:FR,100:jR},qR="#e5f6ff",YR="#bae6ff",XR="#82cfff",ZR="#33b1ff",KR="#1192e8",QR="#0072c3",JR="#00539a",tI="#003a6d",eI="#012749",nI="#061727",rI={10:qR,20:YR,30:XR,40:ZR,50:KR,60:QR,70:JR,80:tI,90:eI,100:nI},iI="#d9fbfb",sI="#9ef0f0",aI="#3ddbd9",oI="#08bdba",lI="#009d9a",cI="#007d79",uI="#005d5d",hI="#004144",dI="#022b30",pI="#081a1c",fI={10:iI,20:sI,30:aI,40:oI,50:lI,60:cI,70:uI,80:hI,90:dI,100:pI},mI="#defbe6",gI="#a7f0ba",vI="#6fdc8c",yI="#42be65",bI="#24a148",xI="#198038",_I="#0e6027",EI="#044317",OI="#022d0d",SI="#071908",TI={10:mI,20:gI,30:vI,40:yI,50:bI,60:xI,70:_I,80:EI,90:OI,100:SI},wI="#f2f4f8",$I="#dde1e6",MI="#c1c7cd",CI="#a2a9b0",AI="#878d96",LI="#697077",kI="#4d5358",DI="#343a3f",RI="#21272a",II="#121619",NI={10:wI,20:$I,30:MI,40:CI,50:AI,60:LI,70:kI,80:DI,90:RI,100:II},PI="#f4f4f4",UI="#e0e0e0",BI="#c6c6c6",HI="#a8a8a8",VI="#8d8d8d",GI="#6f6f6f",zI="#525252",FI="#393939",jI="#262626",WI="#161616",qI={10:PI,20:UI,30:BI,40:HI,50:VI,60:GI,70:zI,80:FI,90:jI,100:WI},YI="#f7f3f2",XI="#e5e0df",ZI="#cac5c4",KI="#ada8a8",QI="#8f8b8b",JI="#726e6e",tN="#565151",eN="#3c3838",nN="#272525",rN="#171414",iN={10:YI,20:XI,30:ZI,40:KI,50:QI,60:JI,70:tN,80:eN,90:nN,100:rN},Kg={black:{100:DD},blue:WR,coolGray:NI,cyan:rI,gray:qI,green:TI,magenta:SR,orange:nR,purple:IR,red:pR,teal:fI,warmGray:iN,white:{0:RD},yellow:jD};const sN=e=>{if(!e)return null;for(const t of Object.keys(Kg)){const n=Kg[t];for(const r of Object.keys(n))if(n[+r]===e)return r}return null},Qg=function(e){const t=I(this.parentNode).select("rect.leaf"),n=e.backgroundColor??getComputedStyle(t.node(),null).getPropertyValue("fill"),r=fn(n);let i;if(r&&(i=sN(r?r.hex():null)),i==null){const s=Ld(r).l;i=Math.abs(s*100-100)}return i>50?"white":"black"};let aN=0;class oN extends mt{constructor(){super(...arguments),this.type="treemap",this.renderType=it.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail;this.parent.selectAll("g[data-name='leaf']").transition("legend-hover-treemap").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-treemap"})).attr("opacity",r=>r.parent.data.name===n.datum().name?1:.3)},this.handleLegendMouseOut=()=>{this.parent.selectAll("g[data-name='leaf']").transition("legend-mouseout-treemap").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-treemap"})).attr("opacity",1)}}init(){const{events:t}=this.services;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const n=this.getComponentContainer({ariaLabel:"treemap"});this.model.getData();const r=this.model.getDisplayData(),i=this.model.getOptions(),s=y(window,"location"),{width:a,height:o}=N.getSVGElementSize(n,{useAttrs:!0}),l=ps({name:i.title||"Treemap",children:r}).sum(p=>p.value).sort((p,f)=>f.value-p.value),c=GL().size([a,o]).paddingInner(1).paddingOuter(0).round(!0)(l),u=n.selectAll("g[data-name='leaf']").data(c.leaves(),p=>p.data.name);u.exit().attr("opacity",0).remove();const d=u.enter().append("g").attr("data-name","leaf").attr("data-uid",()=>aN++).merge(u);d.attr("data-name","leaf").transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"treemap-group-update",animate:t})).attr("transform",p=>`translate(${p.x0},${p.y0})`);const h=d.selectAll("rect.leaf").data(p=>[p]);h.exit().attr("width",0).attr("height",0).remove(),h.enter().append("rect").classed("leaf",!0).merge(h).attr("width",0).attr("height",0).attr("id",function(){const p=I(this.parentNode).attr("data-uid");return`${i.style.prefix}-leaf-${p}`}).attr("class",p=>{for(;p.depth>1;)p=p.parent;return this.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:p.data.name,originalClassName:"leaf"})}).transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"treemap-leaf-update-enter",animate:t})).attr("width",p=>p.x1-p.x0).attr("height",p=>p.y1-p.y0).style("fill",p=>{for(;p.depth>1;)p=p.parent;return this.model.getFillColor(p.data.name,null,p.data)}),d.selectAll("clipPath").data(p=>p.data.showLabel!==!0?[]:[1],p=>p).join(p=>p.append("clipPath").attr("id",function(){const f=I(this.parentNode).attr("data-uid");return`${i.style.prefix}-clip-${f}`}).append("use").attr("xlink:href",function(){const f=I(this.parentNode.parentNode).attr("data-uid"),g=`${i.style.prefix}-leaf-${f}`;return new URL(`#${g}`,s)+""}),p=>null,p=>p.remove()),d.selectAll("text").data(p=>{if(p.data.showLabel!==!0)return[];let f=p;for(;f.depth>1;)f=f.parent;return[{text:p.data.name,backgroundColor:this.model.getFillColor(f.data.name)}]},p=>p).join(p=>{const f=p.append("text").text(g=>g.text).style("fill",Qg).attr("x",7).attr("y",18);return s&&f.attr("clip-path",function(){const g=I(this.parentNode).attr("data-uid"),m=`${i.style.prefix}-clip-${g}`;return`url(${new URL(`#${m}`,s)+""})`}),f},p=>p.text(f=>f.text).style("fill",Qg),p=>p.remove()),this.addEventListeners()}addEventListeners(){const t=this;this.parent.selectAll("rect.leaf").on("mouseover",function(n,r){const i=I(this);let s=getComputedStyle(this,null).getPropertyValue("fill"),a=r;for(;a.depth>1;)a=a.parent;i.transition("graph_element_mouseover_fill_update").call(o=>t.services.transitions.setupTransition({transition:o,name:"graph_element_mouseover_fill_update"})).style("fill",o=>{const l=t.model.getFillColor(o.parent.data.name,null,o.data);return l&&(s=l),fn(s).darker(.7).toString()}),t.services.events.dispatchEvent(T.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{color:s,label:a.data.name,bold:!0},{label:r.data.name,value:r.data.value}]}),t.services.events.dispatchEvent(T.Treemap.LEAF_MOUSEOVER,{event:n,element:i,datum:r})}).on("mousemove",function(n,r){const i=I(this);t.services.events.dispatchEvent(T.Treemap.LEAF_MOUSEMOVE,{event:n,element:i,datum:r}),t.services.events.dispatchEvent(T.Tooltip.MOVE,{event:n})}).on("click",function(n,r){t.services.events.dispatchEvent(T.Treemap.LEAF_CLICK,{event:n,element:I(this),datum:r})}).on("mouseout",function(n,r){const i=I(this);i.classed("hovered",!1);let s=r;for(;s.depth>1;)s=s.parent;i.transition().call(a=>t.services.transitions.setupTransition({transition:a,name:"graph_element_mouseout_fill_update"})).style("fill",a=>t.model.getFillColor(a.parent.data.name,null,a.data)),t.services.events.dispatchEvent(T.Treemap.LEAF_MOUSEOUT,{event:n,element:i,datum:r}),t.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:i})})}}function lN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cN(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var uN={value:function(){}};function Jg(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new uo(n)}function uo(e){this._=e}function hN(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}uo.prototype=Jg.prototype={constructor:uo,on:function(e,t){var n=this._,r=hN(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=dN(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=tv(n[i],e.name,t);else if(t==null)for(i in n)n[i]=tv(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function dN(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function tv(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=uN,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}const pN=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Jg},Symbol.toStringTag,{value:"Module"})),fN=cN(pN);var yu,ev;function mN(){if(ev)return yu;ev=1;const e=fN.dispatch,t=Math.PI/180,n={archimedean:g,rectangular:m},r=64,i=2048;yu=function(){var E=[256,256],b=s,S=a,$=l,k=o,C=o,R=c,M=u,H=g,P=[],B=1/0,O=e("word","end"),w=null,L=Math.random,D={},U=x;D.canvas=function(j){return arguments.length?(U=_(j),D):U},D.start=function(){var j=K(U()),X=v((E[0]>>5)*E[1]),ct=null,J=P.length,Y=-1,et=[],ut=P.map(function(q,Z){return q.text=b.call(this,q,Z),q.font=S.call(this,q,Z),q.style=k.call(this,q,Z),q.weight=C.call(this,q,Z),q.rotate=R.call(this,q,Z),q.size=~~$.call(this,q,Z),q.padding=M.call(this,q,Z),q}).sort(function(q,Z){return Z.size-q.size});return w&&clearInterval(w),w=setInterval(F,0),F(),D;function F(){for(var q=Date.now();Date.now()-q<B&&++Y<J&&w;){var Z=ut[Y];Z.x=E[0]*(L()+.5)>>1,Z.y=E[1]*(L()+.5)>>1,d(j,Z,ut,Y),Z.hasText&&W(X,Z,ct)&&(et.push(Z),O.call("word",D,Z),ct?p(ct,Z):ct=[{x:Z.x+Z.x0,y:Z.y+Z.y0},{x:Z.x+Z.x1,y:Z.y+Z.y1}],Z.x-=E[0]>>1,Z.y-=E[1]>>1)}Y>=J&&(D.stop(),O.call("end",D,et,ct))}},D.stop=function(){w&&(clearInterval(w),w=null);for(const j of P)delete j.sprite;return D};function K(j){const X=j.getContext("2d",{willReadFrequently:!0});j.width=j.height=1;const ct=Math.sqrt(X.getImageData(0,0,1,1).data.length>>2);return j.width=(r<<5)/ct,j.height=i/ct,X.fillStyle=X.strokeStyle="red",{context:X,ratio:ct}}function W(j,X,ct){E[0],E[1];for(var J=X.x,Y=X.y,et=Math.sqrt(E[0]*E[0]+E[1]*E[1]),ut=H(E),F=L()<.5?1:-1,q=-F,Z,V,dt;(Z=ut(q+=F))&&(V=~~Z[0],dt=~~Z[1],!(Math.min(Math.abs(V),Math.abs(dt))>=et));)if(X.x=J+V,X.y=Y+dt,!(X.x+X.x0<0||X.y+X.y0<0||X.x+X.x1>E[0]||X.y+X.y1>E[1])&&(!ct||f(X,ct))&&!h(X,j,E[0])){for(var ot=X.sprite,It=X.width>>5,Ht=E[0]>>5,rt=X.x-(It<<4),Et=rt&127,Ne=32-Et,Te=X.y1-X.y0,Ts=(X.y+X.y0)*Ht+(rt>>5),ws,xr=0;xr<Te;xr++){ws=0;for(var Xe=0;Xe<=It;Xe++)j[Ts+Xe]|=ws<<Ne|(Xe<It?(ws=ot[xr*It+Xe])>>>Et:0);Ts+=Ht}return!0}return!1}return D.timeInterval=function(j){return arguments.length?(B=j??1/0,D):B},D.words=function(j){return arguments.length?(P=j,D):P},D.size=function(j){return arguments.length?(E=[+j[0],+j[1]],D):E},D.font=function(j){return arguments.length?(S=_(j),D):S},D.fontStyle=function(j){return arguments.length?(k=_(j),D):k},D.fontWeight=function(j){return arguments.length?(C=_(j),D):C},D.rotate=function(j){return arguments.length?(R=_(j),D):R},D.text=function(j){return arguments.length?(b=_(j),D):b},D.spiral=function(j){return arguments.length?(H=n[j]||j,D):H},D.fontSize=function(j){return arguments.length?($=_(j),D):$},D.padding=function(j){return arguments.length?(M=_(j),D):M},D.random=function(j){return arguments.length?(L=j,D):L},D.on=function(){var j=O.on.apply(O,arguments);return j===O?D:j},D};function s(E){return E.text}function a(){return"serif"}function o(){return"normal"}function l(E){return Math.sqrt(E.value)}function c(){return(~~(random()*6)-3)*30}function u(){return 1}function d(E,b,S,$){if(!b.sprite){var k=E.context,C=E.ratio;k.clearRect(0,0,(r<<5)/C,i/C);var R=0,M=0,H=0,P=S.length;for(--$;++$<P;){b=S[$],k.save(),k.font=b.style+" "+b.weight+" "+~~((b.size+1)/C)+"px "+b.font;const Z=k.measureText(b.text),V=-Math.floor(Z.width/2);let dt=(Z.width+1)*C,ot=b.size<<1;if(b.rotate){var B=Math.sin(b.rotate*t),O=Math.cos(b.rotate*t),w=dt*O,L=dt*B,D=ot*O,U=ot*B;dt=Math.max(Math.abs(w+U),Math.abs(w-U))+31>>5<<5,ot=~~Math.max(Math.abs(L+D),Math.abs(L-D))}else dt=dt+31>>5<<5;if(ot>H&&(H=ot),R+dt>=r<<5&&(R=0,M+=H,H=0),M+ot>=i)break;k.translate((R+(dt>>1))/C,(M+(ot>>1))/C),b.rotate&&k.rotate(b.rotate*t),k.fillText(b.text,V,0),b.padding&&(k.lineWidth=2*b.padding,k.strokeText(b.text,V,0)),k.restore(),b.width=dt,b.height=ot,b.xoff=R,b.yoff=M,b.x1=dt>>1,b.y1=ot>>1,b.x0=-b.x1,b.y0=-b.y1,b.hasText=!0,R+=dt}for(var K=k.getImageData(0,0,(r<<5)/C,i/C).data,W=[];--$>=0;)if(b=S[$],!!b.hasText){for(var j=b.width,X=j>>5,ct=b.y1-b.y0,J=0;J<ct*X;J++)W[J]=0;if(R=b.xoff,R==null)return;M=b.yoff;for(var Y=0,et=-1,ut=0;ut<ct;ut++){for(var J=0;J<j;J++){var F=X*ut+(J>>5),q=K[(M+ut)*(r<<5)+(R+J)<<2]?1<<31-J%32:0;W[F]|=q,Y|=q}Y?et=ut:(b.y0++,ct--,ut--,M++)}b.y1=b.y0+et,b.sprite=W.slice(0,(b.y1-b.y0)*X)}}}function h(E,b,S){S>>=5;for(var $=E.sprite,k=E.width>>5,C=E.x-(k<<4),R=C&127,M=32-R,H=E.y1-E.y0,P=(E.y+E.y0)*S+(C>>5),B,O=0;O<H;O++){B=0;for(var w=0;w<=k;w++)if((B<<M|(w<k?(B=$[O*k+w])>>>R:0))&b[P+w])return!0;P+=S}return!1}function p(E,b){var S=E[0],$=E[1];b.x+b.x0<S.x&&(S.x=b.x+b.x0),b.y+b.y0<S.y&&(S.y=b.y+b.y0),b.x+b.x1>$.x&&($.x=b.x+b.x1),b.y+b.y1>$.y&&($.y=b.y+b.y1)}function f(E,b){return E.x+E.x1>b[0].x&&E.x+E.x0<b[1].x&&E.y+E.y1>b[0].y&&E.y+E.y0<b[1].y}function g(E){var b=E[0]/E[1];return function(S){return[b*(S*=.1)*Math.cos(S),S*Math.sin(S)]}}function m(E){var b=4,S=b*E[0]/E[1],$=0,k=0;return function(C){var R=C<0?-1:1;switch(Math.sqrt(1+4*R*C)-R&3){case 0:$+=S;break;case 1:k+=b;break;case 2:$-=S;break;default:k-=b;break}return[$,k]}}function v(E){for(var b=[],S=-1;++S<E;)b[S]=0;return b}function x(){return document.createElement("canvas")}function _(E){return typeof E=="function"?E:function(){return E}}return yu}var gN=mN();const vN=lN(gN);class yN extends mt{constructor(){super(...arguments),this.type="wordcloud",this.renderType=it.SVG,this.handleLegendOnHover=t=>{const{hoveredElement:n}=t.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("text.word").transition("legend-hover-wordcloud").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-wordcloud"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("text.word").transition("legend-mouseout-wordcloud").call(t=>this.services.transitions.setupTransition({transition:t,name:"legend-mouseout-wordcloud"})).attr("opacity",1)}}init(){const t=this.services.events;t.addEventListener(T.Legend.ITEM_HOVER,this.handleLegendOnHover),t.addEventListener(T.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(t=!0){const n=this,r=this.getComponentContainer({ariaLabel:"word cloud"}).attr("width","100%").attr("height","100%"),i=this.model.getDisplayData(),s=this.getFontSizeScale(i),a=this.getOptions(),{fontSizeMapsTo:o,wordMapsTo:l}=a.wordCloud,{groupMapsTo:c}=a.data,{width:u,height:d}=N.getSVGElementSize(r,{useAttrs:!0});if(u===0||d===0)return;const h=vN().size([u,d]).words(i.map(function(f){const g=f[o];if(typeof f[o]!="number")throw Error("Badly formatted WordCloud data. `value` should only be an integer or float");return{[c]:f[c],text:f[l],size:g,value:g}})).padding(5).rotate(0).fontSize(f=>s(f.size)).on("end",p);h.start();function p(f){const g=N.appendOrSelect(r,"g.words");g.attr("transform",`translate(${h.size()[0]/2}, ${h.size()[1]/2})`);const m=g.selectAll("text").data(f,v=>`${v[c]}-${v.text}`);m.exit().attr("opacity",0).remove(),m.enter().append("text").attr("opacity",0).merge(m).style("font-size",v=>`${v.size}px`).text(function(v){return v.text}).attr("class",v=>n.model.getColorClassName({classNameTypes:[st.FILL],dataGroupName:v[c],originalClassName:`word ${v.size>32?"light":""}`})).style("fill",v=>n.model.getFillColor(v[c],v.text,v)).attr("text-anchor","middle").transition().call(v=>n.services.transitions.setupTransition({transition:v,name:"wordcloud-text-update-enter",animate:t})).attr("transform",v=>`translate(${v.x}, ${v.y})`).attr("opacity",1)}this.addEventListeners()}getFontSizeScale(t){const n=this.getOptions(),{fontSizeMapsTo:r}=n.wordCloud,i=t.map(l=>l[r]).filter(l=>l),s=N.getHTMLElementSize(this.services.domUtils.getMainContainer()),a=i.length>0,o=a?Ve(i):[1,1];return Fe().domain(o).range(a?n.wordCloud.fontSizeRange(s,t):[4,4])}addEventListeners(){const t=this.getOptions(),{groupMapsTo:n}=t.data,r=this,i=va(s=>{const a=r.parent.selectAll("text.word").transition("wordcloud-word-mouse-highlight").call(o=>r.services.transitions.setupTransition({transition:o,name:"wordcloud-word-mouse-highlight"}));s===null?a.attr("opacity",1):a.attr("opacity",function(){return s===this?1:.3})},6);this.parent.selectAll("text.word").on("mouseover",function(s,a){const o=this;i(o),r.services.events.dispatchEvent(T.WordCloud.WORD_MOUSEOVER,{event:s,element:I(this),datum:a}),r.services.events.dispatchEvent(T.Tooltip.SHOW,{event:s,hoveredElement:o,items:[{label:t.tooltip.wordLabel,value:a.text},{label:t.tooltip.valueLabel,value:a.value},{label:vt(t,"locale.translations.group")||vt(t,"tooltip.groupLabel")||"Group",value:a[n],class:r.model.getColorClassName({classNameTypes:[st.TOOLTIP],dataGroupName:a[n]})}]})}).on("mousemove",function(s,a){const o=I(this);r.services.events.dispatchEvent(T.WordCloud.WORD_MOUSEMOVE,{element:o,datum:a}),r.services.events.dispatchEvent(T.Tooltip.MOVE,{event:s})}).on("click",function(s,a){r.services.events.dispatchEvent(T.WordCloud.WORD_CLICK,{event:s,element:I(this),datum:a})}).on("mouseout",function(s,a){const o=I(this);i(null),r.services.events.dispatchEvent(T.WordCloud.WORD_MOUSEOUT,{event:s,element:o,datum:a}),r.services.events.dispatchEvent(T.Tooltip.HIDE,{hoveredElement:o})})}}class bN extends mt{constructor(){super(...arguments),this.type="geo",this.renderType=it.SVG}render(){const t=this.getComponentContainer({withinChartClip:!0}),{width:n,height:r}=N.getSVGElementSize(t,{useAttrs:!0});if(n<1||r<1)return;const i=this.getProjection(),s=y(this.getOptions(),"geoData"),a=this.model.getCombinedData(),o={},l={};Object.keys(a).forEach(m=>{typeof a[m].value=="number"?o[m]=a[m]:l[m]=a[m]});const c=hD(s,Object.values(l)),u=lD(s,{type:"GeometryCollection",geometries:Object.values(o)}),d=i.fitSize([n,r],u),h=EA().projection(d);N.appendOrSelect(t,"g.geo").selectAll("path").data(u.features).join("path").attr("d",h);const p=this.services.domUtils.generateElementIDString("geo-pattern-stripes"),f=N.appendOrSelect(t,"defs");N.appendOrSelect(f,"pattern").attr("id",p).attr("width",5).attr("height",10).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("path").classed("pattern-fill",!0).attr("d",vs()([[0,0],[0,10]]));const g=N.appendOrSelect(t,"g.missing-data");N.appendOrSelect(g,"path").datum(c).attr("d",h).style("fill",`url(#${p})`)}getProjection(){let t=null;switch(y(this.getOptions(),"thematic","projection")){case Je.geoEqualEarth:t=VA();break;case Je.geoAlbers:t=RA();break;case Je.geoConicEqualArea:t=Xm();break;case Je.geoConicEquidistant:t=BA();break;case Je.geoEquirectangular:t=PA();break;case Je.geoMercator:t=IA();break;case Je.geoNaturalEarth1:t=GA();break;default:throw new Error("Projection is not supported.")}return t}}class xN extends bN{constructor(){super(...arguments),this.type="choropleth"}render(t=!0){super.render();const n=this.model.getCombinedData(),r=this.getComponentContainer({ariaLabel:"map",withinChartClip:!0}),i=y(this.getOptions(),"color"),s=y(i,"gradient","colors");r.select("g.geo").selectAll("path").classed("border",!0).attr("class",a=>this.model.getColorClassName({value:n[a.properties.NAME].value,originalClassName:"border"})).attr("style",a=>s?`fill: ${this.model.getColorClassName({value:n[a.properties.NAME].value})}`:null),this.addCountryAreaEventListener()}addCountryAreaEventListener(){const t=this,n=this.model.getCombinedData();this.parent.selectAll("path.border").on("mouseover",function(r,i){const s=I(this);t.services.events.dispatchEvent(Or.CHOROPLETH_MOUSEOVER,{event:r,element:s,datum:n[i.properties.NAME]}),t.services.events.dispatchEvent(Er.SHOW,{event:r,hoveredElement:s,items:[{label:i.properties.NAME,value:n[i.properties.NAME].value}]})}).on("mousemove",function(r,i){t.services.events.dispatchEvent(Or.CHOROPLETH_MOUSEMOVE,{event:r,element:I(this),datum:n[i.properties.NAME]}),t.services.events.dispatchEvent(Er.MOVE,{event:r})}).on("click",function(r,i){t.services.events.dispatchEvent(Or.CHOROPLETH_CLICK,{event:r,element:I(this),datum:n[i.properties.NAME]})}).on("mouseout",function(r,i){const s=I(this);t.services.events.dispatchEvent(Or.CHOROPLETH_MOUSEOUT,{event:r,element:s,datum:n[i.properties.NAME]}),t.services.events.dispatchEvent(Er.HIDE,{event:r,hoveredElement:s})})}}function bu(e){var t=e==null?0:e.length;return t?Hs(e,1):[]}function _N(e){return ah(ch(e,void 0,bu),e+"")}function nv(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}function EN(e,t){return t.length<2?e:el(e,nv(t,0,-1))}function ON(e,t){return t=Bs(t,e),e=EN(e,t),e==null||delete e[Ai(id(t))]}function SN(e){return Eh(e)?void 0:e}var TN=1,wN=2,$N=4,MN=_N(function(e,t){var n={};if(e==null)return n;var r=!1;t=zo(t,function(s){return s=Bs(s,e),r||(r=s.length>1),s}),$r(e,kh(e),n),r&&(n=Li(n,TN|wN|$N,SN));for(var i=t.length;i--;)ON(n,t[i]);return n});function rv(e){return Math.log(e)}function iv(e){return Math.exp(e)}function CN(e){return-Math.log(-e)}function AN(e){return-Math.exp(-e)}function LN(e){return isFinite(e)?+("1e"+e):e<0?0:e}function kN(e){return e===10?LN:e===Math.E?Math.exp:t=>Math.pow(e,t)}function DN(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function sv(e){return(t,n)=>-e(-t,n)}function RN(e){const t=e(rv,iv),n=t.domain;let r=10,i,s;function a(){return i=DN(r),s=kN(r),n()[0]<0?(i=sv(i),s=sv(s),e(CN,AN)):e(rv,iv),t}return t.base=function(o){return arguments.length?(r=+o,a()):r},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=i(c),p=i(u),f,g;const m=o==null?10:+o;let v=[];if(!(r%1)&&p-h<m){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(f=1;f<r;++f)if(g=h<0?f/s(-h):f*s(h),!(g<c)){if(g>u)break;v.push(g)}}else for(;h<=p;++h)for(f=r-1;f>=1;--f)if(g=h>0?f/s(-h):f*s(h),!(g<c)){if(g>u)break;v.push(g)}v.length*2<m&&(v=Ws(c,u,m))}else v=Ws(h,p,Math.min(p-h,m)).map(s);return d?v.reverse():v},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=zi(l)).precision==null&&(l.trim=!0),l=Il(l)),o===1/0)return l;const c=Math.max(1,r*o/t.ticks().length);return u=>{let d=u/s(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},t.nice=()=>n(Fp(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function av(){const e=RN(op()).domain([1,10]);return e.copy=()=>Pl(e,av()).base(e.base()),Pr.apply(e,arguments),e}function ho(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function po(e){this._context=e}po.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ho(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ho(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function IN(e){return new po(e)}function ov(e){this._context=e}ov.prototype={areaStart:Bn,areaEnd:Bn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ho(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function NN(e){return new ov(e)}function lv(e){this._context=e}lv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ho(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PN(e){return new lv(e)}function cv(e,t){this._basis=new po(e),this._beta=t}cv.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,a=t[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(r+l*s),this._beta*t[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const UN=function e(t){function n(r){return t===1?new po(r):new cv(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function fo(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function xu(e,t){this._context=e,this._k=(1-t)/6}xu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:fo(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:fo(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const BN=function e(t){function n(r){return new xu(r,t)}return n.tension=function(r){return e(+r)},n}(0);function _u(e,t){this._context=e,this._k=(1-t)/6}_u.prototype={areaStart:Bn,areaEnd:Bn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:fo(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const HN=function e(t){function n(r){return new _u(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Eu(e,t){this._context=e,this._k=(1-t)/6}Eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fo(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const VN=function e(t){function n(r){return new Eu(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Ou(e,t,n){var r=e._x1,i=e._y1,s=e._x2,a=e._y2;if(e._l01_a>ee){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ee){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,a,e._x2,e._y2)}function uv(e,t){this._context=e,this._alpha=t}uv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ou(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const GN=function e(t){function n(r){return t?new uv(r,t):new xu(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function hv(e,t){this._context=e,this._alpha=t}hv.prototype={areaStart:Bn,areaEnd:Bn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ou(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zN=function e(t){function n(r){return t?new hv(r,t):new _u(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function dv(e,t){this._context=e,this._alpha=t}dv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ou(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const FN=function e(t){function n(r){return t?new dv(r,t):new Eu(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function pv(e){return e<0?-1:1}function fv(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(pv(s)+pv(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function mv(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Su(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function mo(e){this._context=e}mo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Su(this,this._t0,mv(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Su(this,mv(this,n=fv(this,e,t)),n);break;default:Su(this,this._t0,n=fv(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function gv(e){this._context=new vv(e)}(gv.prototype=Object.create(mo.prototype)).point=function(e,t){mo.prototype.point.call(this,t,e)};function vv(e){this._context=e}vv.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function jN(e){return new mo(e)}function WN(e){return new gv(e)}function yv(e){this._context=e}yv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=bv(e),i=bv(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function bv(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function qN(e){return new yv(e)}function go(e,t){this._context=e,this._t=t}go.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function YN(e){return new go(e,.5)}function XN(e){return new go(e,0)}function ZN(e){return new go(e,1)}class KN extends wn{zoomIn(t,n,r){let i,s,a;const o=r||Br;t&&(i=t.x,s=t.y,a=2);const{width:l,height:c}=N.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});n.transition().duration(o.duration).ease(o.ease).attr("transform",`translate(${l/2}, ${c/2}) scale(${a}) translate(${-i},${-s})`),this.services.events.dispatchEvent(T.CanvasZoom.CANVAS_ZOOM_IN,{element:I(t)})}zoomOut(t,n){const r=n||Br;t.transition().duration(r.duration).ease(r.ease).attr("transform",""),this.services.events.dispatchEvent(T.CanvasZoom.CANVAS_ZOOM_OUT)}}class QN extends wn{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(t,n){this.documentFragment.addEventListener(t,n)}removeEventListener(t,n){this.documentFragment.removeEventListener(t,n)}dispatchEvent(t,n){let r;n?r=new CustomEvent(t,{detail:n}):(r=document.createEvent("Event"),r.initEvent(t,!1,!0)),this.documentFragment.dispatchEvent(r)}}class JN extends wn{constructor(t,n){super(t,n)}downloadCSV(t,n){const r=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([t],{type:i}),n);else if(URL&&"download"in r){const s=URL.createObjectURL(new Blob([t],{type:i}));r.href=s,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}else location.href=`data:application/octet-stream,${encodeURIComponent(t)}`}downloadImage(t,n){const r=document.createElement("a");r.download=n,r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}class tP extends wn{constructor(){super(...arguments),this.pendingTransitions={}}init(){this.services.events?.addEventListener(T.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:t,name:n,animate:r}){return this.pendingTransitions[t._id]=t,t.on("end interrupt cancel",()=>{delete this.pendingTransitions[t._id]}),this.model.getOptions().animations===!1||r===!1?t.duration(0):t.duration(y(fp,n,"duration")||fp.default.duration)}getPendingTransitions(){return this.pendingTransitions}}function Ss(e,t){const n=+Pt(e)-+Pt(t);return n<0?-1:n>0?1:n}function eP(e,t,n){const[r,i]=qn(n?.in,e,t);return r.getFullYear()-i.getFullYear()}function nP(e,t,n){const[r,i]=qn(n?.in,e,t),s=Ss(r,i),a=Math.abs(eP(r,i));r.setFullYear(1584),i.setFullYear(1584);const o=Ss(r,i)===-s,l=s*(a-+o);return l===0?0:l}function Tu(e,t,n){const r=Pt(e,n?.in);if(isNaN(t))return $e(e,NaN);if(!t)return r;const i=r.getDate(),s=$e(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function xv(e,t,n){return Tu(e,t*12,n)}function rP(e,t,n){return xv(e,-t,n)}function iP(e,t,n){const[r,i]=qn(n?.in,e,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function sP(e,t){const n=Pt(e,t?.in);return n.setHours(23,59,59,999),n}function aP(e,t){const n=Pt(e,t?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function oP(e,t){const n=Pt(e,t?.in);return+sP(n,t)==+aP(n,t)}function lP(e,t,n){const[r,i,s]=qn(n?.in,e,e,t),a=Ss(i,s),o=Math.abs(iP(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=Ss(i,s)===-a;oP(r)&&o===1&&Ss(r,s)===1&&(l=!1);const c=a*(o-+l);return c===0?0:c}function cP(e,t,n){return Tu(e,-t,n)}function uP(e,t,n){const[r,i]=qn(n?.in,e,t),s=_v(r,i),a=Math.abs($p(r,i));r.setDate(r.getDate()-s*a);const o=+(_v(r,i)===-s),l=s*(a-o);return l===0?0:l}function _v(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Ev(e,t,n){const r=Pt(e,n?.in);return isNaN(t)?$e(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function hP(e,t,n){return Ev(e,-t,n)}function wu(e){return t=>{const n=(0,Math.trunc)(t);return n===0?0:n}}function dP(e,t,n){const[r,i]=qn(n?.in,e,t),s=(+r-+i)/Yu;return wu()(s)}function Ov(e,t,n){return $e(e,+Pt(e)+t)}function Sv(e,t,n){return Ov(e,t*Yu)}function pP(e,t,n){return Sv(e,-t)}function Tv(e,t){return+Pt(e)-+Pt(t)}function wv(e,t,n){const r=Tv(e,t)/qu;return wu()(r)}function $u(e,t,n){const r=Pt(e,n?.in);return r.setTime(r.getTime()+t*qu),r}function $v(e,t,n){return $u(e,-t,n)}function Mv(e,t,n){const r=Tv(e,t)/1e3;return wu()(r)}function Mu(e,t,n){return Ov(e,t*1e3)}function Cv(e,t,n){return Mu(e,-t)}class fP extends wn{constructor(){super(...arguments),this.scaleTypes={top:null,right:null,bottom:null,left:null},this.scales={top:null,right:null,bottom:null,left:null}}getDomainAxisPosition({datum:t=null}={}){if(this.dualAxes&&t){const n=this.model.getOptions(),{groupMapsTo:r}=n.data,i=y(n,"axes",this.secondaryDomainAxisPosition),s=t[r];if(i?.correspondingDatasets&&i.correspondingDatasets.includes(s))return this.secondaryDomainAxisPosition}return this.domainAxisPosition}getRangeAxisPosition({datum:t=null,groups:n=null}={}){if(this.dualAxes){const r=this.model.getOptions(),{groupMapsTo:i}=r.data,s=y(r,"axes",this.secondaryRangeAxisPosition);let a;if(t!==null?a=t[i]:n&&n.length>0&&(a=n[0]),s?.correspondingDatasets&&s.correspondingDatasets.includes(a))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition}getAxisOptions(t){return y(this.model.getOptions(),"axes",t)}getDomainAxisOptions(){const t=this.getDomainAxisPosition();return this.getAxisOptions(t)}getRangeAxisOptions(){const t=this.getRangeAxisPosition();return this.getAxisOptions(t)}getScaleLabel(t){return this.getAxisOptions(t).title||(t===G.BOTTOM||t===G.TOP?"x-value":"y-value")}getDomainLabel(){return this.getScaleLabel(this.getDomainAxisPosition())}getRangeLabel(){return this.getScaleLabel(this.getRangeAxisPosition())}update(){this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation(),Object.keys(G).map(t=>G[t]).forEach(t=>{this.scales[t]=this.createScale(t)})}findDomainAndRangeAxes(){const t=this.findVerticalAxesPositions(),n=this.findHorizontalAxesPositions(),r=this.findDomainAndRangeAxesPositions(t,n);this.domainAxisPosition=r.primaryDomainAxisPosition,this.rangeAxisPosition=r.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=r.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=r.secondaryRangeAxisPosition)}determineOrientation(){(this.rangeAxisPosition===G.LEFT||this.rangeAxisPosition===G.RIGHT)&&(this.domainAxisPosition===G.BOTTOM||this.domainAxisPosition===G.TOP)?this.orientation=zt.VERTICAL:this.orientation=zt.HORIZONTAL}isDualAxes(){return this.dualAxes}determineAxisDuality(){const t=this.model.getOptions(),n=y(t,"axes");(n[G.LEFT]?.correspondingDatasets&&n[G.RIGHT]||n[G.RIGHT]?.correspondingDatasets&&n[G.LEFT]||n[G.TOP]?.correspondingDatasets&&n[G.BOTTOM]||n[G.BOTTOM]?.correspondingDatasets&&n[G.TOP])&&(this.dualAxes=!0)}getCustomDomainValuesByposition(t){const n=y(this.model.getOptions(),"axes",t,"domain");if(n&&!Array.isArray(n))throw new Error(`Domain in ${t} axis is not a valid array`);if(Array.isArray(n)&&(this.scaleTypes[t]===nt.LINEAR||this.scaleTypes[t]===nt.TIME)&&n.length!==2)throw new Error(`There can only be 2 elements in domain for scale type: ${this.scaleTypes[t]}`);return n}getOrientation(){return this.orientation}getScaleByPosition(t){return this.scales[t]}getScaleTypeByPosition(t){return this.scaleTypes[t]}getDomainAxisScaleType(){const t=this.getDomainAxisPosition();return this.getScaleTypeByPosition(t)}getRangeAxisScaleType(){const t=this.getRangeAxisPosition();return this.getScaleTypeByPosition(t)}getDomainScale(){return this.scales[this.domainAxisPosition]}getRangeScale(){return this.scales[this.rangeAxisPosition]}getMainXAxisPosition(){const t=[G.BOTTOM,G.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>t.indexOf(n)>-1)}getMainYAxisPosition(){const t=[G.LEFT,G.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>t.indexOf(n)>-1)}getMainXScale(){return this.scales[this.getMainXAxisPosition()]}getMainYScale(){return this.scales[this.getMainYAxisPosition()]}getValueFromScale(t,n,r,i){const s=this.model.getOptions(),a=y(s,"axes")[r],{mapsTo:o}=a,l=y(i,o)!==null?i[o]:i;let c;switch(n){case nt.LABELS:c=t(l)+t.step()/2;break;case nt.TIME:c=t(new Date(l));break;default:c=t(l)}return c}getBoundedScaledValues(t){const{bounds:n}=this.model.getOptions(),r=this.getRangeAxisPosition({datum:t}),i=this.scales[r],s=this.model.getOptions(),a=y(s,"axes")[r],{mapsTo:o}=a,l=t[o]!==void 0?t[o]:t;return[i(y(t,n.upperBoundMapsTo)!==null?t[n.upperBoundMapsTo]:l),i(y(t,n.lowerBoundMapsTo)!==null?t[n.lowerBoundMapsTo]:l)]}getValueThroughAxisPosition(t,n){const r=this.scaleTypes[t],i=this.scales[t];return this.getValueFromScale(i,r,t,n)}getDomainValue(t){const n=this.getDomainAxisPosition({datum:t});return this.getValueThroughAxisPosition(n,t)}getRangeValue(t){const n=this.getRangeAxisPosition({datum:t});return this.getValueThroughAxisPosition(n,t)}getMainXScaleType(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())}getMainYScaleType(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())}getDomainIdentifier(t){const n=this.model.getOptions();return y(n,"axes",this.getDomainAxisPosition({datum:t}),"mapsTo")}getRangeIdentifier(t){const n=this.model.getOptions();return y(n,"axes",this.getRangeAxisPosition({datum:t}),"mapsTo")}extendsDomain(t,n){const r=this.model.getOptions(),i=y(r,"axes",t);if(i.scaleType===nt.TIME){const s=y(r,"timeScale","addSpaceOnEdges");return mP(n,s)}else return gP(n,Nn.paddingRatio,i.scaleType)}findVerticalAxesPositions(){const t=this.model.getOptions(),n=y(t,"axes"),r=this.isDualAxes();return y(n,G.LEFT)===null&&y(n,G.RIGHT)!==null||y(n,G.RIGHT,"main")===!0||r&&y(n,G.LEFT,"correspondingDatasets")?{primary:G.RIGHT,secondary:G.LEFT}:{primary:G.LEFT,secondary:G.RIGHT}}findHorizontalAxesPositions(){const t=this.model.getOptions(),n=y(t,"axes"),r=this.isDualAxes();return y(n,G.BOTTOM)===null&&y(n,G.TOP)!==null||y(n,G.TOP,"main")===!0||r&&y(n,G.BOTTOM,"correspondingDatasets")?{primary:G.TOP,secondary:G.BOTTOM}:{primary:G.BOTTOM,secondary:G.TOP}}findDomainAndRangeAxesPositions(t,n){const r=this.model.getOptions(),i=y(r,"axes",t.primary),s=y(r,"axes",n.primary),a=i.scaleType||nt.LINEAR,o=s.scaleType||nt.LINEAR,l={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return l.primaryDomainAxisPosition=n.primary,l.primaryRangeAxisPosition=t.primary,l.secondaryDomainAxisPosition=n.secondary,l.secondaryRangeAxisPosition=t.secondary,(!(o===nt.LABELS||o===nt.TIME)&&a===nt.LABELS||a===nt.TIME)&&(l.primaryDomainAxisPosition=t.primary,l.primaryRangeAxisPosition=n.primary,l.secondaryDomainAxisPosition=t.secondary,l.secondaryRangeAxisPosition=n.secondary),l}getScaleDomain(t){const n=this.model.getOptions(),r=y(n,"axes",t),i=y(n,"bounds"),{includeZero:s}=r,a=y(r,"scaleType")||nt.LINEAR;if(this.model.isDataEmpty())return[];if(r.binned){const{bins:v}=this.model.getBinConfigurations();return[0,tr(v,x=>x.length)]}else if(r.limitDomainToBins){const{bins:v}=this.model.getBinConfigurations(),x=this.model.getStackKeys({bins:v});return[x[0].split(":")[0],x[x.length-1].split(":")[1]]}const o=this.model.getDisplayData(),{extendLinearDomainBy:l,mapsTo:c,percentage:u,thresholds:d}=r,{reference:h,compareTo:p}=Nn.ratio;if(r.domain)return a===nt.LABELS?r.domain:(a===nt.TIME&&(r.domain=r.domain.map(v=>v.getTime===void 0?new Date(v):v)),this.extendsDomain(t,r.domain));if(u)return[0,100];if(r&&a===nt.LABELS)return Di(o.map(v=>v[c]));let f,g;const m=this.model.getDataGroupNames();if(a===nt.LABELS_RATIO)return o.map(v=>`${v[h]}/${v[p]}`);if(a===nt.TIME)g=o.map(v=>+new Date(v[c]));else if(i&&n.axes)g=[],o.forEach(v=>{g.push(v[c]),v[i.upperBoundMapsTo]&&g.push(v[i.upperBoundMapsTo]),v[i.lowerBoundMapsTo]&&g.push(v[i.lowerBoundMapsTo])});else if(r.stacked===!0&&m&&t===this.getRangeAxisPosition()){const{groupMapsTo:v}=n.data,x=this.model.getDataValuesGroupedByKeys({groups:m}),_=o.filter(b=>!m.includes(b[v])),E=[];x.forEach(b=>{const{...S}=b;let $=0,k=0;Object.values(MN(S,"sharedStackKey")).forEach(C=>{isNaN(C)||(C<0?k+=C:$+=C)}),E.push([k,$])}),g=[...bu(E),..._.map(b=>b[c])]}else g=[],o.forEach(v=>{const x=v[c];Array.isArray(x)&&x.length===2?(g.push(x[0]),g.push(x[1])):(l&&g.push(Math.max(v[c],v[l])),g.push(x))});return a!==nt.TIME&&a!==nt.LOG&&s&&g.push(0),d&&d.length>0&&d.forEach(v=>{const x=y(v,"value");x!==null&&g.push(x)}),f=Ve(g),f=this.extendsDomain(t,f),f}createScale(t){const n=this.model.getOptions(),r=y(n,"axes",t);if(!r)return null;const i=y(r,"scaleType")||nt.LINEAR;this.scaleTypes[t]=i;let s;return i===nt.TIME?s=uf():i===nt.LOG?s=av().base(r.base||10):i===nt.LABELS||i===nt.LABELS_RATIO?s=Fr():s=Fe(),s.domain(this.getScaleDomain(t)),s}getDomainLowerBound(t){let n,r=0;return this.getOrientation()===zt.VERTICAL?n=this.getMainYScale().domain():n=this.getMainXScale().domain(),y(this.model.getOptions(),"axes",t,"includeZero")===!1&&n[0]>0&&n[1]>0&&(r=n[0]),r}getHighestDomainThreshold(){const t=y(this.model.getOptions(),"axes"),n=this.getDomainAxisPosition(),{thresholds:r}=t[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getDomainScale(),s=r.sort((a,o)=>o.value-a.value)[0];return this.getScaleTypeByPosition(n)===nt.TIME&&(typeof s.value=="string"||s.value.getTime===void 0)&&(s.value=new Date(s.value)),{threshold:s,scaleValue:i(s.value)}}getHighestRangeThreshold(){const t=y(this.model.getOptions(),"axes"),n=this.getRangeAxisPosition(),{thresholds:r}=t[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getRangeScale(),s=r.sort((a,o)=>o.value-a.value)[0];return{threshold:s,scaleValue:i(s.value)}}}function mP(e,t){const n=new Date(e[0]),r=new Date(e[1]);return nP(r,n)>1?[rP(n,t),xv(r,t)]:lP(r,n)>1?[cP(n,t),Tu(r,t)]:uP(r,n)>1?[hP(n,t),Ev(r,t)]:dP(r,n)>1?[pP(n,t),Sv(r,t)]:wv(r,n)>30?[$v(n,t*30),$u(r,t*30)]:wv(r,n)>1?[$v(n,t),$u(r,t)]:Mv(r,n)>15?[Cv(n,t*15),Mu(r,t*15)]:Mv(r,n)>1?[Cv(n,t),Mu(r,t)]:[n,r]}function gP([e,t],n,r){const i=(t-e)*n,s=t<=0&&t+i>0?0:t+i;let a=e>=0&&e-i<0?0:e-i;if(r===nt.LOG&&a<=0){if(e<=0)throw Error("Data must have values greater than 0 if log scale type is used.");a=e}return[a,s]}class vP extends wn{constructor(){super(...arguments),this.curveTypes={curveLinear:Sa,curveLinearClosed:mf,curveBasis:IN,curveBasisClosed:NN,curveBasisOpen:PN,curveBundle:UN,curveCardinal:BN,curveCardinalClosed:HN,curveCardinalOpen:VN,curveCatmullRom:GN,curveCatmullRomClosed:zN,curveCatmullRomOpen:FN,curveMonotoneX:jN,curveMonotoneY:WN,curveNatural:qN,curveStep:YN,curveStepAfter:ZN,curveStepBefore:XN}}getD3Curve(){let t="curveLinear";const n=this.model.getOptions().curve;if(n&&(typeof n=="string"?t=n:t=n.name),this.curveTypes[t]){let r=this.curveTypes[t];return n&&Object.keys(n).forEach(i=>{r[i]&&(r=r[i](n[i]))}),r}return console.warn(`The curve type '${t}' is invalid, using 'curveLinear' instead`),this.curveTypes.curveLinear}}class yP extends wn{isZoomBarEnabled(){if(!this.services.cartesianScales||!y(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();const t=this.services.cartesianScales.getMainXAxisPosition(),n=y(this.model.getOptions(),"axes",t,"scaleType");return t===G.BOTTOM&&n===nt.TIME}getZoomBarData(){const t=this.model.getZoomBarData();return t&&t.length>1?t:this.model.getDisplayData()}getDefaultZoomBarDomain(t){if(!this.services.zoom)throw new Error("Services zoom not defined");const n=t||this.services.zoom.getZoomBarData(),{cartesianScales:r}=this.services;if(!r)throw new Error("Services cartesianScales undefined");const i=r.getMainXAxisPosition(),s=r.getDomainIdentifier(),a=y(this.model.getOptions(),"axes",i,"domain");if(Array.isArray(a)&&a.length===2)return a;if(!i)throw new Error("Not defined: mainXAxisPosition");return r.extendsDomain(i,Ve(n,o=>o[s]))}handleDomainChange(t,n={dispatchEvent:!0,type:"manual"}){this.model.set({zoomDomain:t},{animate:!1}),n.dispatchEvent&&this.services.events?.dispatchEvent(T.ZoomDomain.CHANGE,{newDomain:t,type:n.type})}getZoomRatio(){return y(this.model.getOptions(),"zoomBar","zoomRatio")}filterDataForRangeAxis(t,n){const r=this.model.get("zoomDomain"),i=Object.assign({stacked:!1},n),s=y(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&s&&r){const a=i.stacked?"sharedStackKey":this.services.cartesianScales?.getDomainIdentifier(),o=t.filter(l=>new Date(l[a])>=r[0]&&new Date(l[a])<=r[1]);if(o.length>0)return o}return t}zoomIn(t=this.getZoomRatio()){const n=this.model.get("zoomDomain"),r=xe.handleWidth,i=this.services.cartesianScales?.getMainXScale().copy();i.domain(this.getDefaultZoomBarDomain());const s=i(n[0]),a=i(n[1]);if(a-s<r+1)return;const o=i.range(),l=a-s,c=Math.min((o[1]-o[0])/2*(t/2),l/2);let u=s+c,d=a-c;u>=d&&(u=s+l/2-r/2,d=a-l/2+r/2);const h=[i.invert(u),i.invert(d)];(n[0].valueOf()!==h[0].valueOf()||n[1].valueOf()!==h[1].valueOf())&&this.handleDomainChange(h,{dispatchEvent:!0,type:"in"})}zoomOut(t=this.getZoomRatio()){const n=this.model.get("zoomDomain");if(!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const r=this.services.cartesianScales.getMainXScale().copy();r.domain(this.getDefaultZoomBarDomain());const i=r(n[0]),s=r(n[1]),a=r.range(),o=(a[1]-a[0])/2*(t/2),l=Math.max(i-o,a[0]),c=Math.min(s+o,a[1]),u=[r.invert(l),r.invert(c)];(n[0].valueOf()!==u[0].valueOf()||n[1].valueOf()!==u[1].valueOf())&&this.handleDomainChange(u,{dispatchEvent:!0,type:"out"})}resetZoomDomain(){const t=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();(t[0].valueOf()!==n[0].valueOf()||t[1].valueOf()!==n[1].valueOf())&&this.handleDomainChange(n,{dispatchEvent:!0,type:"reset"})}isMinZoomDomain(){const t=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();if(!t||!n)return!1;const r=t[1].valueOf()-t[0].valueOf(),i=n[1].valueOf()-n[0].valueOf(),s=y(this.model.getOptions(),"zoomBar","minZoomRatio");return r/i<s}isMaxZoomDomain(){const t=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();return!!(t&&n&&t[0].valueOf()===n[0].valueOf()&&t[1].valueOf()===n[1].valueOf())}isEmptyState(){return this.getZoomBarData().length===0}isZoomBarLoading(t){return y(this.model.getOptions(),"zoomBar",t,"loading")}isZoomBarLocked(t){return y(this.model.getOptions(),"zoomBar",t,"locked")}}function bP(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:nv(e,t,n)}var xP="\\ud800-\\udfff",_P="\\u0300-\\u036f",EP="\\ufe20-\\ufe2f",OP="\\u20d0-\\u20ff",SP=_P+EP+OP,TP="\\ufe0e\\ufe0f",wP="\\u200d",$P=RegExp("["+wP+xP+SP+TP+"]");function Av(e){return $P.test(e)}function MP(e){return e.split("")}var Lv="\\ud800-\\udfff",CP="\\u0300-\\u036f",AP="\\ufe20-\\ufe2f",LP="\\u20d0-\\u20ff",kP=CP+AP+LP,DP="\\ufe0e\\ufe0f",RP="["+Lv+"]",Cu="["+kP+"]",Au="\\ud83c[\\udffb-\\udfff]",IP="(?:"+Cu+"|"+Au+")",kv="[^"+Lv+"]",Dv="(?:\\ud83c[\\udde6-\\uddff]){2}",Rv="[\\ud800-\\udbff][\\udc00-\\udfff]",NP="\\u200d",Iv=IP+"?",Nv="["+DP+"]?",PP="(?:"+NP+"(?:"+[kv,Dv,Rv].join("|")+")"+Nv+Iv+")*",UP=Nv+Iv+PP,BP="(?:"+[kv+Cu+"?",Cu,Dv,Rv,RP].join("|")+")",HP=RegExp(Au+"(?="+Au+")|"+BP+UP,"g");function VP(e){return e.match(HP)||[]}function GP(e){return Av(e)?VP(e):MP(e)}function zP(e){return function(t){t=Ci(t);var n=Av(t)?GP(t):void 0,r=n?n[0]:t.charAt(0),i=n?bP(n,1).join(""):t.slice(1);return r[e]()+i}}var FP=zP("toUpperCase");function jP(e){return FP(Ci(e).toLowerCase())}var WP=Xf(function(e,t,n){return t=t.toLowerCase(),e+(n?jP(t):t)});class Ye{constructor(t,n){this.components=[],this.services={canvasZoom:KN,domUtils:N,events:QN,files:JN,gradientUtils:dc,transitions:tP},this.model=new rn(this.services)}init(t,n){this.model.set({holder:t},{skipUpdate:!0}),Object.keys(this.services).forEach(r=>{const i=this.services[r];this.services[r]=new i(this.model,this.services)}),this.services.events.addEventListener(T.Model.UPDATE,r=>{const i=!!y(r,"detail","animate");this.update(i)}),this.model.setData(n.data),this.services.events.addEventListener(T.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(t=!0){if(!this.components)return;Object.keys(this.services).forEach(i=>{this.services[i].update()}),this.components.forEach(i=>i.render(t));const n=this.services.transitions.getPendingTransitions(),r=Object.keys(n).map(i=>n[i].end().catch(s=>s));Promise.all(r).then(()=>this.services.events.dispatchEvent(T.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(t=>t.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(t,n){const r=this.model.getOptions(),i=y(r,"toolbar","enabled"),s={id:"legend",components:[new cu(this.model,this.services)],growth:lt.PREFERRED},a=y(r,"canvasZoom","enabled");a&&a===!0&&t.push(new Ck(this.model,this.services));const o=!!this.model.getOptions().title,l={id:"title",components:[new Os(this.model,this.services)],growth:lt.STRETCH},c={id:"toolbar",components:[new io(this.model,this.services)],growth:lt.PREFERRED},u={id:"header",components:[new Oe(this.model,this.services,[l,...i?[c]:[]],{direction:Mt.ROW,alignItems:jn.CENTER})],growth:lt.PREFERRED},d={id:"graph-frame",components:t,growth:lt.STRETCH,renderType:y(n,"graphFrameRenderType")||it.SVG},h=y(n,"excludeLegend")!==!0&&r.legend.enabled!==!1;let p=Mt.COLUMN;if(h){const v=y(r,"legend","position");v==="left"?(p=Mt.ROW,r.legend.orientation||(r.legend.orientation=Tr.VERTICAL)):v==="right"?(p=Mt.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=Tr.VERTICAL)):v==="bottom"&&(p=Mt.COLUMN_REVERSE)}const f={id:"spacer",components:[new Ln(this.model,this.services)],growth:lt.PREFERRED},g={id:"full-frame",components:[new Oe(this.model,this.services,[...h?[s]:[],...h?[f]:[],d],{direction:p})],growth:lt.STRETCH},m=[];if(o||i){m.push(u);const v={id:"spacer",components:[new Ln(this.model,this.services,i?{size:15}:void 0)],growth:lt.PREFERRED};m.push(v)}return m.push(g),[new uu(this.model,this.services),new so(this.model,this.services),new Oe(this.model,this.services,m,{direction:Mt.COLUMN})]}}class ge extends Ye{constructor(t,n){super(t,n),this.services=Object.assign(this.services,{cartesianScales:fP,curves:vP,zoom:yP}),this.model=new lr(this.services)}getAxisChartComponents(t,n){const r=this.model.getOptions(),i=y(r,"zoomBar",G.TOP,"enabled"),s=y(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const a=this.services.cartesianScales.getMainXAxisPosition(),o=y(r,"axes",a,"scaleType"),l=i&&a===G.BOTTOM&&o===nt.TIME,c=this.services.zoom.isZoomBarLocked(G.TOP),u=!!this.model.getOptions().title,d={id:"title",components:[new Os(this.model,this.services)],growth:lt.STRETCH},h={id:"toolbar",components:[new io(this.model,this.services)],growth:lt.PREFERRED},p={id:"header",components:[new Oe(this.model,this.services,[d,...s?[h]:[]],{direction:Mt.ROW,alignItems:jn.CENTER})],growth:lt.PREFERRED},f={id:"legend",components:[new cu(this.model,this.services)],growth:lt.PREFERRED};l&&!c&&t.push(new Tg(this.model,this.services),new Ak(this.model,this.services)),t.push(new kk(this.model,this.services)),t.push(new Dk(this.model,this.services));const g={id:"graph-frame",components:t,growth:lt.STRETCH,renderType:it.SVG},m=y(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1;let v=Mt.COLUMN;if(m){const S=y(this.model.getOptions(),"legend","position");S===Sr.LEFT?(v=Mt.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Tr.VERTICAL)):S===Sr.RIGHT?(v=Mt.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Tr.VERTICAL)):S===Sr.BOTTOM&&(v=Mt.COLUMN_REVERSE)}const x={id:"spacer",components:[new Ln(this.model,this.services)],growth:lt.PREFERRED},_={id:"full-frame",components:[new Oe(this.model,this.services,[...m?[f]:[],...m?[x]:[],g],{direction:v})],growth:lt.STRETCH},E={id:"zoom-bar",components:[new Lk(this.model,this.services)],growth:lt.PREFERRED,renderType:it.SVG},b=[];if(u||s){b.push(p);const S={id:"spacer",components:[new Ln(this.model,this.services,s?{size:15}:void 0)],growth:lt.PREFERRED};b.push(S)}return l&&b.push(E),b.push(_),[new Cg(this.model,this.services),new so(this.model,this.services),new Oe(this.model,this.services,b,{direction:Mt.COLUMN})]}}class qP extends Ye{constructor(t,n){super(t,n),this.model=new jw(this.services),this.model.setOptions(Rt(Ct.alluvialChart,n.options)),this.init(t,n)}getComponents(){const t=[new Jk(this.model,this.services)];return this.getChartComponents(t,{excludeLegend:!0})}}class YP extends ge{constructor(t,n){super(t,n),this.model.setOptions(Rt(pn(Ct.areaChart),n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new Gn(this.model,this.services),new ai(this.model,this.services),new Ug(this.model,this.services),new cn(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0}),new ue(this.model,this.services,{skeleton:jt.GRID})];return this.getAxisChartComponents(t)}}class XP extends ge{constructor(t,n){super(t,n),this.model=new Ww(this.services),this.model.setOptions(Rt(Ct.boxplotChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new nD(this.model,this.services),new oi(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.VERT_OR_HORIZ})];return this.getAxisChartComponents(t,{legend:{enabled:!1}})}}class ZP extends ge{constructor(t,n){super(t,n),this.model.setOptions(Rt(Ct.bubbleChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new Gn(this.model,this.services),new rD(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.GRID})];return this.getAxisChartComponents(t)}}class KP extends ge{constructor(t,n){super(t,n),this.model=new qw(this.services),this.model.setOptions(Rt(Ct.bulletChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new iD(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.GRID})];return this.getAxisChartComponents(t)}}class QP extends Ye{constructor(t,n){super(t,n),this.model=new Yw(this.services),this.model.setOptions(Rt(Ct.choroplethChart,n.options)),this.init(t,n)}getChartComponents(t,n){const r=this.model.getOptions(),i=y(r,"toolbar","enabled"),s=!!this.model.getOptions().title,a={id:"title",components:[new Os(this.model,this.services)],growth:lt.STRETCH},o={id:"toolbar",components:[new io(this.model,this.services)],growth:lt.PREFERRED},l={id:"header",components:[new Oe(this.model,this.services,[a,...i?[o]:[]],{direction:Mt.ROW,alignItems:jn.CENTER})],growth:lt.PREFERRED},c={id:"legend",components:[new Gg(this.model,this.services,{chartType:"choropleth"})],growth:lt.PREFERRED,renderType:it.SVG},u={id:"graph-frame",components:t,growth:lt.STRETCH,renderType:it.SVG},d=y(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1&&this.model.getData().length>0,h=Mt.COLUMN_REVERSE,p={id:"spacer",components:[new Ln(this.model,this.services,{size:15})],growth:lt.PREFERRED},f={id:"full-frame",components:[new Oe(this.model,this.services,[...d?[c]:[],...d?[p]:[],u],{direction:h})],growth:lt.STRETCH},g=[];if(s||i){g.push(l);const m={id:"spacer",components:[new Ln(this.model,this.services,i?{size:15}:void 0)],growth:lt.PREFERRED};g.push(m)}return g.push(f),[new uu(this.model,this.services),new so(this.model,this.services),new Oe(this.model,this.services,g,{direction:Mt.COLUMN})]}getComponents(){const t=[new xN(this.model,this.services)];return this.getChartComponents(t)}}class JP extends Ye{constructor(t,n){super(t,n),this.model=new Xw(this.services),this.model.setOptions(Rt(Ct.circlePackChart,n.options)),this.init(t,n)}getComponents(){const t=[new ED(this.model,this.services)];return this.getChartComponents(t)}}const Pv={[ve.LINE]:[ai,cn],[ve.SCATTER]:[cn],[ve.AREA]:[Ug,ai,cn],[ve.STACKED_AREA]:[Yg,ai,Zg,co],[ve.SIMPLE_BAR]:[qg],[ve.GROUPED_BAR]:[Wg,oi],[ve.STACKED_BAR]:[Xg,co]};class t3 extends ge{constructor(t,n){super(t,n);const r=Rt(Ct.comboChart,n.options);n.options.comboChartTypes||(console.error("No comboChartTypes defined for the Combo Chart!"),r.comboChartTypes=[{type:ve.LINE,correspondingDatasets:[]}]),this.model.setOptions(r),this.init(t,n)}getGraphComponents(){const{comboChartTypes:t}=this.model.getOptions();let n=0;const r=t.map(i=>{const s=i.type;let a;if(typeof i.type=="string"){if(!Object.keys(Pv).includes(i.type))return console.error(`Invalid chart type "${i.type}" specified for combo chart. Please refer to the ComboChart tutorial for more guidance.`),null;let o=!1;const l=`${WP(i.type)}Chart`;return a=at({},Ct[l],this.model.getOptions(),i.options),i.type===ve.STACKED_AREA&&(o=!0),Pv[i.type].map(c=>new c(this.model,this.services,{groups:i.correspondingDatasets,id:n++,options:a,stacked:o}))}else return a=at({},this.model.getOptions(),i.options),new s(this.model,this.services,{groups:i.correspondingDatasets,id:n++,options:a})}).filter(i=>i!==null);return bu(r)}getComponents(){const{comboChartTypes:t}=this.model.getOptions(),n=t.some(i=>i.type===ve.STACKED_BAR||i.type===ve.STACKED_AREA),r=[new me(this.model,this.services),new Se(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.GRID}),...n?[]:[new Gn(this.model,this.services)],...this.getGraphComponents()];return this.getAxisChartComponents(r)}}class Uv extends Ye{constructor(t,n,r=!1){super(t,n),this.model=new Zw(this.services),!r&&(this.model.setOptions(Rt(Ct.pieChart,n.options)),this.init(t,n))}getComponents(){const t=[new zg(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.PIE})];return this.getChartComponents(t)}}class e3 extends Uv{constructor(t,n){super(t,n,!0),this.model.setOptions(Rt(Ct.donutChart,n.options)),this.init(t,n)}getComponents(){const t=[new SD(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.DONUT})];return this.getChartComponents(t)}}class n3 extends Ye{constructor(t,n){super(t,n),this.model=new Kw(this.services),this.model.setOptions(Rt(Ct.gaugeChart,n.options)),this.init(t,n)}getComponents(){const t=[new TD(this.model,this.services)];return this.getChartComponents(t)}}class r3 extends ge{constructor(t,n){super(t,n),this.model.setOptions(Rt(Ct.groupedBarChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new Wg(this.model,this.services),new oi(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.VERT_OR_HORIZ})];return this.getAxisChartComponents(t)}}class i3 extends ge{constructor(t,n){super(t,n),this.model=new Qw(this.services),this.model.setOptions(Rt(Ct.heatmapChart,n.options)),this.init(t,n)}getAxisChartComponents(t,n){const r=this.model.getOptions(),i=y(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const s=!!this.model.getOptions().title,a={id:"title",components:[new Os(this.model,this.services)],growth:lt.STRETCH},o={id:"toolbar",components:[new io(this.model,this.services)],growth:lt.PREFERRED},l={id:"header",components:[new Oe(this.model,this.services,[a,...i?[o]:[]],{direction:Mt.ROW,alignItems:jn.CENTER})],growth:lt.PREFERRED},c={id:"legend",components:[new Gg(this.model,this.services,{chartType:"heatmap"})],growth:lt.PREFERRED,renderType:it.SVG},u={id:"graph-frame",components:t,growth:lt.STRETCH,renderType:it.SVG},d=y(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1&&this.model.getData().length>0,h=Mt.COLUMN_REVERSE,p={id:"spacer",components:[new Ln(this.model,this.services,{size:15})],growth:lt.PREFERRED},f={id:"full-frame",components:[new Oe(this.model,this.services,[...d?[c]:[],...d?[p]:[],u],{direction:h})],growth:lt.STRETCH},g=[];if(s||i){g.push(l);const m={id:"spacer",components:[new Ln(this.model,this.services,i?{size:15}:void 0)],growth:lt.PREFERRED};g.push(m)}return g.push(f),[new Cg(this.model,this.services),new so(this.model,this.services),new Oe(this.model,this.services,g,{direction:Mt.COLUMN})]}getComponents(){const t=[new me(this.model,this.services),new wD(this.model,this.services)];return this.getAxisChartComponents(t)}}class s3 extends ge{constructor(t,n){super(t,n),this.model=new Jw(this.services),this.model.setOptions(Rt(Ct.histogramChart,n.options)),this.init(t,n),this.update()}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new pD(this.model,this.services),new $D(this.model,this.services)];return this.getAxisChartComponents(t)}}class a3 extends ge{constructor(t,n){super(t,n),this.model.setOptions(Rt(Ct.lineChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new Gn(this.model,this.services),new ai(this.model,this.services),new cn(this.model,this.services,{handleThresholds:!0}),new LD(this.model,this.services),new oi(this.model,this.services)];return this.getAxisChartComponents(t)}}class o3 extends ge{constructor(t,n){super(t,n),this.model.setOptions(Rt(Ct.lollipopChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new Gn(this.model,this.services),new MD(this.model,this.services),new cn(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.GRID})];return this.getAxisChartComponents(t)}}class l3 extends Ye{constructor(t,n){super(t,n),this.model=new t$(this.services);const r=n.options.meter?.proportional?at(pn(Ct.proportionalMeterChart),n.options):at(pn(Ct.meterChart),n.options);this.model.setOptions(r),this.init(t,n)}getComponents(){const t=[...y(this.model.getOptions(),"meter","showLabels")?[{id:"meter-title",components:[new _D(this.model,this.services)],growth:lt.STRETCH,renderType:it.SVG},{id:"spacer",components:[new Ln(this.model,this.services,{size:8})],growth:lt.STRETCH}]:[],{id:"meter-graph",components:[new CD(this.model,this.services)],growth:lt.STRETCH,renderType:it.SVG}],n=[new Oe(this.model,this.services,t,{direction:Mt.COLUMN})];return this.getChartComponents(n,{graphFrameRenderType:it.HTML})}}class c3 extends Ye{constructor(t,n){super(t,n),this.model=new e$(this.services),this.model.setOptions(Rt(Ct.radarChart,n.options)),this.init(t,n)}getComponents(){const t=[new AD(this.model,this.services)];return this.getChartComponents(t)}}class u3 extends ge{constructor(t,n){super(t,n),this.model.setOptions(Rt(Ct.scatterChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new Gn(this.model,this.services),new cn(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.GRID})];return this.getAxisChartComponents(t)}}class h3 extends Ye{constructor(t,n){super(t,n),this.model=new n$(this.services),this.model.setOptions(Rt(Ct.treeChart,n.options)),this.init(t,n)}getComponents(){const t=[new kD(this.model,this.services)];return this.getChartComponents(t,{excludeLegend:!0})}}class d3 extends Ye{constructor(t,n){super(t,n),this.model=new r$(this.services),this.model.setOptions(Rt(Ct.treemapChart,n.options)),this.init(t,n)}getComponents(){const t=[new oN(this.model,this.services)];return this.getChartComponents(t)}}class p3 extends ge{constructor(t,n){super(t,n),this.model.setOptions(Rt(Ct.simpleBarChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new qg(this.model,this.services),new oi(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.VERT_OR_HORIZ})];return this.getAxisChartComponents(t)}}class f3 extends ge{constructor(t,n){super(t,n),this.model.setOptions(Rt(Ct.stackedAreaChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new co(this.model,this.services),new Yg(this.model,this.services),new ai(this.model,this.services,{stacked:!0}),new Zg(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0,stacked:!0}),new ue(this.model,this.services,{skeleton:jt.GRID})];return this.getAxisChartComponents(t)}}class m3 extends ge{constructor(t,n){super(t,n),this.model.setOptions(Rt(Ct.stackedBarChart,n.options)),this.init(t,n)}getComponents(){const t=[new me(this.model,this.services),new Se(this.model,this.services),new co(this.model,this.services),new Xg(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.VERT_OR_HORIZ}),new oi(this.model,this.services)];return this.getAxisChartComponents(t)}}class g3 extends Ye{constructor(t,n){super(t,n),this.model=new i$(this.services),this.model.setOptions(Rt(Ct.wordCloudChart,n.options)),this.init(t,n)}getComponents(){const t=[new yN(this.model,this.services),new ue(this.model,this.services,{skeleton:jt.PIE})];return this.getChartComponents(t)}}class Dt extends bt.PureComponent{chart;chartRef=bt.createRef();createChart(t,n,r){throw new Error("Method not implemented.")}componentDidMount(){this.chartRef.current&&!this.chart&&(this.chart=this.createChart(this.chartRef.current,this.props.data,this.props.options))}componentDidUpdate(t){this.props.data!==t.data&&this.chart?.model.setData(this.props.data),this.props.options!==t.options&&this.chart?.model.setOptions(this.props.options)}render(){return bt.createElement("div",{ref:this.chartRef,className:"chart-holder"})}}class v3 extends Dt{createChart(t,n,r){return new qP(t,{data:n,options:r})}}class y3 extends Dt{createChart(t,n,r){return new YP(t,{data:n,options:r})}}class b3 extends Dt{createChart(t,n,r){return new XP(t,{data:n,options:r})}}class x3 extends Dt{createChart(t,n,r){return new ZP(t,{data:n,options:r})}}class _3 extends Dt{createChart(t,n,r){return new KP(t,{data:n,options:r})}}class Bv extends Dt{createChart(t,n,r){return new QP(t,{data:n,options:r})}}class E3 extends Dt{createChart(t,n,r){return new JP(t,{data:n,options:r})}}class O3 extends Dt{createChart(t,n,r){return new t3(t,{data:n,options:r})}}class S3 extends Dt{createChart(t,n,r){return new e3(t,{data:n,options:r})}}class T3 extends Dt{createChart(t,n,r){return new n3(t,{data:n,options:r})}}class w3 extends Dt{createChart(t,n,r){return new r3(t,{data:n,options:r})}}class $3 extends Dt{createChart(t,n,r){return new i3(t,{data:n,options:r})}}class M3 extends Dt{createChart(t,n,r){return new s3(t,{data:n,options:r})}}class C3 extends Dt{createChart(t,n,r){return new a3(t,{data:n,options:r})}}class A3 extends Dt{createChart(t,n,r){return new o3(t,{data:n,options:r})}}class L3 extends Dt{createChart(t,n,r){return new l3(t,{data:n,options:r})}}class k3 extends Dt{createChart(t,n,r){return new Uv(t,{data:n,options:r})}}class D3 extends Dt{createChart(t,n,r){return new c3(t,{data:n,options:r})}}class R3 extends Dt{createChart(t,n,r){return new u3(t,{data:n,options:r})}}class I3 extends Dt{createChart(t,n,r){return new p3(t,{data:n,options:r})}}class N3 extends Dt{createChart(t,n,r){return new f3(t,{data:n,options:r})}}class P3 extends Dt{createChart(t,n,r){return new m3(t,{data:n,options:r})}}class U3 extends Dt{createChart(t,n,r){return new h3(t,{data:n,options:r})}}class B3 extends Dt{createChart(t,n,r){return new d3(t,{data:n,options:r})}}class H3 extends Dt{createChart(t,n,r){return new g3(t,{data:n,options:r})}}function V3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Lu={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Hv;function G3(){return Hv||(Hv=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)t.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(Lu)),Lu.exports}var z3=G3();const zn=V3(z3),Fn="cds",F3=({tag:e="div",className:t,children:n,color:r,href:i,position:s="static",stacked:a,...o})=>{const l=i?"a":o.onClick?"button":e,c=`${Fn}--cc--card-node`,u=zn(c,{[`${c}--stacked`]:a,[`${c}--${l}`]:l,[t]:t});return bt.createElement(l,{className:u,style:{borderColor:r,position:s},tabIndex:0,...o},n)},j3=({children:e,farsideColumn:t=!1,...n})=>{const r=`${Fn}--cc--card-node`,i=zn(`${r}__column`,{[`${r}__column--farside`]:t,...n.className?{[n.className]:!0}:{}});return bt.createElement("div",{className:i,...n},e)},W3=({children:e,...t})=>{const n=`${Fn}--cc--card-node`,r=zn(`${n}__label`,{...t.className?{[t.className]:!0}:{}});return bt.createElement("label",{className:r,...t},e)},q3=({children:e,...t})=>{const n=`${Fn}--cc--card-node`,r=zn(`${n}__subtitle`,{...t.className?{[t.className]:!0}:{}});return bt.createElement("div",{className:r,...t},e)},Y3=({children:e,...t})=>{const n=`${Fn}--cc--card-node`,r=zn(`${n}__title`,{...t.className?{[t.className]:!0}:{}});return bt.createElement("div",{className:r,...t},e)},X3=({color:e,markerEnd:t,markerStart:n,path:r,source:i,target:s,variant:a=null,...o})=>{const l=`${Fn}--cc--edge`,c=zn(l,{[`${l}--${a}`]:a,...o.className?{[o.className]:!0}:{}});let u=r;if(!u&&i&&s&&(u=fD(i,s)),!u)throw Error("Missing parameters for Edge component: path or source and target.");return bt.createElement("g",{className:c,...o},bt.createElement("path",{d:u,className:`${l}__container`}),bt.createElement("path",{d:u,className:`${l}__outer`}),bt.createElement("path",{d:u,className:`${l}__inner`,markerEnd:`url(#${t})`,markerStart:`url(#${n})`,style:{stroke:e}}))},br=({color:e,d:t,id:n,orient:r="auto",height:i,width:s,position:a="end",className:o,refX:l,refY:c,...u})=>{const d=`${Fn}--cc--marker`,h=zn(d,o),p=a==="end"?(s||0)/2+.5:.5,f=(i||0)/2;return bt.createElement("marker",{className:h,markerHeight:i,markerWidth:s,orient:r,id:n,refX:l||p,refY:c||f,markerUnits:"userSpaceOnUse",...u},bt.createElement("path",{d:t,style:{fill:e}}))},Z3=e=>bt.createElement(br,{d:mD.d,...e}),K3=e=>bt.createElement(br,{d:gD.d,...e}),Q3=e=>bt.createElement(br,{d:vD.d,...e}),J3=e=>bt.createElement(br,{d:yD.d,...e}),tU=e=>bt.createElement(br,{d:bD.d,...e}),eU=e=>bt.createElement(br,{d:xD.d,...e}),nU=({shape:e="circle",tag:t="div",title:n="Title",className:r,subtitle:i,description:s,renderIcon:a,href:o,size:l=48,stacked:c,position:u="fixed",bodyPosition:d="absolute",...h})=>{const p=o?"a":h.onClick?"button":t,f=`${Fn}--cc--shape-node`,g=zn(f,{[`${f}--stacked`]:c,[`${f}--${e}`]:e,[`${f}--${p}`]:p,[r]:r}),m=n?bt.createElement("div",{className:`${f}__title`},n):null,v=i?bt.createElement("div",{className:`${f}__subtitle`},i):null,x=s?bt.createElement("div",{className:`${f}__description`},s):null;return bt.createElement(p,{className:g,style:{height:l,width:l,position:u},tabIndex:0,...h},bt.createElement("div",{className:`${f}__icon`},a),bt.createElement("div",{className:`${f}__body`,style:{position:d}},m,v,x))};z.Alignments=Ft,z.AlluvialChart=v3,z.AreaChart=y3,z.AreaEvent=Co,z.ArrowDirections=Cs,z.ArrowLeftMarker=Z3,z.ArrowRightMarker=K3,z.AxisEvent=Mo,z.AxisFlavor=yi,z.AxisPositions=G,z.AxisTitleOrientations=As,z.BarEvent=Do,z.BoxplotChart=b3,z.BoxplotEvent=Ro,z.BubbleChart=x3,z.BulletChart=_3,z.CalloutDirections=fi,z.CanvasZoomEvent=$o,z.CardNode=F3,z.CardNodeColumn=j3,z.CardNodeLabel=W3,z.CardNodeSubtitle=q3,z.CardNodeTitle=Y3,z.CartesianOrientations=zt,z.ChartEvent=Eo,z.ChartTheme=Vo,z.ChartTypes=ve,z.ChoroplethChart=Bv,z.CircleMarker=Q3,z.CirclePackChart=E3,z.ColorClassNameTypes=st,z.ColorLegendType=vi,z.ComboChart=O3,z.DiamondMarker=J3,z.DividerStatus=wr,z.DominantBaseline=Qe,z.DonutChart=S3,z.Edge=X3,z.ExperimentalChoroplethChart=Bv,z.GaugeChart=T3,z.GaugeEvent=ko,z.GaugeTypes=Wn,z.GroupedBarChart=w3,z.HeatmapChart=$3,z.HistogramChart=M3,z.LayoutAlignItems=jn,z.LayoutDirection=Mt,z.LayoutGrowth=lt,z.LegendItemType=Wt,z.LegendOrientations=Tr,z.LegendPositions=Sr,z.LineChart=C3,z.LineEvent=No,z.LollipopChart=A3,z.Marker=br,z.MeterChart=L3,z.ModalEvent=Oo,z.ModelEvent=So,z.PieChart=k3,z.PieEvent=Lo,z.Projection=Je,z.RadarChart=D3,z.RadarEvent=Po,z.RenderTypes=it,z.ScaleTypes=nt,z.ScatterChart=R3,z.ScatterEvent=Io,z.ShapeNode=nU,z.SimpleBarChart=I3,z.Skeletons=jt,z.SquareMarker=tU,z.StackedAreaChart=N3,z.StackedBarChart=P3,z.Statuses=mi,z.TeeMarker=eU,z.TextAnchor=Ke,z.ThresholdEvent=Ho,z.TickRotations=gi,z.ToolbarControlTypes=xt,z.TooltipEvent=Er,z.TreeChart=U3,z.TreeEvent=Uo,z.TreeTypes=Ms,z.TreemapChart=B3,z.TreemapEvent=Bo,z.TruncationTypes=we,z.WordCloudChart=H3,z.WordCloudEvent=Ao,z.ZoomBarTypes=Pe,z.ZoomDomainEvent=wo,z.ZoombarEvent=To,Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.cjs.map
